<!doctype html><html lang="en">
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
  <meta content="width=device-width, initial-scale=1, shrink-to-fit=no" name="viewport">
  <title>Credential Management Level 1</title>
<style data-fill-with="stylesheet">/******************************************************************************
 *                   Style sheet for the W3C specifications                   *
 *
 * Special classes handled by this style sheet include:
 *
 * Indices
 *   - .toc for the Table of Contents (<ol class="toc">)
 *     + <span class="secno"> for the section numbers
 *   - #toc for the Table of Contents (<nav id="toc">)
 *   - ul.index for Indices (<a href="#ref">term</a><span>, in §N.M</span>)
 *   - table.index for Index Tables (e.g. for properties or elements)
 *
 * Structural Markup
 *   - table.data for general data tables
 *     -> use 'scope' attribute, <colgroup>, <thead>, and <tbody> for best results !
 *     -> use <table class='complex data'> for extra-complex tables
 *     -> use <td class='long'> for paragraph-length cell content
 *     -> use <td class='pre'> when manual line breaks/indentation would help readability
 *   - dl.switch for switch statements
 *   - ol.algorithm for algorithms (helps to visualize nesting)
 *   - .figure and .caption (HTML4) and figure and figcaption (HTML5)
 *     -> .sidefigure for right-floated figures
 *   - ins/del
 *
 * Code
 *   - pre and code
 *
 * Special Sections
 *   - .note       for informative notes             (div, p, span, aside, details)
 *   - .example    for informative examples          (div, p, pre, span)
 *   - .issue      for issues                        (div, p, span)
 *   - .assertion  for assertions                    (div, p, span)
 *   - .advisement for loud normative statements     (div, p, strong)
 *   - .annoying-warning for spec obsoletion notices (div, aside, details)
 *
 * Definition Boxes
 *   - pre.def   for WebIDL definitions
 *   - table.def for tables that define other entities (e.g. CSS properties)
 *   - dl.def    for definition lists that define other entitles (e.g. HTML elements)
 *
 * Numbering
 *   - .secno for section numbers in .toc and headings (<span class='secno'>3.2</span>)
 *   - .marker for source-inserted example/figure/issue numbers (<span class='marker'>Issue 4</span>)
 *   - ::before styled for CSS-generated issue/example/figure numbers:
 *     -> Documents wishing to use this only need to add
 *        figcaption::before,
 *        .caption::before { content: "Figure "  counter(figure) " ";  }
 *        .example::before { content: "Example " counter(example) " "; }
 *        .issue::before   { content: "Issue "   counter(issue) " ";   }
 *
 * Header Stuff (ignore, just don't conflict with these classes)
 *   - .head for the header
 *   - .copyright for the copyright
 *
 * Miscellaneous
 *   - .overlarge for things that should be as wide as possible, even if
 *     that overflows the body text area. This can be used on an item or
 *     on its container, depending on the effect desired.
 *     Note that this styling basically doesn't help at all when printing,
 *     since A4 paper isn't much wider than the max-width here.
 *     It's better to design things to fit into a narrower measure if possible.
 *   - js-added ToC jump links (see fixup.js)
 *
 ******************************************************************************/

/******************************************************************************/
/*                                   Body                                     */
/******************************************************************************/

	body {
		counter-reset: example figure issue;

		/* Layout */
		max-width: 50em;               /* limit line length to 50em for readability   */
		margin: 0 auto;                /* center text within page                     */
		padding: 1.6em 1.5em 2em 50px; /* assume 16px font size for downlevel clients */
		padding: 1.6em 1.5em 2em calc(26px + 1.5em); /* leave space for status flag     */

		/* Typography */
		line-height: 1.5;
		font-family: sans-serif;
		widows: 2;
		orphans: 2;
		word-wrap: break-word;
		overflow-wrap: break-word;
		hyphens: auto;

		/* Colors */
		color: black;
		background: white top left fixed no-repeat;
		background-size: 25px auto;
	}


/******************************************************************************/
/*                         Front Matter & Navigation                          */
/******************************************************************************/

/** Header ********************************************************************/

	div.head { margin-bottom: 1em }
	div.head hr { border-style: solid; }

	div.head h1 {
		font-weight: bold;
		margin: 0 0 .1em;
		font-size: 220%;
	}

	div.head h2 { margin-bottom: 1.5em;}

/** W3C Logo ******************************************************************/

	.head .logo {
		float: right;
		margin: 0.4rem 0 0.2rem .4rem;
	}

	.head img[src*="logos/W3C"] {
		display: block;
		border: solid #1a5e9a;
		border-width: .65rem .7rem .6rem;
		border-radius: .4rem;
		background: #1a5e9a;
		color: white;
		font-weight: bold;
	}

	.head a:hover > img[src*="logos/W3C"],
	.head a:focus > img[src*="logos/W3C"] {
		opacity: .8;
	}

	.head a:active > img[src*="logos/W3C"] {
		background: #c00;
		border-color: #c00;
	}

	/* see also additional rules in Link Styling section */

/** Copyright *****************************************************************/

	p.copyright,
	p.copyright small { font-size: small }

/** Back to Top / ToC Toggle **************************************************/

	@media print {
		#toc-nav {
			display: none;
		}
	}
	@media not print {
		#toc-nav {
			position: fixed;
			z-index: 2;
			bottom: 0; left: 0;
			margin: 0;
			min-width: 1.33em;
			border-top-right-radius: 2rem;
			box-shadow: 0 0 2px;
			font-size: 1.5em;
			color: black;
		}
		#toc-nav > a {
			display: block;
			white-space: nowrap;

			height: 1.33em;
			padding: .1em 0.3em;
			margin: 0;

			background: white;
			box-shadow: 0 0 2px;
			border: none;
			border-top-right-radius: 1.33em;
			background: white;
		}
		#toc-nav > #toc-jump {
			padding-bottom: 2em;
			margin-bottom: -1.9em;
		}

		#toc-nav > a:hover,
		#toc-nav > a:focus {
			background: #f8f8f8;
		}
		#toc-nav > a:not(:hover):not(:focus) {
			color: #707070;
		}

		/* statusbar gets in the way on keyboard focus; remove once browsers fix */
		#toc-nav > a[href="#toc"]:not(:hover):focus:last-child {
			padding-bottom: 1.5rem;
		}

		#toc-nav:not(:hover) > a:not(:focus) > span + span {
			/* Ideally this uses :focus-within on #toc-nav */
			display: none;
		}
		#toc-nav > a > span + span {
			padding-right: 0.2em;
		}

		#toc-toggle-inline {
			vertical-align: 0.05em;
			font-size: 80%;
			color: gray;
			color: hsla(203,20%,40%,.7);
			border-style: none;
			background: transparent;
			position: relative;
		}
		#toc-toggle-inline:hover:not(:active),
		#toc-toggle-inline:focus:not(:active) {
			text-shadow: 1px 1px silver;
			top: -1px;
			left: -1px;
		}

		#toc-nav :active {
			color: #C00;
		}
	}

/** ToC Sidebar ***************************************************************/

	/* Floating sidebar */
	@media screen {
		body.toc-sidebar #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			max-width: 80%;
			max-width: calc(100% - 2em - 26px);
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body.toc-sidebar #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}
		body.toc-sidebar #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	/* Hide main scroller when only the ToC is visible anyway */
	@media screen and (max-width: 28em) {
		body.toc-sidebar {
			overflow: hidden;
		}
	}

	/* Sidebar with its own space */
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) #toc {
			position: fixed;
			top: 0; bottom: 0;
			left: 0;
			width: 23.5em;
			overflow: auto;
			padding: 0 1em;
			padding-left: 42px;
			padding-left: calc(1em + 26px);
			background: inherit;
			background-color: #f7f8f9;
			z-index: 1;
			box-shadow: -.1em 0 .25em rgba(0,0,0,.1) inset;
		}
		body:not(.toc-inline) #toc h2 {
			margin-top: .8rem;
			font-variant: small-caps;
			font-variant: all-small-caps;
			text-transform: lowercase;
			font-weight: bold;
			color: gray;
			color: hsla(203,20%,40%,.7);
		}

		body:not(.toc-inline) {
			padding-left: 29em;
		}
		/* See also Overflow section at the bottom */

		body:not(.toc-inline) #toc-jump:not(:focus) {
			width: 0;
			height: 0;
			padding: 0;
			position: absolute;
			overflow: hidden;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) {
			margin: 0 4em;
		}
	}

/******************************************************************************/
/*                                Sectioning                                  */
/******************************************************************************/

/** Headings ******************************************************************/

	h1, h2, h3, h4, h5, h6, dt {
		page-break-after: avoid;
		page-break-inside: avoid;
		font: 100% sans-serif;   /* Reset all font styling to clear out UA styles */
		font-family: inherit;    /* Inherit the font family. */
		line-height: 1.2;        /* Keep wrapped headings compact */
		hyphens: manual;         /* Hyphenated headings look weird */
	}

	h2, h3, h4, h5, h6 {
		margin-top: 3rem;
	}

	h1, h2, h3 {
		color: #005A9C;
		background: transparent;
	}

	h1 { font-size: 170%; }
	h2 { font-size: 140%; }
	h3 { font-size: 120%; }
	h4 { font-weight: bold; }
	h5 { font-style: italic; }
	h6 { font-variant: small-caps; }
	dt { font-weight: bold; }

/** Subheadings ***************************************************************/

	h1 + h2,
	#subtitle {
		/* #subtitle is a subtitle in an H2 under the H1 */
		margin-top: 0;
	}
	h2 + h3,
	h3 + h4,
	h4 + h5,
	h5 + h6 {
		margin-top: 1.2em; /* = 1 x line-height */
	}

/** Section divider ***********************************************************/

	:not(.head) > hr {
		font-size: 1.5em;
		text-align: center;
		margin: 1em auto;
		height: auto;
		border: transparent solid 0;
		background: transparent;
	}
	:not(.head) > hr::before {
		content: "\2727\2003\2003\2727\2003\2003\2727";
	}

/******************************************************************************/
/*                            Paragraphs and Lists                            */
/******************************************************************************/

	p {
		margin: 1em 0;
	}

	dd > p:first-child,
	li > p:first-child {
		margin-top: 0;
	}

	ul, ol {
		margin-left: 0;
		padding-left: 2em;
	}

	li {
		margin: 0.25em 0 0.5em;
		padding: 0;
	}

	dl dd {
		margin: 0 0 .5em 2em;
	}

	.head dd + dd { /* compact for header */
		margin-top: -.5em;
	}

	/* Style for algorithms */
	ol.algorithm ol:not(.algorithm),
	.algorithm > ol ol:not(.algorithm) {
	 border-left: 0.5em solid #DEF;
	}

	/* Put nice boxes around each algorithm. */
	[data-algorithm]:not(.heading) {
	  padding: .5em;
	  border: thin solid #ddd; border-radius: .5em;
	  margin: .5em 0;
	}
	[data-algorithm]:not(.heading) > :first-child {
	  margin-top: 0;
	}
	[data-algorithm]:not(.heading) > :last-child {
	  margin-bottom: 0;
	}

	/* Style for switch/case <dl>s */
	dl.switch > dd > ol.only,
	dl.switch > dd > .only > ol {
	 margin-left: 0;
	}
	dl.switch > dd > ol.algorithm,
	dl.switch > dd > .algorithm > ol {
	 margin-left: -2em;
	}
	dl.switch {
	 padding-left: 2em;
	}
	dl.switch > dt {
	 text-indent: -1.5em;
	 margin-top: 1em;
	}
	dl.switch > dt + dt {
	 margin-top: 0;
	}
	dl.switch > dt::before {
	 content: '\21AA';
	 padding: 0 0.5em 0 0;
	 display: inline-block;
	 width: 1em;
	 text-align: right;
	 line-height: 0.5em;
	}

/** Terminology Markup ********************************************************/


/******************************************************************************/
/*                                 Inline Markup                              */
/******************************************************************************/

/** Terminology Markup ********************************************************/
	dfn   { /* Defining instance */
		font-weight: bolder;
	}
	a > i { /* Instance of term */
		font-style: normal;
	}
	dt dfn code, code.idl {
		font-size: normal;
	}
	dfn var {
		font-style: normal;
	}

/** Change Marking ************************************************************/

	del { color: red;  text-decoration: line-through; }
	ins { color: #080; text-decoration: underline;    }

/** Miscellaneous improvements to inline formatting ***************************/

	sup {
		vertical-align: super;
		font-size: 80%
	}

/******************************************************************************/
/*                                    Code                                    */
/******************************************************************************/

/** General monospace/pre rules ***********************************************/

	pre, code, samp {
		font-family: Menlo, Consolas, "DejaVu Sans Mono", Monaco, monospace;
		font-size: .9em;
		page-break-inside: avoid;
		hyphens: none;
		text-transform: none;
	}
	pre code,
	code code {
		font-size: 100%;
	}

	pre {
		margin-top: 1em;
		margin-bottom: 1em;
		overflow: auto;
	}

/** Inline Code fragments *****************************************************/

  /* Do something nice. */

/******************************************************************************/
/*                                    Links                                   */
/******************************************************************************/

/** General Hyperlinks ********************************************************/

	/* We hyperlink a lot, so make it less intrusive */
	a[href] {
		color: #034575;
		text-decoration: none;
		border-bottom: 1px solid #707070;
		/* Need a bit of extending for it to look okay */
		padding: 0 1px 0;
		margin: 0 -1px 0;
	}
	a:visited {
		border-bottom-color: #BBB;
	}

	/* Use distinguishing colors when user is interacting with the link */
	a[href]:focus,
	a[href]:hover {
		background: #f8f8f8;
		background: rgba(75%, 75%, 75%, .25);
		border-bottom-width: 3px;
		margin-bottom: -2px;
	}
	a[href]:active {
		color: #C00;
		border-color: #C00;
	}

	/* Backout above styling for W3C logo */
	.head .logo,
	.head .logo a {
		border: none;
		text-decoration: none;
		background: transparent;
	}

/******************************************************************************/
/*                                    Images                                  */
/******************************************************************************/

	img {
		border-style: none;
	}

	/* For autogen numbers, add
	   .caption::before, figcaption::before { content: "Figure " counter(figure) ". "; }
	*/

	figure, .figure, .sidefigure {
		page-break-inside: avoid;
		text-align: center;
		margin: 2.5em 0;
	}
	.figure img,    .sidefigure img,    figure img,
	.figure object, .sidefigure object, figure object {
		max-width: 100%;
		margin: auto;
	}
	.figure pre, .sidefigure pre, figure pre {
		text-align: left;
		display: table;
		margin: 1em auto;
	}
	.figure table, figure table {
		margin: auto;
	}
	@media screen and (min-width: 20em) {
		.sidefigure {
			float: right;
			width: 50%;
			margin: 0 0 0.5em 0.5em
		}
	}
	.caption, figcaption, caption {
		font-style: italic;
		font-size: 90%;
	}
	.caption::before, figcaption::before, figcaption > .marker {
		font-weight: bold;
	}
	.caption, figcaption {
		counter-increment: figure;
	}

	/* DL list is indented 2em, but figure inside it is not */
	dd > .figure, dd > figure { margin-left: -2em }

/******************************************************************************/
/*                             Colored Boxes                                  */
/******************************************************************************/

	.issue, .note, .example, .assertion, .advisement, blockquote {
		padding: .5em;
		border: .5em;
		border-left-style: solid;
		page-break-inside: avoid;
	}
	span.issue, span.note {
		padding: .1em .5em .15em;
		border-right-style: solid;
	}

	.issue,
	.note,
	.example,
	.advisement,
	.assertion,
	blockquote {
		margin: 1em auto;
	}
	.note  > p:first-child,
	.issue > p:first-child,
	blockquote > :first-child {
		margin-top: 0;
	}
	blockquote > :last-child {
		margin-bottom: 0;
	}

/** Blockquotes ***************************************************************/

	blockquote {
		border-color: silver;
	}

/** Open issue ****************************************************************/

	.issue {
		border-color: #E05252;
		background: #FBE9E9;
		counter-increment: issue;
		overflow: auto;
	}
	.issue::before, .issue > .marker {
		text-transform: uppercase;
		color: #AE1E1E;
		padding-right: 1em;
		text-transform: uppercase;
	}
	/* Add .issue::before { content: "Issue " counter(issue) " "; } for autogen numbers,
	   or use class="marker" to mark up the issue number in source. */

/** Example *******************************************************************/

	.example {
		border-color: #E0CB52;
		background: #FCFAEE;
		counter-increment: example;
		overflow: auto;
		clear: both;
	}
	.example::before, .example > .marker {
		text-transform: uppercase;
		color: #827017;
		min-width: 7.5em;
		display: block;
	}
	/* Add .example::before { content: "Example " counter(example) " "; } for autogen numbers,
	   or use class="marker" to mark up the example number in source. */

/** Non-normative Note ********************************************************/

	.note {
		border-color: #52E052;
		background: #E9FBE9;
		overflow: auto;
	}

	.note::before, .note > .marker,
	details.note > summary::before,
	details.note > summary > .marker {
		text-transform: uppercase;
		display: block;
		color: hsl(120, 70%, 30%);
	}
	/* Add .note::before { content: "Note"; } for autogen label,
	   or use class="marker" to mark up the label in source. */

	details.note > summary {
		display: block;
		color: hsl(120, 70%, 30%);
	}
	details.note[open] > summary {
		border-bottom: 1px silver solid;
	}

/** Assertion Box *************************************************************/
	/*  for assertions in algorithms */

	.assertion {
		border-color: #AAA;
		background: #EEE;
	}

/** Advisement Box ************************************************************/
	/*  for attention-grabbing normative statements */

	.advisement {
		border-color: orange;
		border-style: none solid;
		background: #FFEECC;
	}
	strong.advisement {
		display: block;
		text-align: center;
	}
	.advisement > .marker {
		color: #B35F00;
	}

/** Spec Obsoletion Notice ****************************************************/
	/* obnoxious obsoletion notice for older/abandoned specs. */

	details {
		display: block;
	}
	summary {
		font-weight: bolder;
	}

	.annoying-warning:not(details),
	details.annoying-warning:not([open]) > summary,
	details.annoying-warning[open] {
		background: #fdd;
		color: red;
		font-weight: bold;
		padding: .75em 1em;
		border: thick red;
		border-style: solid;
		border-radius: 1em;
	}
	.annoying-warning :last-child {
		margin-bottom: 0;
	}

@media not print {
	details.annoying-warning[open] {
		position: fixed;
		left: 1em;
		right: 1em;
		bottom: 1em;
		z-index: 1000;
	}
}

	details.annoying-warning:not([open]) > summary {
		text-align: center;
	}

/** Entity Definition Boxes ***************************************************/

	.def {
		padding: .5em 1em;
		background: #DEF;
		margin: 1.2em 0;
		border-left: 0.5em solid #8CCBF2;
	}

/******************************************************************************/
/*                                    Tables                                  */
/******************************************************************************/

	th, td {
		text-align: left;
		text-align: start;
	}

/** Property/Descriptor Definition Tables *************************************/

	table.def {
		/* inherits .def box styling, see above */
		width: 100%;
		border-spacing: 0;
	}

	table.def td,
	table.def th {
		padding: 0.5em;
		vertical-align: baseline;
		border-bottom: 1px solid #bbd7e9;
	}

	table.def > tbody > tr:last-child th,
	table.def > tbody > tr:last-child td {
		border-bottom: 0;
	}

	table.def th {
		font-style: italic;
		font-weight: normal;
		padding-left: 1em;
		width: 3em;
	}

	/* For when values are extra-complex and need formatting for readability */
	table td.pre {
		white-space: pre-wrap;
	}

	/* A footnote at the bottom of a def table */
	table.def           td.footnote {
		padding-top: 0.6em;
	}
	table.def           td.footnote::before {
		content: " ";
		display: block;
		height: 0.6em;
		width: 4em;
		border-top: thin solid;
	}

/** Data tables (and properly marked-up index tables) *************************/
	/*
		 <table class="data"> highlights structural relationships in a table
		 when correct markup is used (e.g. thead/tbody, th vs. td, scope attribute)

		 Use class="complex data" for particularly complicated tables --
		 (This will draw more lines: busier, but clearer.)

		 Use class="long" on table cells with paragraph-like contents
		 (This will adjust text alignment accordingly.)
		 Alternately use class="longlastcol" on tables, to have the last column assume "long".
	*/

	table {
		word-wrap: normal;
		overflow-wrap: normal;
		hyphens: manual;
	}

	table.data,
	table.index {
		margin: 1em auto;
		border-collapse: collapse;
		border: hidden;
		width: 100%;
	}
	table.data caption,
	table.index caption {
		max-width: 50em;
		margin: 0 auto 1em;
	}

	table.data td,  table.data th,
	table.index td, table.index th {
		padding: 0.5em 1em;
		border-width: 1px;
		border-color: silver;
		border-top-style: solid;
	}

	table.data thead td:empty {
		padding: 0;
		border: 0;
	}

	table.data  thead,
	table.index thead,
	table.data  tbody,
	table.index tbody {
		border-bottom: 2px solid;
	}

	table.data colgroup,
	table.index colgroup {
		border-left: 2px solid;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		border-right: 2px solid;
		border-top: 1px solid silver;
		padding-right: 1em;
	}

	table.data th[colspan],
	table.data td[colspan] {
		text-align: center;
	}

	table.complex.data th,
	table.complex.data td {
		border: 1px solid silver;
		text-align: center;
	}

	table.data.longlastcol td:last-child,
	table.data td.long {
	 vertical-align: baseline;
	 text-align: left;
	}

	table.data img {
		vertical-align: middle;
	}


/*
Alternate table alignment rules

	table.data,
	table.index {
		text-align: center;
	}

	table.data  thead th[scope="row"],
	table.index thead th[scope="row"] {
		text-align: right;
	}

	table.data  tbody th:first-child,
	table.index tbody th:first-child  {
		text-align: right;
	}

Possible extra rowspan handling

	table.data  tbody th[rowspan]:not([rowspan='1']),
	table.index tbody th[rowspan]:not([rowspan='1']),
	table.data  tbody td[rowspan]:not([rowspan='1']),
	table.index tbody td[rowspan]:not([rowspan='1']) {
		border-left: 1px solid silver;
	}

	table.data  tbody th[rowspan]:first-child,
	table.index tbody th[rowspan]:first-child,
	table.data  tbody td[rowspan]:first-child,
	table.index tbody td[rowspan]:first-child{
		border-left: 0;
		border-right: 1px solid silver;
	}
*/

/******************************************************************************/
/*                                  Indices                                   */
/******************************************************************************/


/** Table of Contents *********************************************************/

	.toc a {
		/* More spacing; use padding to make it part of the click target. */
		padding-top: 0.1rem;
		/* Larger, more consistently-sized click target */
		display: block;
		/* Reverse color scheme */
		color: black;
		border-color: #3980B5;
		border-bottom-width: 3px !important;
		margin-bottom: 0px !important;
	}
	.toc a:visited {
		border-color: #054572;
	}
	.toc a:not(:focus):not(:hover) {
		/* Allow colors to cascade through from link styling */
		border-bottom-color: transparent;
	}

	.toc, .toc ol, .toc ul, .toc li {
		list-style: none; /* Numbers must be inlined into source */
		/* because generated content isn't search/selectable and markers can't do multilevel yet */
		margin:  0;
		padding: 0;
		line-height: 1.1rem; /* consistent spacing */
	}

	/* ToC not indented until third level, but font style & margins show hierarchy */
	.toc > li             { font-weight: bold;   }
	.toc > li li          { font-weight: normal; }
	.toc > li li li       { font-size:   95%;    }
	.toc > li li li li    { font-size:   90%;    }
	.toc > li li li li li { font-size:   85%;    }

	.toc > li             { margin: 1.5rem 0;    }
	.toc > li li          { margin: 0.3rem 0;    }
	.toc > li li li       { margin-left: 2rem;   }

	/* Section numbers in a column of their own */
	.toc .secno {
		float: left;
		width: 4rem;
		white-space: nowrap;
	}
	.toc > li li li li .secno {
		font-size: 85%;
	}
	.toc > li li li li li .secno {
		font-size: 100%;
	}

	:not(li) > .toc              { margin-left:  5rem; }
	.toc .secno                  { margin-left: -5rem; }
	.toc > li li li .secno       { margin-left: -7rem; }
	.toc > li li li li .secno    { margin-left: -9rem; }
	.toc > li li li li li .secno { margin-left: -11rem; }

	/* Tighten up indentation in narrow ToCs */
	@media (max-width: 30em) {
		:not(li) > .toc              { margin-left:  4rem; }
		.toc .secno                  { margin-left: -4rem; }
		.toc > li li li              { margin-left:  1rem; }
		.toc > li li li .secno       { margin-left: -5rem; }
		.toc > li li li li .secno    { margin-left: -6rem; }
		.toc > li li li li li .secno { margin-left: -7rem; }
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) :not(li) > .toc              { margin-left:  4rem; }
		body:not(.toc-inline) .toc .secno                  { margin-left: -4rem; }
		body:not(.toc-inline) .toc > li li li              { margin-left:  1rem; }
		body:not(.toc-inline) .toc > li li li .secno       { margin-left: -5rem; }
		body:not(.toc-inline) .toc > li li li li .secno    { margin-left: -6rem; }
		body:not(.toc-inline) .toc > li li li li li .secno { margin-left: -7rem; }
	}
	body.toc-sidebar #toc :not(li) > .toc              { margin-left:  4rem; }
	body.toc-sidebar #toc .toc .secno                  { margin-left: -4rem; }
	body.toc-sidebar #toc .toc > li li li              { margin-left:  1rem; }
	body.toc-sidebar #toc .toc > li li li .secno       { margin-left: -5rem; }
	body.toc-sidebar #toc .toc > li li li li .secno    { margin-left: -6rem; }
	body.toc-sidebar #toc .toc > li li li li li .secno { margin-left: -7rem; }

	.toc li {
		clear: both;
	}


/** Index *********************************************************************/

	/* Index Lists: Layout */
	ul.index       { margin-left: 0; columns: 15em; text-indent: 1em hanging; }
	ul.index li    { margin-left: 0; list-style: none; break-inside: avoid; }
	ul.index li li { margin-left: 1em }
	ul.index dl    { margin-top: 0; }
	ul.index dt    { margin: .2em 0 .2em 20px;}
	ul.index dd    { margin: .2em 0 .2em 40px;}
	/* Index Lists: Typography */
	ul.index ul,
	ul.index dl { font-size: smaller; }
	@media not print {
		ul.index li span {
			white-space: nowrap;
			color: transparent; }
		ul.index li a:hover + span,
		ul.index li a:focus + span {
			color: #707070;
		}
	}

/** Index Tables *****************************************************/
	/* See also the data table styling section, which this effectively subclasses */

	table.index {
		font-size: small;
		border-collapse: collapse;
		border-spacing: 0;
		text-align: left;
		margin: 1em 0;
	}

	table.index td,
	table.index th {
		padding: 0.4em;
	}

	table.index tr:hover td:not([rowspan]),
	table.index tr:hover th:not([rowspan]) {
		background: #f7f8f9;
	}

	/* The link in the first column in the property table (formerly a TD) */
	table.index th:first-child a {
		font-weight: bold;
	}

/******************************************************************************/
/*                                    Print                                   */
/******************************************************************************/

	@media print {
		/* Pages have their own margins. */
		html {
			margin: 0;
		}
		/* Serif for print. */
		body {
			font-family: serif;
		}
	}
	@page {
		margin: 1.5cm 1.1cm;
	}

/******************************************************************************/
/*                                    Legacy                                  */
/******************************************************************************/

	/* This rule is inherited from past style sheets. No idea what it's for. */
	.hide { display: none }



/******************************************************************************/
/*                             Overflow Control                               */
/******************************************************************************/

	.figure .caption, .sidefigure .caption, figcaption {
		/* in case figure is overlarge, limit caption to 50em */
		max-width: 50rem;
		margin-left: auto;
		margin-right: auto;
	}
	.overlarge > table {
		/* limit preferred width of table */
		max-width: 50em;
		margin-left: auto;
		margin-right: auto;
	}

	@media (min-width: 55em) {
		.overlarge {
			margin-left: calc(13px + 26.5rem - 50vw);
			margin-right: calc(13px + 26.5rem - 50vw);
			max-width: none;
		}
	}
	@media screen and (min-width: 78em) {
		body:not(.toc-inline) .overlarge {
			/* 30.5em body padding 50em content area */
			margin-left: calc(40em - 50vw) !important;
			margin-right: calc(40em - 50vw) !important;
		}
	}
	@media screen and (min-width: 90em) {
		body:not(.toc-inline) .overlarge {
			/* 4em html margin 30.5em body padding 50em content area */
			margin-left: 0 !important;
			margin-right: calc(84.5em - 100vw) !important;
		}
	}

	@media not print {
		.overlarge {
			overflow-x: auto;
			/* See Lea Verou's explanation background-attachment:
			 * http://lea.verou.me/2012/04/background-attachment-local/
			 *
			background: top left  / 4em 100% linear-gradient(to right,  #ffffff, rgba(255, 255, 255, 0)) local,
			            top right / 4em 100% linear-gradient(to left, #ffffff, rgba(255, 255, 255, 0)) local,
			            top left  / 1em 100% linear-gradient(to right,  #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            top right / 1em 100% linear-gradient(to left, #c3c3c5, rgba(195, 195, 197, 0)) scroll,
			            white;
			background-repeat: no-repeat;
			*/
		}
	}
</style>
  <meta content="Bikeshed version af155f2e5c3bb772c32f7c8fe6857fd648994d60" name="generator">
<style>
  ul.toc ul ul ul {
    margin: 0 0 0 2em;
  }
  ul.toc ul ul ul span.secno {
    margin-left: -9em;
  }
</style>
<style>/* style-md-lists */

            /* This is a weird hack for me not yet following the commonmark spec
               regarding paragraph and lists. */
            [data-md] > :first-child {
                margin-top: 0;
            }
            [data-md] > :last-child {
                margin-bottom: 0;
            }</style>
<style>/* style-selflinks */

            .heading, .issue, .note, .example, li, dt {
                position: relative;
            }
            a.self-link {
                position: absolute;
                top: 0;
                left: calc(-1 * (3.5rem - 26px));
                width: calc(3.5rem - 26px);
                height: 2em;
                text-align: center;
                border: none;
                transition: opacity .2s;
                opacity: .5;
            }
            a.self-link:hover {
                opacity: 1;
            }
            .heading > a.self-link {
                font-size: 83%;
            }
            li > a.self-link {
                left: calc(-1 * (3.5rem - 26px) - 2em);
            }
            dfn > a.self-link {
                top: auto;
                left: auto;
                opacity: 0;
                width: 1.5em;
                height: 1.5em;
                background: gray;
                color: white;
                font-style: normal;
                transition: opacity .2s, background-color .2s, color .2s;
            }
            dfn:hover > a.self-link {
                opacity: 1;
            }
            dfn > a.self-link:hover {
                color: black;
            }

            a.self-link::before            { content: "¶"; }
            .heading > a.self-link::before { content: "§"; }
            dfn > a.self-link::before      { content: "#"; }</style>
<style>/* style-counters */

            body {
                counter-reset: example figure issue;
            }
            .issue {
                counter-increment: issue;
            }
            .issue:not(.no-marker)::before {
                content: "Issue " counter(issue);
            }

            .example {
                counter-increment: example;
            }
            .example:not(.no-marker)::before {
                content: "Example " counter(example);
            }
            .invalid.example:not(.no-marker)::before,
            .illegal.example:not(.no-marker)::before {
                content: "Invalid Example" counter(example);
            }

            figcaption {
                counter-increment: figure;
            }
            figcaption:not(.no-marker)::before {
                content: "Figure " counter(figure) " ";
            }</style>
<style>/* style-autolinks */

            .css.css, .property.property, .descriptor.descriptor {
                color: #005a9c;
                font-size: inherit;
                font-family: inherit;
            }
            .css::before, .property::before, .descriptor::before {
                content: "‘";
            }
            .css::after, .property::after, .descriptor::after {
                content: "’";
            }
            .property, .descriptor {
                /* Don't wrap property and descriptor names */
                white-space: nowrap;
            }
            .type { /* CSS value <type> */
                font-style: italic;
            }
            pre .property::before, pre .property::after {
                content: "";
            }
            [data-link-type="property"]::before,
            [data-link-type="propdesc"]::before,
            [data-link-type="descriptor"]::before,
            [data-link-type="value"]::before,
            [data-link-type="function"]::before,
            [data-link-type="at-rule"]::before,
            [data-link-type="selector"]::before,
            [data-link-type="maybe"]::before {
                content: "‘";
            }
            [data-link-type="property"]::after,
            [data-link-type="propdesc"]::after,
            [data-link-type="descriptor"]::after,
            [data-link-type="value"]::after,
            [data-link-type="function"]::after,
            [data-link-type="at-rule"]::after,
            [data-link-type="selector"]::after,
            [data-link-type="maybe"]::after {
                content: "’";
            }

            [data-link-type].production::before,
            [data-link-type].production::after,
            .prod [data-link-type]::before,
            .prod [data-link-type]::after {
                content: "";
            }

            [data-link-type=element],
            [data-link-type=element-attr] {
                font-family: Menlo, Consolas, "DejaVu Sans Mono", monospace;
                font-size: .9em;
            }
            [data-link-type=element]::before { content: "<" }
            [data-link-type=element]::after  { content: ">" }

            [data-link-type=biblio] {
                white-space: pre;
            }</style>
<style>/* style-dfn-panel */

        .dfn-panel {
            position: absolute;
            z-index: 35;
            height: auto;
            width: -webkit-fit-content;
            width: fit-content;
            max-width: 300px;
            max-height: 500px;
            overflow: auto;
            padding: 0.5em 0.75em;
            font: small Helvetica Neue, sans-serif, Droid Sans Fallback;
            background: #DDDDDD;
            color: black;
            border: outset 0.2em;
        }
        .dfn-panel:not(.on) { display: none; }
        .dfn-panel * { margin: 0; padding: 0; text-indent: 0; }
        .dfn-panel > b { display: block; }
        .dfn-panel a { color: black; }
        .dfn-panel a:not(:hover) { text-decoration: none !important; border-bottom: none !important; }
        .dfn-panel > b + b { margin-top: 0.25em; }
        .dfn-panel ul { padding: 0; }
        .dfn-panel li { list-style: inside; }
        .dfn-panel.activated {
            display: inline-block;
            position: fixed;
            left: .5em;
            bottom: 2em;
            margin: 0 auto;
            max-width: calc(100vw - 1.5em - .4em - .5em);
            max-height: 30vh;
        }

        .dfn-paneled { cursor: pointer; }
        </style>
<style>/* style-syntax-highlighting */
pre.idl.highlight { color: #708090; }
        .highlight:not(.idl) { background: hsl(24, 20%, 95%); }
        code.highlight { padding: .1em; border-radius: .3em; }
        pre.highlight, pre > code.highlight { display: block; padding: 1em; margin: .5em 0; overflow: auto; border-radius: 0; }
        .highlight .c { color: #708090 } /* Comment */
        .highlight .k { color: #990055 } /* Keyword */
        .highlight .l { color: #000000 } /* Literal */
        .highlight .n { color: #0077aa } /* Name */
        .highlight .o { color: #999999 } /* Operator */
        .highlight .p { color: #999999 } /* Punctuation */
        .highlight .cm { color: #708090 } /* Comment.Multiline */
        .highlight .cp { color: #708090 } /* Comment.Preproc */
        .highlight .c1 { color: #708090 } /* Comment.Single */
        .highlight .cs { color: #708090 } /* Comment.Special */
        .highlight .kc { color: #990055 } /* Keyword.Constant */
        .highlight .kd { color: #990055 } /* Keyword.Declaration */
        .highlight .kn { color: #990055 } /* Keyword.Namespace */
        .highlight .kp { color: #990055 } /* Keyword.Pseudo */
        .highlight .kr { color: #990055 } /* Keyword.Reserved */
        .highlight .kt { color: #990055 } /* Keyword.Type */
        .highlight .ld { color: #000000 } /* Literal.Date */
        .highlight .m { color: #000000 } /* Literal.Number */
        .highlight .s { color: #a67f59 } /* Literal.String */
        .highlight .na { color: #0077aa } /* Name.Attribute */
        .highlight .nc { color: #0077aa } /* Name.Class */
        .highlight .no { color: #0077aa } /* Name.Constant */
        .highlight .nd { color: #0077aa } /* Name.Decorator */
        .highlight .ni { color: #0077aa } /* Name.Entity */
        .highlight .ne { color: #0077aa } /* Name.Exception */
        .highlight .nf { color: #0077aa } /* Name.Function */
        .highlight .nl { color: #0077aa } /* Name.Label */
        .highlight .nn { color: #0077aa } /* Name.Namespace */
        .highlight .py { color: #0077aa } /* Name.Property */
        .highlight .nt { color: #669900 } /* Name.Tag */
        .highlight .nv { color: #222222 } /* Name.Variable */
        .highlight .ow { color: #999999 } /* Operator.Word */
        .highlight .mb { color: #000000 } /* Literal.Number.Bin */
        .highlight .mf { color: #000000 } /* Literal.Number.Float */
        .highlight .mh { color: #000000 } /* Literal.Number.Hex */
        .highlight .mi { color: #000000 } /* Literal.Number.Integer */
        .highlight .mo { color: #000000 } /* Literal.Number.Oct */
        .highlight .sb { color: #a67f59 } /* Literal.String.Backtick */
        .highlight .sc { color: #a67f59 } /* Literal.String.Char */
        .highlight .sd { color: #a67f59 } /* Literal.String.Doc */
        .highlight .s2 { color: #a67f59 } /* Literal.String.Double */
        .highlight .se { color: #a67f59 } /* Literal.String.Escape */
        .highlight .sh { color: #a67f59 } /* Literal.String.Heredoc */
        .highlight .si { color: #a67f59 } /* Literal.String.Interpol */
        .highlight .sx { color: #a67f59 } /* Literal.String.Other */
        .highlight .sr { color: #a67f59 } /* Literal.String.Regex */
        .highlight .s1 { color: #a67f59 } /* Literal.String.Single */
        .highlight .ss { color: #a67f59 } /* Literal.String.Symbol */
        .highlight .vc { color: #0077aa } /* Name.Variable.Class */
        .highlight .vg { color: #0077aa } /* Name.Variable.Global */
        .highlight .vi { color: #0077aa } /* Name.Variable.Instance */
        .highlight .il { color: #000000 } /* Literal.Number.Integer.Long */
        </style>
 <body class="h-entry">
  <div class="head">
   <p data-fill-with="logo"><a class="logo" href="https://www.w3.org/"> <img alt="W3C" height="48" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" width="72"> </a> </p>
   <h1>Credential Management Level 1</h1>
   <h2 class="no-num no-toc no-ref heading settled" id="subtitle"><span class="content">Editor’s Draft, <time class="dt-updated" datetime="2017-03-14">14 March 2017</time></span></h2>
   <div data-fill-with="spec-metadata">
    <dl>
     <dt>This version:
     <dd><a class="u-url" href="https://w3c.github.io/webappsec-credential-management/">https://w3c.github.io/webappsec-credential-management/</a>
     <dt>Latest published version:
     <dd><a href="http://www.w3.org/TR/credential-management-1/">http://www.w3.org/TR/credential-management-1/</a>
     <dt>Previous Versions:
     <dd><a href="http://www.w3.org/TR/2015/WD-credential-management-1-20150430/" rel="previous">http://www.w3.org/TR/2015/WD-credential-management-1-20150430/</a>
     <dt>Version History:
     <dd><a href="https://github.com/w3c/webappsec-credential-management/commits/master/index.src.html">https://github.com/w3c/webappsec-credential-management/commits/master/index.src.html</a>
     <dt>Feedback:
     <dd><span><a href="mailto:public-webappsec@w3.org?subject=%5Bcredential-management%5D%20YOUR%20TOPIC%20HERE">public-webappsec@w3.org</a> with subject line “<kbd>[credential-management] <i data-lt="">… message topic …</i></kbd>” (<a href="https://lists.w3.org/Archives/Public/public-webappsec/" rel="discussion">archives</a>)</span>
     <dt class="editor">Editor:
     <dd class="editor p-author h-card vcard" data-editor-id="56384"><a class="p-name fn u-email email" href="mailto:mkwst@google.com">Mike West</a> (<span class="p-org org">Google Inc.</span>)
     <dt>Use Cases:
     <dd><span><a href="https://w3c.github.io/webappsec/usecases/credentialmanagement/">https://w3c.github.io/webappsec/usecases/credentialmanagement/</a></span>
     <dt>Participate:
     <dd><span><a href="https://github.com/w3c/webappsec-credential-management/issues/new">File an issue</a> (<a href="https://github.com/w3c/webappsec-credential-management/issues">open issues</a>)</span>
    </dl>
   </div>
   <div data-fill-with="warning"></div>
   <p class="copyright" data-fill-with="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright">Copyright</a> © 2017 <a href="https://www.w3.org/"><abbr title="World Wide Web Consortium">W3C</abbr></a><sup>®</sup> (<a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology">MIT</abbr></a>, <a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics">ERCIM</abbr></a>, <a href="https://www.keio.ac.jp/">Keio</a>, <a href="http://ev.buaa.edu.cn/">Beihang</a>). W3C <a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer">liability</a>, <a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks">trademark</a> and <a href="https://www.w3.org/Consortium/Legal/copyright-documents">document use</a> rules apply. </p>
   <hr title="Separator for header">
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="abstract"><span class="content">Abstract</span></h2>
  <div class="p-summary" data-fill-with="abstract">
   <p>This specification describes an imperative API enabling a website to request a

user’s credentials from a user agent, and to help the user agent correctly
store user credentials for future use.</p>
  </div>
  <h2 class="no-num no-toc no-ref heading settled" id="status"><span class="content">Status of this document</span></h2>
  <div data-fill-with="status">
   <p> This is a public copy of the editors’ draft.
	It is provided for discussion only and may change at any moment.
	Its publication here does not imply endorsement of its contents by W3C.
	Don’t cite this document other than as work in progress. </p>
   <p> <strong>Changes to this document may be tracked at <a href="https://github.com/w3c/webappsec">https://github.com/w3c/webappsec</a>.</strong> </p>
   <p> The (<a href="https://lists.w3.org/Archives/Public/public-webappsec/">archived</a>) public mailing list <a href="mailto:public-webappsec@w3.org?Subject=%5Bcredential-management%5D%20PUT%20SUBJECT%20HERE">public-webappsec@w3.org</a> (see <a href="https://www.w3.org/Mail/Request">instructions</a>)
	is preferred for discussion of this specification.
	When sending e-mail,
	please put the text “credential-management” in the subject,
	preferably like this:
	“[credential-management] <em>…summary of comment…</em>” </p>
   <p> This document was produced by the <a href="https://www.w3.org/2011/webappsec/">Web Application Security Working Group</a>. </p>
   <p> This document was produced by a group operating under
	the <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/">5 February 2004 W3C Patent Policy</a>.
	W3C maintains a <a href="https://www.w3.org/2004/01/pp-impl/49309/status" rel="disclosure">public list of any patent disclosures</a> made in connection with the deliverables of the group;
	that page also includes instructions for disclosing a patent.
	An individual who has actual knowledge of a patent which the individual believes contains <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential">Essential Claim(s)</a> must disclose the information in accordance with <a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure">section 6 of the W3C Patent Policy</a>. </p>
   <p> This document is governed by the <a href="https://www.w3.org/2015/Process-20150901/" id="w3c_process_revision">1 September 2015 W3C Process Document</a>. </p>
   <p></p>
  </div>
  <div data-fill-with="at-risk"></div>
  <nav data-fill-with="table-of-contents" id="toc">
   <h2 class="no-num no-toc no-ref" id="contents">Table of Contents</h2>
   <ol class="toc" role="directory">
    <li>
     <a href="#introduction"><span class="secno">1</span> <span class="content">Introduction</span></a>
     <ol class="toc">
      <li><a href="#use-cases"><span class="secno">1.1</span> <span class="content">Use Cases</span></a>
      <li>
       <a href="#introduction-examples"><span class="secno">1.2</span> <span class="content">Examples</span></a>
       <ol class="toc">
        <li><a href="#examples-password-signin"><span class="secno">1.2.1</span> <span class="content">Password-based Sign-in</span></a>
        <li><a href="#examples-federated-signin"><span class="secno">1.2.2</span> <span class="content">Federated Sign-in</span></a>
        <li><a href="#examples-post-signin"><span class="secno">1.2.3</span> <span class="content">Post-sign-in Confirmation</span></a>
        <li><a href="#examples-change-password"><span class="secno">1.2.4</span> <span class="content">Change Password</span></a>
        <li><a href="#examples-legacy"><span class="secno">1.2.5</span> <span class="content">Layering on top of a legacy system</span></a>
       </ol>
     </ol>
    <li><a href="#terms"><span class="secno">2</span> <span class="content">Key Concepts and Terminology</span></a>
    <li>
     <a href="#interfaces"><span class="secno">3</span> <span class="content">Interfaces</span></a>
     <ol class="toc">
      <li>
       <a href="#interfaces-credential-types"><span class="secno">3.1</span> <span class="content">Credential Types</span></a>
       <ol class="toc">
        <li><a href="#interfaces-credential-types-credential"><span class="secno">3.1.1</span> <span class="content"><code>Credential</code></span></a>
        <li><a href="#interfaces-credential-types-siteboundcredential"><span class="secno">3.1.2</span> <span class="content"> <code>SiteBoundCredential</code> </span></a>
        <li>
         <a href="#interfaces-credential-types-passwordcredential"><span class="secno">3.1.3</span> <span class="content"><code>PasswordCredential</code></span></a>
         <ol class="toc">
          <li><a href="#passwordcredential-form-constructor"><span class="secno">3.1.3.1</span> <span class="content"> <code>PasswordCredential(HTMLFormElement form)</code> Constructor </span></a>
          <li><a href="#passwordcredential-data-constructor"><span class="secno">3.1.3.2</span> <span class="content"> <code>PasswordCredential(PasswordCredentialData data)</code> Constructor </span></a>
          <li><a href="#passwordcredential-matching"><span class="secno">3.1.3.3</span> <span class="content"> Matching Algorithm </span></a>
         </ol>
        <li>
         <a href="#interfaces-credential-types-federatedcredential"><span class="secno">3.1.4</span> <span class="content"><code>FederatedCredential</code></span></a>
         <ol class="toc">
          <li><a href="#federatedcredential-matching"><span class="secno">3.1.4.1</span> <span class="content"> Matching Algorithm </span></a>
         </ol>
       </ol>
      <li>
       <a href="#interfaces-credential-manager"><span class="secno">3.2</span> <span class="content">Credential Manager</span></a>
       <ol class="toc">
        <li>
         <a href="#interfaces-request-options"><span class="secno">3.2.1</span> <span class="content"> <code>get()</code> Parameters </span></a>
         <ol class="toc">
          <li><a href="#interfaces-credentialrequestoptions"><span class="secno">3.2.1.1</span> <span class="content"> <code>CredentialRequestOptions</code> dictionary </span></a>
          <li><a href="#interfaces-federatedcredentialrequestoptions"><span class="secno">3.2.1.2</span> <span class="content"> <code>FederatedCredentialRequestOptions</code> dictionary </span></a>
         </ol>
        <li><a href="#identifying-federations"><span class="secno">3.2.2</span> <span class="content">Identifying providers</span></a>
       </ol>
      <li>
       <a href="#fetch-integration"><span class="secno">3.3</span> <span class="content">Integration with Fetch</span></a>
       <ol class="toc">
        <li><a href="#monkey-patching"><span class="secno">3.3.1</span> <span class="content">Monkey Patches to Fetch</span></a>
        <li><a href="#body-extraction"><span class="secno">3.3.2</span> <span class="content"> Extract a <var>body</var> and <var>Content-Type</var> for <var>request</var>’s attached credential </span></a>
       </ol>
     </ol>
    <li>
     <a href="#algorithms"><span class="secno">4</span> <span class="content">Algorithms</span></a>
     <ol class="toc">
      <li>
       <a href="#processing"><span class="secno">4.1</span> <span class="content"> Processing <code>Credential</code>s </span></a>
       <ol class="toc">
        <li><a href="#request-credential"><span class="secno">4.1.1</span> <span class="content"> Request a <code>Credential</code> </span></a>
        <li><a href="#store-credential"><span class="secno">4.1.2</span> <span class="content"> Store a <code>Credential</code> </span></a>
        <li><a href="#clone-credential"><span class="secno">4.1.3</span> <span class="content"> Clone <var>credential</var> </span></a>
       </ol>
      <li>
       <a href="#processing-sitebound"><span class="secno">4.2</span> <span class="content"> Processing <code>SiteBoundCredential</code>s </span></a>
       <ol class="toc">
        <li><a href="#gather-siteboundcredentials"><span class="secno">4.2.1</span> <span class="content"> Gather <code>SiteBoundCredential</code>s </span></a>
        <li><a href="#request-siteboundcredential-without-mediation"><span class="secno">4.2.2</span> <span class="content"> Request an <code>SiteBoundCredential</code> <em>without</em> user mediation </span></a>
        <li><a href="#request-siteboundcredential-with-mediation"><span class="secno">4.2.3</span> <span class="content"> Request a <code>SiteBoundCredential</code> with user mediation </span></a>
        <li><a href="#store-siteboundcredential"><span class="secno">4.2.4</span> <span class="content"> Store <code>SiteBoundCredential</code> </span></a>
       </ol>
      <li>
       <a href="#helpers"><span class="secno">4.3</span> <span class="content"> Helpful Algorithms </span></a>
       <ol class="toc">
        <li><a href="#require-user-mediation-for-origin"><span class="secno">4.3.1</span> <span class="content"> Require user mediation for <var>origin</var> </span></a>
        <li><a href="#is-match"><span class="secno">4.3.2</span> <span class="content"> Does <var>credential</var> match <var>origin B</var>? </span></a>
       </ol>
     </ol>
    <li>
     <a href="#user-mediation"><span class="secno">5</span> <span class="content">User Mediation</span></a>
     <ol class="toc">
      <li><a href="#user-mediated-storage"><span class="secno">5.1</span> <span class="content">Storing and Updating Credentials</span></a>
      <li><a href="#user-mediation-requirements"><span class="secno">5.2</span> <span class="content">Requiring User Mediation</span></a>
      <li><a href="#user-mediated-selection"><span class="secno">5.3</span> <span class="content">Credential Selection</span></a>
     </ol>
    <li>
     <a href="#security-considerations"><span class="secno">6</span> <span class="content">Security Considerations</span></a>
     <ol class="toc">
      <li><a href="#security-cross-origin-leakage"><span class="secno">6.1</span> <span class="content">Cross-origin Credential Leakage</span></a>
      <li><a href="#security-same-origin-leakage"><span class="secno">6.2</span> <span class="content">Same-origin Leakage</span></a>
      <li><a href="#security-origin-confusion"><span class="secno">6.3</span> <span class="content">Origin Confusion</span></a>
      <li><a href="#security-insecure-origins"><span class="secno">6.4</span> <span class="content">Insecure Sites</span></a>
      <li><a href="#security-xss"><span class="secno">6.5</span> <span class="content">Script Injection</span></a>
     </ol>
    <li>
     <a href="#privacy-considerations"><span class="secno">7</span> <span class="content">Privacy Considerations</span></a>
     <ol class="toc">
      <li><a href="#privacy-timing-attacks"><span class="secno">7.1</span> <span class="content">Timing Attacks</span></a>
      <li><a href="#privacy-signout"><span class="secno">7.2</span> <span class="content">Signing-Out</span></a>
      <li><a href="#privacy-chooser-leakage"><span class="secno">7.3</span> <span class="content">Chooser Leakage</span></a>
      <li><a href="#locally-stored-data"><span class="secno">7.4</span> <span class="content">Locally Stored Data</span></a>
     </ol>
    <li>
     <a href="#implementation-considerations"><span class="secno">8</span> <span class="content">Implementation Considerations</span></a>
     <ol class="toc">
      <li><a href="#implementation-for-authors"><span class="secno">8.1</span> <span class="content">Website Authors</span></a>
      <li><a href="#implementation-extension"><span class="secno">8.2</span> <span class="content">Extension Points</span></a>
      <li><a href="#implementation-browser-extensions"><span class="secno">8.3</span> <span class="content">Browser Extensions</span></a>
     </ol>
    <li><a href="#future-work"><span class="secno">9</span> <span class="content">Future Work</span></a>
    <li>
     <a href="#conformance"><span class="secno"></span> <span class="content">Conformance</span></a>
     <ol class="toc">
      <li><a href="#conventions"><span class="secno"></span> <span class="content">Document conventions</span></a>
      <li><a href="#conformant-algorithms"><span class="secno"></span> <span class="content">Conformant Algorithms</span></a>
     </ol>
    <li>
     <a href="#index"><span class="secno"></span> <span class="content">Index</span></a>
     <ol class="toc">
      <li><a href="#index-defined-here"><span class="secno"></span> <span class="content">Terms defined by this specification</span></a>
      <li><a href="#index-defined-elsewhere"><span class="secno"></span> <span class="content">Terms defined by reference</span></a>
     </ol>
    <li>
     <a href="#references"><span class="secno"></span> <span class="content">References</span></a>
     <ol class="toc">
      <li><a href="#normative"><span class="secno"></span> <span class="content">Normative References</span></a>
      <li><a href="#informative"><span class="secno"></span> <span class="content">Informative References</span></a>
     </ol>
    <li><a href="#idl-index"><span class="secno"></span> <span class="content">IDL Index</span></a>
    <li><a href="#issues-index"><span class="secno"></span> <span class="content">Issues Index</span></a>
   </ol>
  </nav>
  <main>
   <section>
    <h2 class="heading settled" data-level="1" id="introduction"><span class="secno">1. </span><span class="content">Introduction</span><a class="self-link" href="#introduction"></a></h2>
    <p><em>This section is not normative.</em></p>
    <p>Signing into websites is more difficult than it should be. The user agent is
  in a unique position to improve the experience in a number of ways, and most
  modern user agents have recognized this by providing some measure of
  credential management natively in the browser. Users can save usernames and
  passwords for websites, and those <a data-link-type="dfn" href="#credentials" id="ref-for-credentials-1">credentials</a> are autofilled into
  sign-in forms with varying degrees of success.</p>
    <p>The <code><a data-link-type="element-attr" href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a></code> attribute offers a
  declarative mechanism by which websites can work with user agents to improve
  the latter’s ability to detect and fill sign-in forms by marking specific
  fields as "username" or "password", and user agents implement a wide variety
  of detection heuristics to work with websites which haven’t taken the time to
  provide this detail in markup.</p>
    <p>While this combination of heuristic and declarative detection works relatively
  well, the status quo leaves some large gaps where detection is problematic.
  Sites with uncommon sign-in mechanisms (submitting credentials via <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#interface-xmlhttprequest">XMLHttpRequest</a></code> <a data-link-type="biblio" href="#biblio-xmlhttprequest">[XMLHTTPREQUEST]</a>, for instance) are difficult to reliably
  detect, as is the increasingly common case in which users wish to authenticate
  themselves using a <a data-link-type="dfn" href="#federated-identity-provider" id="ref-for-federated-identity-provider-1">federated identity provider</a>. Allowing websites to
  more directly interact with the user agent’s credential manager would allow
  the credential manager to be more accurate on the one hand, and to assist
  users with federated sign-in on the other.</p>
    <p>These use cases are explored in more detail in <a href="#use-cases">§1.1 Use Cases</a> and in <a href="https://w3c.github.io/webappsec/usecases/credentialmanagement/"> Credential Management: Use Cases and Requirements</a>; this specification
  attempts to address many of the requirements that document outlines by
  defining a Credential Manager API which a website can use to request <a data-link-type="dfn" href="#credentials" id="ref-for-credentials-2">credentials</a> for a user, and to ask the user agent to persist
  credentials when a user signs in successfully.</p>
    <p class="note" role="note">Note: The API defined here is intentionally small and simple: it does not
  intend to provide authentication in and of itself, but is limited to providing
  an interface to the existing credential managers implemented by existing user
  agents. That functionality is valuable <em>right now</em>, without significant
  effort on the part of either vendors or authors. There’s certainly quite a bit
  more which could be done, of course. See <a href="#future-work">§9 Future Work</a> for some thoughts
  we’ve punted for now, but which could be explored in future iterations of this
  API.</p>
    <section>
     <h3 class="heading settled" data-level="1.1" id="use-cases"><span class="secno">1.1. </span><span class="content">Use Cases</span><a class="self-link" href="#use-cases"></a></h3>
     <p>Modern user agents generally offer users the capability to save passwords
    when signing into a website, and likewise offer the capability to fill those
    passwords into sign-in forms fully- or semi-automatically when users return
    to a website. From the perspective of a website, this behavior is completely
    invisible: the website doesn’t know that passwords have been stored, and it
    isn’t notified that passwords have been filled. This is both good and bad.
    On the one hand, a user agent’s password manager works regardless of whether
    or not a site cooperates, which is excellent for users. On the other, the
    password managers' behaviors are a fragile and proprietary hodgepodge of
    heuristics meant to detect and fill sign-in forms, password change forms,
    etc.</p>
     <p>A few problems with the status quo stand out as being particularly
    problematic:</p>
     <ul>
      <li> User agents have an incredibly difficult time helping users with
        federated identity providers. While detecting a username/password
        form submission is fairly straightforward, detecting sign-in via a
        third-party is quite difficult to reliably do well. It would be nice
        if a website could help the user agent understand the intent behind the
        redirects associated with a typical federated sign-in action. 
      <li> Likewise, user agents struggle to detect more esoteric sign-in
        mechanisms than simple username/password forms. Authors increasingly
        asynchronously sign users in via <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#interface-xmlhttprequest">XMLHttpRequest</a></code> or similar
        mechanisms in order to improve the experience and take more control over
        the presentation. This is good for users, but tough for user agents to
        integrate into their password managers. It would be nice if a website
        could help the user agent make sense of the sign-in mechanism they
        choose to use. 
      <li> Finally, changing passwords is less well-supported than it could be if
        the website explicitly informed the user agent that credentials had
        changed. 
     </ul>
    </section>
    <section>
     <h3 class="heading settled" data-level="1.2" id="introduction-examples"><span class="secno">1.2. </span><span class="content">Examples</span><a class="self-link" href="#introduction-examples"></a></h3>
     <h4 class="heading settled" data-level="1.2.1" id="examples-password-signin"><span class="secno">1.2.1. </span><span class="content">Password-based Sign-in</span><a class="self-link" href="#examples-password-signin"></a></h4>
     <p>A website that supports only username/password pairs can request
    credentials, and use them in existing sign-in forms:</p>
     <div class="example" id="example-6615ff51">
      <a class="self-link" href="#example-6615ff51"></a> 
<pre>navigator.<a class="idl-code" data-link-type="attribute" href="#dom-navigator-credentials" id="ref-for-dom-navigator-credentials-1">credentials</a>.<a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-1">get</a>({ "<a class="idl-code" data-link-type="dict-member" href="#dom-credentialrequestoptions-password" id="ref-for-dom-credentialrequestoptions-password-1">password</a>": true }).then(
    function(credential) {
      if (!credential) {
        // The user either doesn’t have credentials for this site, or
        // refused to share them. Insert some code here to fall back to
        // a basic login form (or, ideally, do nothing, since this API
        // should really be progressive enhancement on top of an
        // existing form).
        return;
      }
      if (credential.type == "<a class="idl-code" data-link-type="const" href="#dom-passwordcredential-password" id="ref-for-dom-passwordcredential-password-1">password</a>") {
        fetch("https://example.com/loginEndpoint", { credentials: credential, method: "POST" })
          .then(function (response) {
            if (/* |response| indicates a successful login */) {
              // Store the credential again, see note below.
              navigator.<a class="idl-code" data-link-type="attribute" href="#dom-navigator-credentials" id="ref-for-dom-navigator-credentials-2">credentials</a>.<a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-1">store</a>(credential);
              // Notify the user that sign-in succeeded! Do amazing, signed-in things!
            } else {
              // Insert some code here to fall back to a basic login form.
            }
          });
      } else {
        // See <a href="#examples-federated-signin">the Federated Sign-in example</a>
      }
    });
</pre>
      <p class="note" role="note">Note: The <a data-link-type="dfn" href="#credential-chooser" id="ref-for-credential-chooser-1">credential chooser</a> presented by the user agent could
      allow the user to choose credentials that aren’t actually stored for the
      current origin. For instance, it might offer up credentials from <code>https://m.example.com</code> when signing into <code>https://www.example.com</code> (as described in <a href="#security-cross-origin-leakage">§6.1 Cross-origin Credential Leakage</a>), or it might allow a user to create a
      new credential on the fly. Developers can deal gracefully with this uncertainty by
      calling <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-2">store()</a></code> every time credentials are
      successfully used, even right after credentials have been retrieved from <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-2">get()</a></code>: if the credentials aren’t yet stored for
      the origin, the user will be given the opportunity to do so. If they are
      stored, the user won’t be prompted.</p>
     </div>
     <h4 class="heading settled" data-level="1.2.2" id="examples-federated-signin"><span class="secno">1.2.2. </span><span class="content">Federated Sign-in</span><a class="self-link" href="#examples-federated-signin"></a></h4>
     <p>A website that supports <a data-link-type="dfn" href="#federated-identity-provider" id="ref-for-federated-identity-provider-2">federated identity providers</a> as well as
    passwords can request credentials, and use them to kick off the sign-in flow
    for the user’s chosen provider:</p>
     <div class="example" id="example-46df84f4">
      <a class="self-link" href="#example-46df84f4"></a> 
<pre>navigator.<a class="idl-code" data-link-type="attribute" href="#dom-navigator-credentials" id="ref-for-dom-navigator-credentials-3">credentials</a>.<a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-3">get</a>({
  "<a class="idl-code" data-link-type="dict-member" href="#dom-credentialrequestoptions-password" id="ref-for-dom-credentialrequestoptions-password-2">password</a>": true,
  "<a class="idl-code" data-link-type="dict-member" href="#dom-credentialrequestoptions-federated" id="ref-for-dom-credentialrequestoptions-federated-1">federated</a>": {
    "<a data-link-type="idl" href="#dom-federatedcredentialrequestoptions-providers" id="ref-for-dom-federatedcredentialrequestoptions-providers-1">providers</a>": [ "https://www.facebook.com", "https://accounts.google.com" ]
  }
}).then(
    function(credential) {
      if (!credential)
        return;

      if (credential.type == "<a class="idl-code" data-link-type="const" href="#dom-federatedcredential-federated" id="ref-for-dom-federatedcredential-federated-1">federated</a>") {
        switch (credential.<a data-link-type="idl" href="#dom-federatedcredential-provider" id="ref-for-dom-federatedcredential-provider-1">provider</a>) {
        case "https://www.facebook.com/":
          // Use Facebook’s SDK, a la
          // <a href="https://developers.facebook.com/docs/facebook-login/login-flow-for-web/#logindialog">https://developers.facebook.com/docs/facebook-login/login-flow-for-web/#logindialog</a>
          FB.login(function (response) {
            if (response.status === "authorized") {
              // Can now use FB.api() calls
            } else {
              // Explain to the user that we would really like them to
              // click "Log me in".
            }
          });
          break;

        case "https://accounts.google.com/":
          // Ditto
          break;

        // ...
        }
      } else {
        fetch("https://example.com/loginEndpoint", { credentials: credential, method: "POST" })
          .then(function (response) { ... })
          .catch(function (response) { ... });
      }
    });
</pre>
      <p class="note" role="note">Note: This API does not go out to the identity provider to grab a token,
      or authenticate the user in any way. It provides a hint to the website as
      to which identity provider the user prefers to use, and little more. See <a href="#future-work">§9 Future Work</a> for directions future versions of this API could take.</p>
     </div>
     <h4 class="heading settled" data-level="1.2.3" id="examples-post-signin"><span class="secno">1.2.3. </span><span class="content">Post-sign-in Confirmation</span><a class="self-link" href="#examples-post-signin"></a></h4>
     <p>To ensure that users are offered to store new credentials after a successful
    sign-in, they need to be passed to <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-3">store()</a></code>.</p>
     <div class="example" id="example-e051a68e">
      <a class="self-link" href="#example-e051a68e"></a> If a user is signed in by calling <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-global-fetch">fetch()</a></code> on a <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-1">PasswordCredential</a></code> object, submitting that data to a sign-in endpoint, then we can check the
      response to determine whether the user was signed in successfully, and
      notify the user agent accordingly. Given a sign-in form like the following: 
<pre>&lt;form action="https://example.com/login" method="POST" id="theForm">
  &lt;label for="username">Username&lt;/label>
  &lt;input type="text" id="username" name="username" <a data-link-type="element-attr" href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a>="<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-username">username</a>">
  &lt;label for="password">Password&lt;/label>
  &lt;input type="password" id="password" name="password" <a data-link-type="element-attr" href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a>="<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-current-password">current-password</a>">
  &lt;input type="submit">
&lt;/form>
</pre>
      <p>Then the developer can handle the form submission with something like the
      following handler:</p>
<pre>document.querySelector('#theForm').addEventListener("submit", e => {
    if (<a class="idl-code" data-link-type="attribute" href="#dom-navigator-credentials" id="ref-for-dom-navigator-credentials-4">navigator.credentials</a>) {
      e.preventDefault();

      // Construct a new <a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-2">PasswordCredential</a> from the <a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/forms.html#htmlformelement">HTMLFormElement</a>
      // that fired the "submit" event: this will suck up the values of the fields
      // labeled with "username" and "current-password" <a data-link-type="element-attr" href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a>
      // attributes:
      var c = new <a data-link-type="idl" href="#dom-passwordcredential-passwordcredential" id="ref-for-dom-passwordcredential-passwordcredential-1">PasswordCredential</a>(e.target);

      // Fetch the form’s action URL, passing that new credential object in
      // as the fetch’s credentials. If the response indicates success, ask
      // the user agent to ask the user to store the credential for future use:
      var init = { method: "POST", credentials: c };
      fetch(e.target.action, init).then(r => {
        if (/* |r| is a "successful" <a data-link-type="idl" href="https://fetch.spec.whatwg.org/#response">Response</a> */)
          <a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-4">navigator.credentials.store</a>(c);
      });
    }
});
</pre>
     </div>
     <div class="example" id="example-5819410c">
      <a class="self-link" href="#example-5819410c"></a> If we’re using a <a data-link-type="dfn" href="#federated-identity-provider" id="ref-for-federated-identity-provider-3">federated identity provider</a>: 
<pre>if (<a class="idl-code" data-link-type="attribute" href="#dom-navigator-credentials" id="ref-for-dom-navigator-credentials-5">navigator.credentials</a>) {
  navigator.<a class="idl-code" data-link-type="attribute" href="#dom-navigator-credentials" id="ref-for-dom-navigator-credentials-6">credentials</a>.<a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-5">store</a>(
    new <a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-1">FederatedCredential</a>({
      "<a data-link-type="idl" href="#dom-credentialdata-id" id="ref-for-dom-credentialdata-id-1">id</a>": "username",
      "<a data-link-type="idl" href="#dom-federatedcredentialdata-provider" id="ref-for-dom-federatedcredentialdata-provider-1">provider</a>": "https://federation.com"
    })
  );
}
</pre>
     </div>
     <h4 class="heading settled" data-level="1.2.4" id="examples-change-password"><span class="secno">1.2.4. </span><span class="content">Change Password</span><a class="self-link" href="#examples-change-password"></a></h4>
     <p>This same storage mechanism can be reused for "password change" with no
    modifications: if the user changes her credentials, the website can notify
    the user agent that she’s successfully signed in with new credentials. The
    user agent can then update the credentials it stores:</p>
     <div class="example" id="example-b1769425">
      <a class="self-link" href="#example-b1769425"></a> MegaCorp Inc. allows users to change their passwords by POSTing data to
      a backend server asynchronously. After doing so successfully, they can
      update the user’s credentials by calling <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-6">store()</a></code> with the new information. 
      <p>Given a password change form like the following:</p>
<pre>&lt;form action="https://example.com/changePassword" method="POST" id="theForm">
  &lt;input type="hidden" name="username" <a data-link-type="element-attr" href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a>="<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-username">username</a>" value="user">
  &lt;label for="password">New Password&lt;/label>
  &lt;input type="password" id="password" name="password" <a data-link-type="element-attr" href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a>="<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-new-password">new-password</a>">
  &lt;input type="submit">
&lt;/form>
</pre>
      <p>The developer can handle the form submission with something like the following:</p>
<pre>document.querySelector('#theForm').addEventListener("submit", e => {
  if (<a class="idl-code" data-link-type="attribute" href="#dom-navigator-credentials" id="ref-for-dom-navigator-credentials-7">navigator.credentials</a>) {
    e.preventDefault();

    // Construct a new <a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-3">PasswordCredential</a> from the <a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/forms.html#htmlformelement">HTMLFormElement</a>
    // that fired the "submit" event: this will suck up the values of the fields
    // labeled with "username" and "new-password" <a data-link-type="element-attr" href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a>
    // attributes:
    var c = new <a data-link-type="idl" href="#dom-passwordcredential-passwordcredential" id="ref-for-dom-passwordcredential-passwordcredential-2">PasswordCredential</a>(e.target);

    // Fetch the form’s action URL, passing that new credential object in
    // as the fetch’s credentials. If the response indicates success, ask
    // the user agent to ask the user to store the credential for future use:
    var init = { method: "POST", credentials: c };
    fetch(e.target.action, init).then(r => {
      if (/* |r| is a "successful" <a data-link-type="idl" href="https://fetch.spec.whatwg.org/#response">Response</a> */)
        <a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-7">navigator.credentials.store</a>(c);
    });
  }
});
</pre>
     </div>
     <h4 class="heading settled" data-level="1.2.5" id="examples-legacy"><span class="secno">1.2.5. </span><span class="content">Layering on top of a legacy system</span><a class="self-link" href="#examples-legacy"></a></h4>
     <p>The API is designed in such a way as to cleanly sit on top of an existing
    password-based sign-in system’s backend. For instance, the username and
    password parameters can be renamed by adjusting the <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-4">PasswordCredential</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-idname" id="ref-for-dom-passwordcredential-idname-1">idName</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-passwordname" id="ref-for-dom-passwordcredential-passwordname-1">passwordName</a></code> attributes, and additional data can be added to a request by setting the <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-additionaldata" id="ref-for-dom-passwordcredential-additionaldata-1">additionalData</a></code> attribute.</p>
     <div class="example" id="example-19599f2b">
      <a class="self-link" href="#example-19599f2b"></a> MegaCorp Inc. has an existing sign-in system that expects the username
      to be submitted as a parameter named "<code>u</code>" and a the password as a
      parameter named "<code>p</code>". The following code accomplishes this: 
<pre>// Given a <a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-5">PasswordCredential</a> |credential|:
credential.idName = "u";
credential.passwordName = "p";
fetch("https://example.com/loginEndpoint", { credentials: credential, method: "POST" });
</pre>
     </div>
     <div class="example" id="example-803e2616">
      <a class="self-link" href="#example-803e2616"></a> Further, MegaCorp Inc. protects itself against attack by appending a CSRF
      token to the request. The following code accomplishes this: 
<pre>// Given a <a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-6">PasswordCredential</a> |credential|:
credential.<a data-link-type="idl" href="#dom-passwordcredential-additionaldata" id="ref-for-dom-passwordcredential-additionaldata-2">additionalData</a> = new FormData();
credential.<a data-link-type="idl" href="#dom-passwordcredential-additionaldata" id="ref-for-dom-passwordcredential-additionaldata-3">additionalData</a>.append("csrf", "[random token value goes here]");
        
fetch("https://example.com/loginEndpoint", { credentials: credential, method: "POST" });
</pre>
     </div>
     <div class="example" id="example-d8bc2895">
      <a class="self-link" href="#example-d8bc2895"></a> MegaCorp Inc.'s backend servers cannot accept POST requests submitted as <code>multipart/form-data</code>. They need to submit the credential information as <code>application/x-www-form-urlencoded</code> instead. They can accomplish this by
      setting the <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-additionaldata" id="ref-for-dom-passwordcredential-additionaldata-4">additionalData</a></code> attribute to a <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#dom-urlsearchparams">URLSearchParams</a></code> object (which serializes as a urlencoded submission): 
<pre>// Given a <a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-7">PasswordCredential</a> |credential|:
credential.<a data-link-type="idl" href="#dom-passwordcredential-additionaldata" id="ref-for-dom-passwordcredential-additionaldata-5">additionalData</a> = new URLSearchParams();
        
// Note that MegaCorp Inc. doesn’t need to append any data to the
// object. Setting <code>additionalData</code> to an empty <code>URLSearchParams</code> object
// is enough to change the content type of the submission.
        
fetch("https://example.com/loginEndpoint", { credentials: credential, method: "POST" });
</pre>
     </div>
    </section>
   </section>
   <section>
    <h2 class="heading settled" data-level="2" id="terms"><span class="secno">2. </span><span class="content">Key Concepts and Terminology</span><a class="self-link" href="#terms"></a></h2>
    <dl>
     <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="credentials">Credentials</dfn>
     <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="password-credentials">Password Credentials</dfn>
     <dt><dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="federated-credentials">Federated Credentials</dfn>
     <dd>
       Broadly speaking, <strong>credential</strong> is an assertion about an
      entity which enables a trust decision. This specification defines two
      specific types of credentials which are useful for authentication:
      "password" credentials, which consist of a username/password
      pair, and "federated" credentials, which point out to a <a data-link-type="dfn" href="#federated-identity-provider" id="ref-for-federated-identity-provider-4">federated
      identity provider</a> which is trusted to correctly assert a user’s
      authentication. 
      <p class="note" role="note">Note: These two types are, of course, not exhaustive. Future versions of
      this and other documents will likely define other types of credentials.</p>
     <dt> <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" id="credential-store">Credential Store</dfn> 
     <dd>
       A <strong>credential store</strong> is an opaque storage mechanism which
      offers a user agent the ability to: 
      <ol>
       <li data-md="">
        <p>Store, retrieve, and modify <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-1">Credential</a></code> objects.</p>
       <li data-md="">
        <p>To mark an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a> with a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="requires-user-mediation">requires user mediation</dfn> flag.</p>
       <li data-md="">
        <p>To associate an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a> with a <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="protocol-set">protocol set</dfn>.</p>
      </ol>
      <p>The implementation is vendor-specific, and the interface provided is not
      exposed to the web.</p>
      <p class="note" role="note">Note: The types of credentials defined in this document are stored locally
      in a user agent’s credential store, but future versions of this and other
      documents will likely define credential types which are external to the
      user agent.</p>
     <dt> <dfn class="dfn-paneled" data-dfn-type="dfn" data-export="" data-local-lt="IDP|identity provider" data-lt="Federated Identity Provider" id="federated-identity-provider"> Federated Identity Provider </dfn> 
     <dd> A <strong>federated identity provider</strong> is an entity which a
      website trusts to correctly authenticate a user, and which provides an
      API for that purpose. <a href="http://openid.net/developers/specs/">OpenID
      Connect</a> is an example of such a framework, used by a number of
      providers. 
    </dl>
   </section>
   <section>
    <h2 class="heading settled" data-level="3" id="interfaces"><span class="secno">3. </span><span class="content">Interfaces</span><a class="self-link" href="#interfaces"></a></h2>
    <h3 class="heading settled" data-level="3.1" id="interfaces-credential-types"><span class="secno">3.1. </span><span class="content">Credential Types</span><a class="self-link" href="#interfaces-credential-types"></a></h3>
    <p>This document defines a generic and extensible <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-2">Credential</a></code> interface from
  which all <a data-link-type="dfn" href="#credentials" id="ref-for-credentials-3">credentials</a> will inherit, and a slightly less generic <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-1">SiteBoundCredential</a></code>, which defines the specific attributes shared
  by any <a data-link-type="dfn" href="#credentials" id="ref-for-credentials-4">Credential</a> persisted in user agent’s <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-1">credential store</a>.</p>
    <p><code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-8">PasswordCredential</a></code> and <code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-2">FederatedCredential</a></code> both inherit from <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-2">SiteBoundCredential</a></code>, and, as you might expect, are the concrete types
  mapped to <a data-link-type="dfn" href="#password-credentials" id="ref-for-password-credentials-1">password credentials</a> and <a data-link-type="dfn" href="#federated-credentials" id="ref-for-federated-credentials-1">federated credentials</a>,
  respectively.</p>
    <h4 class="heading settled" data-level="3.1.1" id="interfaces-credential-types-credential"><span class="secno">3.1.1. </span><span class="content"><code>Credential</code></span><a class="self-link" href="#interfaces-credential-types-credential"></a></h4>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-credentialdata">CredentialData</dfn> {
  <span class="kt">required</span> <span class="kt">USVString</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="CredentialData" data-dfn-type="dict-member" data-export="" data-type="USVString " id="dom-credentialdata-id">id</dfn>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>] <span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="credential">Credential</dfn> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-credential-id" id="ref-for-dom-credential-id-1">id</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-credential-type" id="ref-for-dom-credential-type-1">type</a>;
};
<a class="n" data-link-type="idl-name" href="#credential" id="ref-for-credential-3">Credential</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="http://www.w3.org/TR/html5/infrastructure.html#transferable">Transferable</a>;
</pre>
    <dl>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="Credential" data-dfn-type="attribute" data-export="" id="dom-credential-id">id</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-USVString">USVString</a>, readonly</span>
     <dd> The credential’s identifier. This might be a GUID, username, or email
      address, for instance. 
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="Credential" data-dfn-type="attribute" data-export="" id="dom-credential-type">type</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, readonly</span>
     <dd>
       The credential’s type. This attribute’s getter returns the value of the
      credential’s <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-1">[[type]]</a></code> slot. 
      <p class="note" role="note">Note: The <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-2">[[type]]</a></code> slot’s value will be the same for all
      credentials implementing a particular interface. Currently, <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-9">PasswordCredential</a></code> objects have a <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-3">[[type]]</a></code> of <code>password</code>, and <code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-3">FederatedCredential</a></code> objects have a <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-4">[[type]]</a></code> of <code>federated</code>.</p>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="Credential" data-dfn-type="attribute" data-export="" id="dom-credential-type-slot">[[type]]</dfn>
     <dd> All <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-4">Credential</a></code> objects have an internal slot named <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-5">[[type]]</a></code>, which unsurprisingly contains a string representing
      the type of the credential. This property is exposed to the web via the <code class="idl"><a data-link-type="idl" href="#dom-credential-type" id="ref-for-dom-credential-type-2">type</a></code> attribute. 
    </dl>
    <p><code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-5">Credential</a></code> objects implement <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/html5/infrastructure.html#transferable">Transferable</a></code>, and MUST support the
  the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/infrastructure.html#structured-clone">structured clone</a> algorithm. Unless otherwise specified, the cloning
  mechanism for all objects which implement <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-6">Credential</a></code> is defined in <a href="#clone-credential">§4.1.3 Clone credential</a>.</p>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-siteboundcredentialdata">SiteBoundCredentialData</dfn> : <a class="n" data-link-type="idl-name" href="#dictdef-credentialdata" id="ref-for-dictdef-credentialdata-1">CredentialData</a> {
  <span class="kt">USVString</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="SiteBoundCredentialData" data-dfn-type="dict-member" data-export="" data-type="USVString " id="dom-siteboundcredentialdata-name">name</dfn>;
  <span class="kt">USVString</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="SiteBoundCredentialData" data-dfn-type="dict-member" data-export="" data-type="USVString " id="dom-siteboundcredentialdata-iconurl">iconURL</dfn>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>] <span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="siteboundcredential">SiteBoundCredential</dfn> : <a class="n" data-link-type="idl-name" href="#credential" id="ref-for-credential-7">Credential</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-siteboundcredential-name" id="ref-for-dom-siteboundcredential-name-1">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-siteboundcredential-iconurl" id="ref-for-dom-siteboundcredential-iconurl-1">iconURL</a>;
};
</pre>
    <h4 class="heading settled" data-level="3.1.2" id="interfaces-credential-types-siteboundcredential"><span class="secno">3.1.2. </span><span class="content"> <code>SiteBoundCredential</code> </span><a class="self-link" href="#interfaces-credential-types-siteboundcredential"></a></h4>
    <dl>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="SiteBoundCredential" data-dfn-type="attribute" data-export="" id="dom-siteboundcredential-name">name</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-USVString">USVString</a>, readonly</span>
     <dd> A name associated with the credential, intended as a human-understandable
      public name. 
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="SiteBoundCredential" data-dfn-type="attribute" data-export="" id="dom-siteboundcredential-iconurl">iconURL</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-USVString">USVString</a>, readonly</span>
     <dd>
       A URL pointing to an image for the credential. This URL MUST be an <a data-link-type="dfn" href="https://w3c.github.io/webappsec-mixed-content/#a-priori-authenticated-url"><i lang="la">a priori</i> authenticated URL</a>. 
      <p class="issue" id="issue-c874d302"><a class="self-link" href="#issue-c874d302"></a> Anne suggests that this might be better modeled
      as an <code>ImageBitmap</code> or <code>blob:</code>. We also need to
      figure out responsiveness. Perhaps <a data-link-type="biblio" href="#biblio-manifest">[MANIFEST]</a>'s format? <a href="https://github.com/w3c/webappsec/issues/247">&lt;https://github.com/w3c/webappsec/issues/247></a></p>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="SiteBoundCredential" data-dfn-type="attribute" data-export="" id="dom-siteboundcredential-origin-slot">[[origin]]</dfn>
     <dd> All <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-3">SiteBoundCredential</a></code> objects have an internal slot named <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-origin-slot" id="ref-for-dom-siteboundcredential-origin-slot-1">[[origin]]</a></code>, which stores the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a> to which the credential is
      bound. This property is not directly exposed to the web. 
    </dl>
    <p>All <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-4">SiteBoundCredential</a></code> objects MUST define an <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="options matching algorithm" data-noexport="" id="options-matching-algorithm">options matching
  algorithm</dfn> which returns <dfn class="dfn-paneled" data-dfn-type="dfn" data-noexport="" id="match"><code>Match</code></dfn> if the object
  matches a <code class="idl"><a data-link-type="idl" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-1">CredentialRequestOptions</a></code> object, and <dfn class="dfn-paneled" data-dfn-type="dfn" data-lt="Does Not Match" data-noexport="" id="does-not-match"><code>Does Not
  Match</code></dfn> otherwise.</p>
    <h4 class="heading settled" data-level="3.1.3" id="interfaces-credential-types-passwordcredential"><span class="secno">3.1.3. </span><span class="content"><code>PasswordCredential</code></span><a class="self-link" href="#interfaces-credential-types-passwordcredential"></a></h4>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-passwordcredentialdata">PasswordCredentialData</dfn> : <a class="n" data-link-type="idl-name" href="#dictdef-siteboundcredentialdata" id="ref-for-dictdef-siteboundcredentialdata-1">SiteBoundCredentialData</a> {
  <span class="kt">required</span> <span class="kt">USVString</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="PasswordCredentialData" data-dfn-type="dict-member" data-export="" data-type="USVString " id="dom-passwordcredentialdata-password">password</dfn>;
};

<span class="kt">typedef</span> (<a class="n" data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#interface-formdata">FormData</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="https://url.spec.whatwg.org/#dom-urlsearchparams">URLSearchParams</a>) <dfn class="nv dfn-paneled idl-code" data-dfn-type="typedef" data-export="" id="typedefdef-credentialbodytype">CredentialBodyType</dfn>;

[<a class="nv idl-code" data-link-type="constructor" href="#dom-passwordcredential-passwordcredential-data" id="ref-for-dom-passwordcredential-passwordcredential-data-1">Constructor</a>(<a class="n" data-link-type="idl-name" href="#dictdef-passwordcredentialdata" id="ref-for-dictdef-passwordcredentialdata-1">PasswordCredentialData</a> <dfn class="nv idl-code" data-dfn-for="PasswordCredential/PasswordCredential(data)" data-dfn-type="argument" data-export="" id="dom-passwordcredential-passwordcredential-data-data">data<a class="self-link" href="#dom-passwordcredential-passwordcredential-data-data"></a></dfn>),
 <a class="nv idl-code" data-link-type="constructor" href="#dom-passwordcredential-passwordcredential" id="ref-for-dom-passwordcredential-passwordcredential-3">Constructor</a>(<a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/forms.html#htmlformelement">HTMLFormElement</a> <dfn class="nv idl-code" data-dfn-for="PasswordCredential/PasswordCredential(form)" data-dfn-type="argument" data-export="" id="dom-passwordcredential-passwordcredential-form-form">form<a class="self-link" href="#dom-passwordcredential-passwordcredential-form-form"></a></dfn>),
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<span class="n">Window</span>,
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="passwordcredential">PasswordCredential</dfn> : <a class="n" data-link-type="idl-name" href="#siteboundcredential" id="ref-for-siteboundcredential-5">SiteBoundCredential</a> {
  <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-passwordcredential-idname" id="ref-for-dom-passwordcredential-idname-2">idName</a>;
  <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-passwordcredential-passwordname" id="ref-for-dom-passwordcredential-passwordname-2">passwordName</a>;

  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#typedefdef-credentialbodytype" id="ref-for-typedefdef-credentialbodytype-1">CredentialBodyType</a>? <a class="nv idl-code" data-link-type="attribute" data-type="CredentialBodyType?" href="#dom-passwordcredential-additionaldata" id="ref-for-dom-passwordcredential-additionaldata-6">additionalData</a>;
};
</pre>
    <dl>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="PasswordCredential" data-dfn-type="attribute" data-export="" id="dom-passwordcredential-idname">idName</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span></p>
     <dd data-md="">
      <p>This attribute represents the name which will be used for the ID field
  when submitting the <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-10">PasswordCredential</a></code> to a remote endpoint via <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-global-fetch">fetch()</a></code>. It defaults to "<code>username</code>", but can be overridden by a
  developer to match whatever the backend service expects.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="PasswordCredential" data-dfn-type="attribute" data-export="" id="dom-passwordcredential-passwordname">passwordName</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-USVString">USVString</a></span></p>
     <dd data-md="">
      <p>This attribute represents the name which will be used for the ID field
  when submitting the <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-11">PasswordCredential</a></code> to a remote endpoint via <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-global-fetch">fetch()</a></code>. It defaults to "<code>password</code>", but can be overridden by a
  developer to match whatever the backend service expects.</p>
     <dt data-md="">
      <p><dfn class="dfn-paneled idl-code" data-dfn-for="PasswordCredential" data-dfn-type="attribute" data-export="" id="dom-passwordcredential-additionaldata">additionalData</dfn>, <span> of type <a data-link-type="idl-name" href="#typedefdef-credentialbodytype" id="ref-for-typedefdef-credentialbodytype-2">CredentialBodyType</a>, nullable</span></p>
     <dd data-md="">
      <p>If the developer wishes to specify additional data to insert into the
  request body when submitting the credential information to a remote
  endpoint, they can do so by assigning a <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#interface-formdata">FormData</a></code> or <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#dom-urlsearchparams">URLSearchParams</a></code> object to this attribute. The credential information
  will be mixed into the object to produce the body. The value is <code>null</code> unless otherwise specified.</p>
     <dt data-md="">
      <p><code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-6">[[type]]</a></code></p>
     <dd data-md="">
      <p>All <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-12">PasswordCredential</a></code> objects have their <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-7">[[type]]</a></code> slot’s
  value set to the string 
  "<dfn class="dfn-paneled idl-code" data-dfn-for="PasswordCredential" data-dfn-type="const" data-export="" id="dom-passwordcredential-password"><code>password</code></dfn>".</p>
    </dl>
    <p>All <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-13">PasswordCredential</a></code> objects have an internal slot named <dfn class="dfn-paneled idl-code" data-dfn-for="PasswordCredential" data-dfn-type="attribute" data-export="" id="dom-passwordcredential-password-slot">[[password]]</dfn> which stores the
  credential’s password. This property is not directly exposed to the web, but
  used to construct the request body during <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-global-fetch">fetch()</a></code>.</p>
    <h5 class="heading settled algorithm" data-algorithm="PasswordCredential(HTMLFormElement form) Constructor" data-level="3.1.3.1" id="passwordcredential-form-constructor"><span class="secno">3.1.3.1. </span><span class="content"> <code>PasswordCredential(HTMLFormElement form)</code> Constructor </span><a class="self-link" href="#passwordcredential-form-constructor"></a></h5>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="PasswordCredential" data-dfn-type="constructor" data-export="" id="dom-passwordcredential-passwordcredential"><code>PasswordCredential(form)</code></dfn> constructor, when invoked with an <code class="idl"><a data-link-type="idl" href="https://html.spec.whatwg.org/multipage/forms.html#htmlformelement">HTMLFormElement</a></code> (<var>form</var>), must run these
  steps.</p>
    <p class="note" role="note">Note: <a href="#examples-post-signin">§1.2.3 Post-sign-in Confirmation</a> and <a href="#examples-change-password">§1.2.4 Change Password</a> provide
  examples of the intended usage.</p>
    <ol>
     <li data-md="">
      <p>Let <var>data</var> be a new <code class="idl"><a data-link-type="idl" href="#dictdef-passwordcredentialdata" id="ref-for-dictdef-passwordcredentialdata-2">PasswordCredentialData</a></code> dictionary.</p>
     <li data-md="">
      <p>Let <var>formData</var> be the result of executing the <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#interface-formdata">FormData</a></code> constructor
  on <var>form</var>.</p>
     <li data-md="">
      <p>Let <var>elements</var> be a list of all the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/forms.html#category-submit">submittable elements</a> whose <a data-link-type="dfn" href="http://www.w3.org/TR/html5/forms.html#form-owner">form owner</a> is <var>form</var>, in <a data-link-type="dfn" href="http://www.w3.org/TR/html5/infrastructure.html#tree-order">tree order</a>.</p>
     <li data-md="">
      <p>Let <var>idName</var> and <var>passwordName</var> be empty strings.</p>
     <li data-md="">
      <p>Let <var>newPasswordObserved</var> be <code>false</code>.</p>
     <li data-md="">
      <p>For each <var>field</var> in <var>elements</var>, run the following steps:</p>
      <ol>
       <li data-md="">
        <p>If <var>field</var> does not have an <code><a data-link-type="element-sub" href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a></code> attribute, then
  skip to the next <var>field</var>.</p>
       <li data-md="">
        <p>Let <var>name</var> be the value of <var>field</var>’s <code><a data-link-type="element-sub" href="http://www.w3.org/TR/html5/forms.html#attr-fe-name">name</a></code> attribute.</p>
       <li data-md="">
        <p>If <var>formData</var>’s <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-formdata-has">has()</a></code> method returns <code>false</code> when executed
  on <var>name</var>, then skip to the next <var>field</var>.</p>
       <li data-md="">
        <p>If <var>field</var>’s <code><a data-link-type="element-sub" href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a></code> attribute’s value contains one or
  more <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/forms.html#autofill-detail-tokens">autofill detail tokens</a> (<var>tokens</var>), then:</p>
        <ol>
         <li data-md="">
          <p>For each <var>token</var> in <var>tokens</var>:</p>
          <ol>
           <li data-md="">
            <p>If <var>token</var> is an <a data-link-type="dfn" href="http://www.w3.org/TR/html5/infrastructure.html#ascii-case-insensitive">ASCII case-insensitive</a> match for one
  of the following strings, run the associated steps:</p>
            <dl>
             <dt data-md="">
              <p>"<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-new-password"><code>new-password</code></a>"</p>
             <dd data-md="">
              <p>Set <var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredentialdata-password" id="ref-for-dom-passwordcredentialdata-password-1">password</a></code> member’s
  value to the result of executing <var>formData</var>’s <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-formdata-get">get()</a></code> method on <var>name</var>, <var>passwordName</var> to <var>name</var>, and <var>newPasswordObserved</var> to <code>true</code>.</p>
             <dt data-md="">
              <p>"<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-current-password"><code>current-password</code></a>"</p>
             <dd data-md="">
              <p>If <var>newPasswordObserved</var> is <code>false</code>,
  set <var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredentialdata-password" id="ref-for-dom-passwordcredentialdata-password-2">password</a></code> member’s
  value to the result of executing <var>formData</var>’s <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-formdata-get">get()</a></code> method on <var>name</var>, and <var>passwordName</var> to <var>name</var>.</p>
              <p class="note" role="note">Note: By checking that <var>newPasswordObserved</var> is <code>false</code>, <code>new-password</code> fields take precedence over <code>current-password</code> fields.</p>
             <dt data-md="">
              <p>"<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-photo"><code>photo</code></a>"</p>
             <dd data-md="">
              <p>Set <var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredentialdata-iconurl" id="ref-for-dom-siteboundcredentialdata-iconurl-1">iconURL</a></code> member’s
  value to the result of executing <var>formData</var>’s <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-formdata-get">get()</a></code> method on <var>name</var>.</p>
             <dt data-md="">
              <p>"<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-name"><code>name</code></a>"</p>
             <dt data-md="">
              <p>"<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-nickname"><code>nickname</code></a>"</p>
             <dd data-md="">
              <p>Set <var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredentialdata-name" id="ref-for-dom-siteboundcredentialdata-name-1">name</a></code> member’s
  value to the result of executing <var>formData</var>’s <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-formdata-get">get()</a></code> method on <var>name</var>.</p>
             <dt data-md="">
              <p>"<a data-link-type="attr-value" href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-username"><code>username</code></a>"</p>
             <dd data-md="">
              <p>Set <var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-credentialdata-id" id="ref-for-dom-credentialdata-id-2">id</a></code> member’s value to the
  result of executing <var>formData</var>’s <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#dom-formdata-get">get()</a></code> method
  on <var>name</var>, and <var>idName</var> to <var>name</var>.</p>
            </dl>
          </ol>
        </ol>
      </ol>
     <li data-md="">
      <p>Let <var>c</var> be the result of executing the <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-passwordcredential-data" id="ref-for-dom-passwordcredential-passwordcredential-data-2">PasswordCredential(data)</a></code> constructor on <var>data</var>. Rethrow any exception generated.</p>
     <li data-md="">
      <p>Set <var>c</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-idname" id="ref-for-dom-passwordcredential-idname-3">idName</a></code> attribute to <var>idName</var>.</p>
     <li data-md="">
      <p>Set <var>c</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-passwordname" id="ref-for-dom-passwordcredential-passwordname-3">passwordName</a></code> attribute to <var>passwordName</var>.</p>
     <li data-md="">
      <p>If <var>form</var>’s <a data-link-type="dfn" href="http://www.w3.org/TR/html5/forms.html#concept-fs-enctype">enctype</a> is "<code>multipart/form-data</code>",
  then:</p>
      <ol>
       <li data-md="">
        <p>Set <var>c</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-additionaldata" id="ref-for-dom-passwordcredential-additionaldata-7">additionalData</a></code> attribute
  to <var>formData</var>.</p>
      </ol>
      <p>Otherwise:</p>
      <ol>
       <li data-md="">
        <p>Let <var>params</var> be a new <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#dom-urlsearchparams">URLSearchParams</a></code> object.</p>
       <li data-md="">
        <p>For each <var>entry</var> in <var>formData</var>’s <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry">entries</a>:</p>
        <ol>
         <li data-md="">
          <p>If <var>entry</var>’s <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry-type">type</a> is "file", skip to the
  next <var>entry</var>.</p>
         <li data-md="">
          <p>Execute <var>params</var> <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#dom-urlsearchparams-append">append()</a></code> method on <var>entry</var>’s <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry-name">name</a> and <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry-value">value</a>.</p>
        </ol>
       <li data-md="">
        <p>Set <var>c</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-additionaldata" id="ref-for-dom-passwordcredential-additionaldata-8">additionalData</a></code> attribute
  to <var>params</var>.</p>
      </ol>
     <li data-md="">
      <p>Return <var>c</var>.</p>
    </ol>
    <h5 class="heading settled algorithm" data-algorithm="PasswordCredential(PasswordCredentialData data) Constructor" data-level="3.1.3.2" id="passwordcredential-data-constructor"><span class="secno">3.1.3.2. </span><span class="content"> <code>PasswordCredential(PasswordCredentialData data)</code> Constructor </span><a class="self-link" href="#passwordcredential-data-constructor"></a></h5>
    <p>The <dfn class="dfn-paneled idl-code" data-dfn-for="PasswordCredential" data-dfn-type="constructor" data-export="" id="dom-passwordcredential-passwordcredential-data"><code>PasswordCredential(data)</code></dfn> constructor, when invoked with a <code class="idl"><a data-link-type="idl" href="#dictdef-passwordcredentialdata" id="ref-for-dictdef-passwordcredentialdata-3">PasswordCredentialData</a></code> (<var>data</var>), must run
  these steps:</p>
    <ol>
     <li data-md="">
      <p>Let <var>c</var> be a new <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-14">PasswordCredential</a></code> object.</p>
     <li data-md="">
      <p>If any of the following are the empty string, <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-throw">throw</a> a <code>TypeError</code> exception:</p>
      <ul>
       <li data-md="">
        <p><var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-credentialdata-id" id="ref-for-dom-credentialdata-id-3">id</a></code> member’s value</p>
       <li data-md="">
        <p><var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredentialdata-password" id="ref-for-dom-passwordcredentialdata-password-3">password</a></code> member’s value</p>
      </ul>
     <li data-md="">
      <p>Set <var>c</var>’s properties as follows:</p>
      <dl>
       <dt data-md="">
        <p><code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-8">[[type]]</a></code> slot</p>
       <dd data-md="">
        <p>"<code>password</code>"</p>
       <dt data-md="">
        <p><code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-password-slot" id="ref-for-dom-passwordcredential-password-slot-1">[[password]]</a></code> slot</p>
       <dd data-md="">
        <p><var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredentialdata-password" id="ref-for-dom-passwordcredentialdata-password-4">password</a></code> member’s value</p>
       <dt data-md="">
        <p><code class="idl"><a data-link-type="idl" href="#dom-credential-id" id="ref-for-dom-credential-id-2">id</a></code></p>
       <dd data-md="">
        <p><var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-credentialdata-id" id="ref-for-dom-credentialdata-id-4">id</a></code> member’s value</p>
       <dt data-md="">
        <p><code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-idname" id="ref-for-dom-passwordcredential-idname-4">idName</a></code></p>
       <dd data-md="">
        <p>"<code>username</code>"</p>
       <dt data-md="">
        <p><code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-iconurl" id="ref-for-dom-siteboundcredential-iconurl-2">iconURL</a></code></p>
       <dd data-md="">
        <p><var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredentialdata-iconurl" id="ref-for-dom-siteboundcredentialdata-iconurl-2">iconURL</a></code> member’s value</p>
       <dt data-md="">
        <p><code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-name" id="ref-for-dom-siteboundcredential-name-2">name</a></code></p>
       <dd data-md="">
        <p><var>data</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredentialdata-name" id="ref-for-dom-siteboundcredentialdata-name-2">name</a></code> member’s value</p>
       <dt data-md="">
        <p><code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-passwordname" id="ref-for-dom-passwordcredential-passwordname-4">passwordName</a></code></p>
       <dd data-md="">
        <p>"<code>password</code>"</p>
      </dl>
     <li data-md="">
      <p>Return <var>c</var>.</p>
    </ol>
    <h5 class="heading settled" data-level="3.1.3.3" id="passwordcredential-matching"><span class="secno">3.1.3.3. </span><span class="content"> Matching Algorithm </span><a class="self-link" href="#passwordcredential-matching"></a></h5>
    <p><code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-15">PasswordCredential</a></code> objects' <a data-link-type="dfn" href="#options-matching-algorithm" id="ref-for-options-matching-algorithm-1">options matching algorithm</a> always
  returns <a data-link-type="dfn" href="#match" id="ref-for-match-1"><code>Match</code></a>.</p>
    <h4 class="heading settled" data-level="3.1.4" id="interfaces-credential-types-federatedcredential"><span class="secno">3.1.4. </span><span class="content"><code>FederatedCredential</code></span><a class="self-link" href="#interfaces-credential-types-federatedcredential"></a></h4>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-federatedcredentialdata">FederatedCredentialData</dfn> : <a class="n" data-link-type="idl-name" href="#dictdef-siteboundcredentialdata" id="ref-for-dictdef-siteboundcredentialdata-2">SiteBoundCredentialData</a> {
  <span class="kt">required</span> <span class="kt">USVString</span> <dfn class="nv dfn-paneled idl-code" data-dfn-for="FederatedCredentialData" data-dfn-type="dict-member" data-export="" data-type="USVString " id="dom-federatedcredentialdata-provider">provider</dfn>;
  <span class="kt">DOMString</span> <dfn class="nv idl-code" data-dfn-for="FederatedCredentialData" data-dfn-type="dict-member" data-export="" data-type="DOMString " id="dom-federatedcredentialdata-protocol">protocol<a class="self-link" href="#dom-federatedcredentialdata-protocol"></a></dfn>;
};

[<dfn class="nv idl-code" data-dfn-for="FederatedCredential" data-dfn-type="constructor" data-export="" data-lt="FederatedCredential(data)" id="dom-federatedcredential-federatedcredential">Constructor<a class="self-link" href="#dom-federatedcredential-federatedcredential"></a></dfn>(<a class="n" data-link-type="idl-name" href="#dictdef-federatedcredentialdata" id="ref-for-dictdef-federatedcredentialdata-1">FederatedCredentialData</a> <dfn class="nv idl-code" data-dfn-for="FederatedCredential/FederatedCredential(data)" data-dfn-type="argument" data-export="" id="dom-federatedcredential-federatedcredential-data-data">data<a class="self-link" href="#dom-federatedcredential-federatedcredential-data-data"></a></dfn>), <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<span class="n">Window</span>, <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>]
<span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="federatedcredential">FederatedCredential</dfn> : <a class="n" data-link-type="idl-name" href="#siteboundcredential" id="ref-for-siteboundcredential-6">SiteBoundCredential</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-federatedcredential-provider" id="ref-for-dom-federatedcredential-provider-2">provider</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString?" href="#dom-federatedcredential-protocol" id="ref-for-dom-federatedcredential-protocol-1">protocol</a>;
};
</pre>
    <dl>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="FederatedCredential" data-dfn-type="attribute" data-export="" id="dom-federatedcredential-provider">provider</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-USVString">USVString</a>, readonly</span>
     <dd> The credential’s <a data-link-type="dfn" href="#federated-identity-provider" id="ref-for-federated-identity-provider-5">federated identity provider</a>. For details regarding
      valid formats, see <a href="#identifying-federations">§3.2.2 Identifying providers</a>. 
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="FederatedCredential" data-dfn-type="attribute" data-export="" id="dom-federatedcredential-protocol">protocol</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>, readonly, nullable</span>
     <dd> The credential’s <a data-link-type="dfn" href="#federated-identity-provider" id="ref-for-federated-identity-provider-6">federated identity provider</a>’s protocol (e.g.
      "openidconnect"). If this value is <code>null</code>, then the protocol
      can be inferred from the <code class="idl"><a data-link-type="idl" href="#dom-federatedcredential-provider" id="ref-for-dom-federatedcredential-provider-3">provider</a></code>. 
     <dt><code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-9">[[type]]</a></code>
     <dd> All <code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-4">FederatedCredential</a></code> objects have their <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-10">[[type]]</a></code> slot’s value set to the string "<dfn class="dfn-paneled idl-code" data-dfn-for="FederatedCredential" data-dfn-type="const" data-export="" id="dom-federatedcredential-federated"><code>federated</code></dfn>". 
    </dl>
    <h5 class="heading settled" data-level="3.1.4.1" id="federatedcredential-matching"><span class="secno">3.1.4.1. </span><span class="content"> Matching Algorithm </span><a class="self-link" href="#federatedcredential-matching"></a></h5>
    <p><code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-5">FederatedCredential</a></code> objects' <a data-link-type="dfn" href="#options-matching-algorithm" id="ref-for-options-matching-algorithm-2">options matching algorithm</a> is as
  follows. Given a <code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-6">FederatedCredential</a></code> (<var>credential</var>) and a <code class="idl"><a data-link-type="idl" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-2">CredentialRequestOptions</a></code> (<var>options</var>):</p>
    <ol>
     <li> Let <var>federated</var> be the value of <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-credentialrequestoptions-federated" id="ref-for-dom-credentialrequestoptions-federated-2">federated</a></code> property. 
     <li>
       If the <code class="idl"><a data-link-type="idl" href="#dom-federatedcredentialrequestoptions-providers" id="ref-for-dom-federatedcredentialrequestoptions-providers-2">providers</a></code> property is
      present in <var>federated</var>: 
      <ol>
       <li>
         For each <var>provider</var> in <var>federated</var>’ <code>providers</code> list: 
        <ol>
         <li> Return <a data-link-type="dfn" href="#match" id="ref-for-match-2"><code>Matches</code></a> if <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-federatedcredential-provider" id="ref-for-dom-federatedcredential-provider-4">provider</a></code> is a case-sensitive match for <var>provider</var>. 
        </ol>
      </ol>
     <li>
       If the <code class="idl"><a data-link-type="idl" href="#dom-federatedcredentialrequestoptions-protocols" id="ref-for-dom-federatedcredentialrequestoptions-protocols-1">protocols</a></code> property is
      present in <var>federated</var>: 
      <ol>
       <li>
         For each <var>protocol</var> in <var>federated</var>’ <code class="idl"><a data-link-type="idl" href="#dom-federatedcredentialrequestoptions-protocols" id="ref-for-dom-federatedcredentialrequestoptions-protocols-2">protocols</a></code> list: 
        <ol>
         <li> Return <a data-link-type="dfn" href="#match" id="ref-for-match-3"><code>Matches</code></a> if <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-federatedcredential-protocol" id="ref-for-dom-federatedcredential-protocol-2">protocol</a></code> is a case-insensitive match for <var>protocol</var>. 
        </ol>
      </ol>
     <li> Return <a data-link-type="dfn" href="#does-not-match" id="ref-for-does-not-match-1"><code>Does Not Match</code></a>. 
    </ol>
    <h3 class="heading settled" data-level="3.2" id="interfaces-credential-manager"><span class="secno">3.2. </span><span class="content">Credential Manager</span><a class="self-link" href="#interfaces-credential-manager"></a></h3>
    <p>The credential manager hangs off of the <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/html5/webappapis.html#navigator">Navigator</a></code> object, and exposes
  methods to request credentials, and to notify the user agent when interesting
  events occur: successful sign in and sign out.</p>
<pre class="idl highlight def"><span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="http://www.w3.org/TR/html5/webappapis.html#navigator">Navigator</a> {
  [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>] <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#credentialscontainer" id="ref-for-credentialscontainer-1">CredentialsContainer</a> <dfn class="nv dfn-paneled idl-code" data-dfn-for="Navigator" data-dfn-type="attribute" data-export="" data-readonly="" data-type="CredentialsContainer" id="dom-navigator-credentials">credentials</dfn>;
};
</pre>
<pre class="idl highlight def">[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>] <span class="kt">interface</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="interface" data-export="" id="credentialscontainer">CredentialsContainer</dfn> {
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#credential" id="ref-for-credential-8">Credential</a>?> <a class="nv idl-code" data-link-type="method" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-4">get</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-3">CredentialRequestOptions</a> <a class="nv idl-code" data-link-type="argument" href="#dom-credentialscontainer-get-options-options" id="ref-for-dom-credentialscontainer-get-options-options-1">options</a>);
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#credential" id="ref-for-credential-9">Credential</a>> <a class="nv idl-code" data-link-type="method" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-8">store</a>(<a class="n" data-link-type="idl-name" href="#credential" id="ref-for-credential-10">Credential</a> <a class="nv idl-code" data-link-type="argument" href="#dom-credentialscontainer-store-credential-credential" id="ref-for-dom-credentialscontainer-store-credential-credential-1">credential</a>);
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-credentialscontainer-requireusermediation" id="ref-for-dom-credentialscontainer-requireusermediation-1">requireUserMediation</a>();
};
</pre>
    <dl>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="CredentialsContainer" data-dfn-type="method" data-export="" data-lt="get(options)|get()" id="dom-credentialscontainer-get">get()</dfn>
     <dd>
       Request a credential from the credential manager. 
      <p>The <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get-options-options" id="ref-for-dom-credentialscontainer-get-options-options-2">options</a></code> argument contains an object
      filled with type-specific sets of parameters which will be used to select
      a particular <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-11">Credential</a></code> to return. This process is described in each <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-12">Credential</a></code> type’s <a data-link-type="dfn" href="#options-matching-algorithm" id="ref-for-options-matching-algorithm-3">options matching algorithm</a>.</p>
      <p>When <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-5">get()</a></code> is called, the user agent MUST execute the
      algorithm defined in <a href="#request-credential">§4.1.1 Request a Credential</a> on <var>types</var> and <var>options</var>.</p>
      <p class="note" role="note">Note: If and when we need to support returning more than a single
      credential in response to a single call, we will likely introduce a <code>getAll()</code> method which would return <code>Promise&lt;sequence&lt;Credential>></code>.</p>
      <table class="argumentdef data">
       <caption>Arguments for the <a class="idl-code" data-link-type="method" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-6">CredentialsContainer.get(options)</a> method.</caption>
       <thead>
        <tr>
         <th>Parameter 
         <th>Type 
         <th>Nullable 
         <th>Optional 
         <th>Description 
       <tbody>
        <tr>
         <td><dfn class="dfn-paneled idl-code" data-dfn-for="CredentialsContainer/get(options)" data-dfn-type="argument" data-export="" id="dom-credentialscontainer-get-options-options">options</dfn> 
         <td> CredentialRequestOptions 
         <td> <span class="no">✘</span>
         <td> <span class="yes">✔</span>
         <td>The set of properties governing the scope of the request. 
      </table>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="CredentialsContainer" data-dfn-type="method" data-export="" data-lt="store(credential)" id="dom-credentialscontainer-store">store()</dfn>
     <dd>
       Ask the credential manager to store a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-13">Credential</a></code> for the user. Authors
      could call this method after a user successfully signs in, or after a
      successful password change operation. 
      <p>When <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-9">store()</a></code> is called, the user agent MUST execute the algorithm
      defined in <a href="#store-credential">§4.1.2 Store a Credential</a> with <var>credential</var> as an
      argument.</p>
      <table class="argumentdef data">
       <caption>Arguments for the <a class="idl-code" data-link-type="method" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-10">CredentialsContainer.store(credential)</a> method.</caption>
       <thead>
        <tr>
         <th>Parameter 
         <th>Type 
         <th>Nullable 
         <th>Optional 
         <th>Description 
       <tbody>
        <tr>
         <td><dfn class="dfn-paneled idl-code" data-dfn-for="CredentialsContainer/store(credential)" data-dfn-type="argument" data-export="" id="dom-credentialscontainer-store-credential-credential">credential</dfn> 
         <td> Credential 
         <td> <span class="no">✘</span>
         <td> <span class="no">✘</span>
         <td>The credential to be stored. 
      </table>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="CredentialsContainer" data-dfn-type="method" data-export="" id="dom-credentialscontainer-requireusermediation">requireUserMediation()</dfn>
     <dd>
       Ask the credential manager to require user mediation before returning
      credentials for the origin in which the method is called. This might be
      called after a user signs out of a website, for instance, in order to
      ensure that she isn’t automatically signed back in next time she visits. 
      <p>When <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-requireusermediation" id="ref-for-dom-credentialscontainer-requireusermediation-2">requireUserMediation()</a></code> is called, the user agent MUST execute the
      algorithm defined in <a href="#require-user-mediation-for-origin">§4.3.1 Require user mediation for origin</a> with the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a> of the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#incumbent-settings-object">incumbent settings object</a> in which this method
      is called.</p>
    </dl>
    <h4 class="heading settled" data-level="3.2.1" id="interfaces-request-options"><span class="secno">3.2.1. </span><span class="content"> <code>get()</code> Parameters </span><a class="self-link" href="#interfaces-request-options"></a></h4>
    <p>In order to obtain the desired <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-14">Credential</a></code> via <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-7">get()</a></code>, the caller specifies a few parameters in a <code class="idl"><a data-link-type="idl" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-4">CredentialRequestOptions</a></code> object.</p>
    <p class="note" role="note">Note: The <code class="idl"><a data-link-type="idl" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-5">CredentialRequestOptions</a></code> dictionary is an extension point. If and
  when new types of credentials are introduced that require options, their
  dictionary types will be added to the dictionary so they can be passed into the
  request. See <a href="#implementation-extension">§8.2 Extension Points</a>.</p>
    <h5 class="heading settled" data-level="3.2.1.1" id="interfaces-credentialrequestoptions"><span class="secno">3.2.1.1. </span><span class="content"> <code>CredentialRequestOptions</code> dictionary </span><a class="self-link" href="#interfaces-credentialrequestoptions"></a></h5>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-credentialrequestoptions">CredentialRequestOptions</dfn> {
  <span class="kt">boolean</span> <a class="nv idl-code" data-default="false" data-link-type="dict-member" data-type="boolean " href="#dom-credentialrequestoptions-password" id="ref-for-dom-credentialrequestoptions-password-3">password</a> = <span class="kt">false</span>;
  <a class="n" data-link-type="idl-name" href="#dictdef-federatedcredentialrequestoptions" id="ref-for-dictdef-federatedcredentialrequestoptions-1">FederatedCredentialRequestOptions</a> <a class="nv idl-code" data-link-type="dict-member" data-type="FederatedCredentialRequestOptions " href="#dom-credentialrequestoptions-federated" id="ref-for-dom-credentialrequestoptions-federated-3">federated</a>;

  <span class="kt">boolean</span> <a class="nv idl-code" data-default="false" data-link-type="dict-member" data-type="boolean " href="#dom-credentialrequestoptions-unmediated" id="ref-for-dom-credentialrequestoptions-unmediated-1">unmediated</a> = <span class="kt">false</span>;
};
</pre>
    <dl>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="CredentialRequestOptions" data-dfn-type="dict-member" data-export="" id="dom-credentialrequestoptions-password">password</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-boolean">boolean</a>, defaulting to <code>false</code></span>
     <dd> If set, the user agent will request <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-16">PasswordCredential</a></code> objects, as
      outlined in <a href="#request-credential">§4.1.1 Request a Credential</a>. 
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="CredentialRequestOptions" data-dfn-type="dict-member" data-export="" id="dom-credentialrequestoptions-federated">federated</dfn>, <span> of type <a data-link-type="idl-name" href="#dictdef-federatedcredentialrequestoptions" id="ref-for-dictdef-federatedcredentialrequestoptions-2">FederatedCredentialRequestOptions</a></span>
     <dd> If set, the user agent will request <code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-7">FederatedCredential</a></code> objects, as
      outlined in <a href="#request-credential">§4.1.1 Request a Credential</a>. 
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="CredentialRequestOptions" data-dfn-type="dict-member" data-export="" id="dom-credentialrequestoptions-unmediated">unmediated</dfn>, <span> of type <a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-boolean">boolean</a>, defaulting to <code>false</code></span>
     <dd>
       If <code>true</code>, the user agent will only attempt to provide
      a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-15">Credential</a></code> without user interaction. It MUST NOT present the user
      with any visible prompt to grant access to a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-16">Credential</a></code> or to select
      a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-17">Credential</a></code>: if the user has opted-into always giving a particular
      site access to a particular credential, it will be provided. If not, the
      promise will resolve with <code>undefined</code>. 
      <p>If <code>false</code>, the user agent MAY ask the user to grant access to
      or select a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-18">Credential</a></code>. See <a href="#user-mediated-selection">§5.3 Credential Selection</a> for
      guidelines. If the user has opted-into always giving a particular site
      access to a particular credential, it will be provided without user
      interaction until the opt-in is revoked, for example, via <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-requireusermediation" id="ref-for-dom-credentialscontainer-requireusermediation-3">requireUserMediation()</a></code>.</p>
      <p>For processing details, see the algorithm defined in <a href="#request-credential">§4.1.1 Request a Credential</a>.</p>
    </dl>
    <h5 class="heading settled" data-level="3.2.1.2" id="interfaces-federatedcredentialrequestoptions"><span class="secno">3.2.1.2. </span><span class="content"> <code>FederatedCredentialRequestOptions</code> dictionary </span><a class="self-link" href="#interfaces-federatedcredentialrequestoptions"></a></h5>
<pre class="idl highlight def"><span class="kt">dictionary</span> <dfn class="nv dfn-paneled idl-code" data-dfn-type="dictionary" data-export="" id="dictdef-federatedcredentialrequestoptions">FederatedCredentialRequestOptions</dfn> {
  <span class="kt">sequence</span>&lt;<span class="kt">USVString</span>> <a class="nv idl-code" data-link-type="dict-member" data-type="sequence<USVString> " href="#dom-federatedcredentialrequestoptions-providers" id="ref-for-dom-federatedcredentialrequestoptions-providers-3">providers</a>;
  <span class="kt">sequence</span>&lt;<span class="kt">DOMString</span>> <a class="nv idl-code" data-link-type="dict-member" data-type="sequence<DOMString> " href="#dom-federatedcredentialrequestoptions-protocols" id="ref-for-dom-federatedcredentialrequestoptions-protocols-3">protocols</a>;
};
</pre>
    <dl>
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="FederatedCredentialRequestOptions" data-dfn-type="dict-member" data-export="" id="dom-federatedcredentialrequestoptions-providers">providers</dfn>, <span> of type sequence&lt;<a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-USVString">USVString</a>></span>
     <dd> An array of federation identifiers. For details regarding valid formats
      see <a href="#identifying-federations">§3.2.2 Identifying providers</a>. 
     <dt><dfn class="dfn-paneled idl-code" data-dfn-for="FederatedCredentialRequestOptions" data-dfn-type="dict-member" data-export="" id="dom-federatedcredentialrequestoptions-protocols">protocols</dfn>, <span> of type sequence&lt;<a data-link-type="idl-name" href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>></span>
     <dd> A sequence of protocol identifiers. 
    </dl>
    <div class="example" id="example-7eb6c193">
     <a class="self-link" href="#example-7eb6c193"></a> Suppose <code>https://example.com/</code> only supports federated sign-in
    via <code>https://identity.example.com/</code>. It could request credentials
    via the following call: 
<pre>navigator.<a class="idl-code" data-link-type="attribute" href="#dom-navigator-credentials" id="ref-for-dom-navigator-credentials-8">credentials</a>.<a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-8">get</a>({
  "<a class="idl-code" data-link-type="dict-member" href="#dom-credentialrequestoptions-federated" id="ref-for-dom-credentialrequestoptions-federated-4">federated</a>": {
    "<a data-link-type="idl" href="#dom-federatedcredentialrequestoptions-providers" id="ref-for-dom-federatedcredentialrequestoptions-providers-4">providers</a>": [ "https://identity.example.com/" ]
  }
}).then(function (credential) {
  // ...
});
</pre>
     <p>If it wanted to ensure that the user agent didn’t bother the user with
    questions, it could ask only for unmediated credentials (and, therefore,
    to receive <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-19">Credential</a></code>s if and only if the user had chosen to
    automatically sign into the origin):</p>
<pre>navigator.<a class="idl-code" data-link-type="attribute" href="#dom-navigator-credentials" id="ref-for-dom-navigator-credentials-9">credentials</a>.<a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-9">get</a>(
  "<a class="idl-code" data-link-type="dict-member" href="#dom-credentialrequestoptions-federated" id="ref-for-dom-credentialrequestoptions-federated-5">federated</a>": {
    "<a data-link-type="idl" href="#dom-federatedcredentialrequestoptions-providers" id="ref-for-dom-federatedcredentialrequestoptions-providers-5">providers</a>": [ "https://identity.example.com/" ]
  },
  "<a data-link-type="idl" href="#dom-credentialrequestoptions-unmediated" id="ref-for-dom-credentialrequestoptions-unmediated-2">unmediated</a>": true
).then(function (credential) {
  // ...
});
</pre>
    </div>
    <h4 class="heading settled" data-level="3.2.2" id="identifying-federations"><span class="secno">3.2.2. </span><span class="content">Identifying providers</span><a class="self-link" href="#identifying-federations"></a></h4>
    <p>Every site should use the same identifier when referring to a specific <a data-link-type="dfn" href="#federated-identity-provider" id="ref-for-federated-identity-provider-7">federated identity provider</a>. For example, <a href="https://developers.facebook.com/docs/facebook-login/v2.0">Facebook Login</a> shouldn’t be "Facebook" and "Facebook Login" and "FB" and "FBL" and
  "Facebook.com" and so on. It should have a canonical identifier which everyone
  can make use of, as consistent identification makes it possible for user
  agents to be helpful.</p>
    <p>For consistency, federations passed into the APIs defined in this document
  (e.g. <code class="idl"><a data-link-type="idl" href="#dictdef-federatedcredentialrequestoptions" id="ref-for-dictdef-federatedcredentialrequestoptions-3">FederatedCredentialRequestOptions</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-federatedcredentialrequestoptions-providers" id="ref-for-dom-federatedcredentialrequestoptions-providers-6">providers</a></code> array, or <code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-8">FederatedCredential</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-federatedcredential-provider" id="ref-for-dom-federatedcredential-provider-5">provider</a></code> property)
  MUST be identified by the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#ascii-serialisation-of-an-origin">ASCII serialization</a> of the origin the
  provider uses for sign in. That is, Facebook would be represented by <code>https://www.facebook.com</code> and Google by <code>https://accounts.google.com</code>.</p>
    <p>The ASCII serialization of an origin does <em>not</em> include a trailing
  U+002F SOLIDUS ("<code>/</code>"), but user agents SHOULD accept them
  silently: <code>https://accounts.google.com/</code> is clearly intended to
  be the same as <code>https://accounts.google.com</code>.</p>
   </section>
   <section>
    <h3 class="heading settled" data-level="3.3" id="fetch-integration"><span class="secno">3.3. </span><span class="content">Integration with Fetch</span><a class="self-link" href="#fetch-integration"></a></h3>
    <p>In order to actually authenticate a user, <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-17">PasswordCredential</a></code> objects may
  be submitted to a server for evaluation. To prevent the risk that sensitive
  credential information will be exposed directly to a page’s JavaScript (see <a href="#security-cross-origin-leakage">§6.1 Cross-origin Credential Leakage</a>), we hide the credential information in
  non-web-exposed slots on the <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-18">PasswordCredential</a></code> object, and extract them
  during <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-global-fetch">fetch()</a></code> in ways that will remain opaque to anything other than the
  remote (same-origin) server.</p>
    <p><code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-19">PasswordCredential</a></code> objects may be bound to a <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request">Request</a></code> by passing them
  into the <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request">Request</a></code> constructor as the "<code>credentials</code>" member of a <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#requestinit">RequestInit</a></code> object:</p>
<pre class="example" id="example-042d4649"><a class="self-link" href="#example-042d4649"></a>[ Given a <code>PasswordCredential</code> named 'c' ]
var init = {
  method: "POST",
  credentials: c
};
var r = new Request("https://example.com/endpoint", init);
</pre>
    <p class="note" role="note">Note: The credential information will be transmitted as the request’s body,
  just as it would be for a form submission. This means that the "<code>method</code>"
  cannot be "<code>GET</code>".</p>
    <p>Until the request hits the network, the credential object will be hidden from
  JavaScript. Once the user agent determines that the <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request">Request</a></code> is going to
  hit the network (that is, once Fetch hits the
  "<a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#http-network-or-cache-fetch">HTTP-network-or-cache fetch</a>" algorithm), the <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-20">PasswordCredential</a></code> will be serialized into a body and content type as defined in <a href="#body-extraction">§3.3.2 Extract a body and Content-Type for request’s attached credential</a>, and the request will proceed out to the server-side
  authentication endpoint.</p>
    <h4 class="heading settled" data-level="3.3.1" id="monkey-patching"><span class="secno">3.3.1. </span><span class="content">Monkey Patches to Fetch</span><a class="self-link" href="#monkey-patching"></a></h4>
    <p>To accomplish the above, Fetch could be modified in the following ways:</p>
    <ol>
     <li data-md="">
      <p>A <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">request</a> has an associated <dfn class="dfn-paneled" data-dfn-for="request" data-dfn-type="dfn" data-lt="attached credential" data-noexport="" id="request-attached-credential">attached
  credential</dfn> (null, or a <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-21">PasswordCredential</a></code>). Unless stated
  otherwise, it is null.</p>
     <li data-md="">
      <p>A <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">request</a>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-credentials-mode">credentials mode</a> gains a new
  "<code>password</code>" value, which implies the same behavior as "<code>include</code>", with
  the additional assertion that the <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request">request</a> has a non-null <a data-link-type="dfn" href="#request-attached-credential" id="ref-for-request-attached-credential-1">attached credential</a> which will be serialized into
  its <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-body">body</a> when it hits the network.</p>
     <li data-md="">
      <p>The <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#requestcredentials">RequestCredentials</a></code> enum is renamed to "<code>RequestCredentialsMode</code>,
  and likewise updated with the new "<code>password</code>" value:</p>
<pre class="idl highlight def"><span class="kt">enum</span> <dfn class="nv idl-code" data-dfn-type="enum" data-export="" id="enumdef-requestcredentialsmode">RequestCredentialsMode<a class="self-link" href="#enumdef-requestcredentialsmode"></a></dfn> { <dfn class="s idl-code" data-dfn-for="RequestCredentialsMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;omit&quot;|omit" id="dom-requestcredentialsmode-omit">"omit"<a class="self-link" href="#dom-requestcredentialsmode-omit"></a></dfn>, <dfn class="s idl-code" data-dfn-for="RequestCredentialsMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;same-origin&quot;|same-origin" id="dom-requestcredentialsmode-same-origin">"same-origin"<a class="self-link" href="#dom-requestcredentialsmode-same-origin"></a></dfn>, <dfn class="s idl-code" data-dfn-for="RequestCredentialsMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;include&quot;|include" id="dom-requestcredentialsmode-include">"include"<a class="self-link" href="#dom-requestcredentialsmode-include"></a></dfn>, <dfn class="s idl-code" data-dfn-for="RequestCredentialsMode" data-dfn-type="enum-value" data-export="" data-lt="&quot;password&quot;|password" id="dom-requestcredentialsmode-password">"password"<a class="self-link" href="#dom-requestcredentialsmode-password"></a></dfn> };
</pre>
     <li data-md="">
      <p>The <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#requestinit">RequestInit</a></code> dictionary is updated to accept a <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-22">PasswordCredential</a></code> as its <code>credentials</code> member:</p>
<pre class="idl highlight def"><span class="kt">typedef</span> (<a class="n" data-link-type="idl-name" href="#passwordcredential" id="ref-for-passwordcredential-23">PasswordCredential</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestcredentials">RequestCredentials</a>) <dfn class="nv dfn-paneled idl-code" data-dfn-type="typedef" data-export="" id="typedefdef-credentialinfo">CredentialInfo</dfn>;

<span class="kt">partial</span> <span class="kt">dictionary</span> <a class="nv idl-code" data-link-type="dictionary" href="https://fetch.spec.whatwg.org/#requestinit">RequestInit</a> {
  <a class="n" data-link-type="idl-name" href="#typedefdef-credentialinfo" id="ref-for-typedefdef-credentialinfo-1">CredentialInfo</a> <dfn class="nv idl-code" data-dfn-for="RequestInit" data-dfn-type="dict-member" data-export="" data-type="CredentialInfo " id="dom-requestinit-credentials">credentials<a class="self-link" href="#dom-requestinit-credentials"></a></dfn>;
};
</pre>
     <li data-md="">
      <p>Replace step 20 of the current <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request">Request</a></code> constructor with the following:</p>
      <ol start="20">
       <li data-md="">
        <p>If <var>credentials</var> is non-null:</p>
        <ol>
         <li data-md="">
          <p>If <var>credentials</var> is a <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-24">PasswordCredential</a></code>, then set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-credentials-mode">credentials mode</a> to "<code>password</code>", and <var>request</var>’s <a data-link-type="dfn" href="#request-attached-credential" id="ref-for-request-attached-credential-2">attached credential</a> to <var>credentials</var>.</p>
          <p>Otherwise, set <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-credentials-mode">credentials mode</a> to <var>credentials</var>.</p>
        </ol>
      </ol>
     <li data-md="">
      <p>Replace step 32 of the current <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request">Request</a></code> constructor with the following:</p>
      <ol start="32">
       <li data-md="">
        <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-method">method</a> is <code>GET</code> or <code>HEAD</code>, then
  throw a <code>TypeError</code> if any of the following are true:</p>
        <ul>
         <li data-md="">
          <p><var>init</var>’s <code>body</code> member is present and non-null</p>
         <li data-md="">
          <p><var>inputBody</var> is non-null</p>
         <li data-md="">
          <p><var>request</var>’s <a data-link-type="dfn" href="#request-attached-credential" id="ref-for-request-attached-credential-3">attached credential</a> is non-null</p>
        </ul>
      </ol>
     <li data-md="">
      <p>The <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#http-network-or-cache-fetch">HTTP-network-or-cache fetch</a> algorithm is updated with the
  following step after the existing step 2:</p>
      <ol start="3">
       <li data-md="">
        <p>If <var>httpRequest</var>’s <a data-link-type="dfn" href="#request-attached-credential" id="ref-for-request-attached-credential-4">attached credential</a> is not
  null, run these substeps:</p>
        <ol>
         <li data-md="">
          <p class="assertion">Assert: <var>httpRequest</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-body">body</a> is null.</p>
         <li data-md="">
          <p>Let <var>body</var> and <var>type</var> be the result of running <a href="#body-extraction">§3.3.2 Extract a body and Content-Type for request’s attached credential</a> on <var>httpRequest</var>.</p>
         <li data-md="">
          <p>If <var>type</var> is the empty string, return a <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a>.</p>
         <li data-md="">
          <p>Let <var>httpRequest</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-body">body</a> be <var>body</var>, <var>Content-Type</var> be <var>type</var>, and <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-redirect-mode">redirect
  mode</a> be "<code>manual</code>".</p>
        </ol>
      </ol>
    </ol>
    <p class="issue" id="issue-25d38e5c"><a class="self-link" href="#issue-25d38e5c"></a> These patches are combined into an outstanding
  pull request against Fetch. <a href="https://github.com/whatwg/fetch/issues/237">&lt;https://github.com/whatwg/fetch/issues/237></a></p>
    <h4 class="heading settled algorithm" data-algorithm="Extract a body and Content-Type for request’s attached credential" data-level="3.3.2" id="body-extraction"><span class="secno">3.3.2. </span><span class="content"> Extract a <var>body</var> and <var>Content-Type</var> for <var>request</var>’s attached credential </span><a class="self-link" href="#body-extraction"></a></h4>
    <p>Given a <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#request">Request</a></code> (<var>request</var>), this algorithm returns a <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#body">Body</a></code> (<var>body</var>) and
  a string (<var>Content-Type</var>):</p>
    <ol>
     <li data-md="">
      <p>Let <var>credential</var> be <var>request</var>’s <a data-link-type="dfn" href="#request-attached-credential" id="ref-for-request-attached-credential-5">attached credential</a>.</p>
     <li data-md="">
      <p>Let <var>body</var> be a new <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-body">body</a>, and <var>Content-Type</var> be the empty string.</p>
     <li data-md="">
      <p>If <var>credential</var> is a <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-25">PasswordCredential</a></code>, run these substeps.</p>
      <ol>
       <li data-md="">
        <p>If <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url">url</a>’s scheme is not the same as <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">client</a>’s <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url-origin">origin</a></code>'s scheme,
  or <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-url">url</a>’s host’s <a data-link-type="dfn" href="https://publicsuffix.org/list/#">registerable
  domain</a> is not the same as <var>request</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-request-client">client</a>’s <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url-origin">origin</a></code>'s host’s <a data-link-type="dfn" href="https://publicsuffix.org/list/#">registerable
  domain</a>, then skip the remaining substeps.</p>
       <li data-md="">
        <p>Let <var>data</var> be a copy of <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-additionaldata" id="ref-for-dom-passwordcredential-additionaldata-9">additionalData</a></code> attribute if it is not <code>undefined</code>, and a new <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#interface-formdata">FormData</a></code> object otherwise.</p>
       <li data-md="">
        <p>Let <var>list</var> be an empty list.</p>
       <li data-md="">
        <p>If <var>data</var> is a <code class="idl"><a data-link-type="idl" href="https://xhr.spec.whatwg.org/#interface-formdata">FormData</a></code> object, then:</p>
        <ol>
         <li data-md="">
          <p>Set <var>list</var> to a copy of <var>data</var>’s <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry">entries</a>.</p>
         <li data-md="">
          <p>Remove all <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry">entry</a> objects from <var>list</var> whose <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry-name">name</a> is either <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-idname" id="ref-for-dom-passwordcredential-idname-5">idName</a></code> or <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-passwordname" id="ref-for-dom-passwordcredential-passwordname-5">passwordName</a></code>.</p>
         <li data-md="">
          <p>Let <var>entry</var> be a new <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry">entry</a> whose <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry-name">name</a> is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-idname" id="ref-for-dom-passwordcredential-idname-6">idName</a></code> and whose <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry-value">value</a> is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-credential-id" id="ref-for-dom-credential-id-3">id</a></code>.</p>
         <li data-md="">
          <p>Append <var>entry</var> to <var>list</var>.</p>
         <li data-md="">
          <p>Let <var>entry</var> be a new <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry">entry</a> whose <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry-name">name</a> is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-passwordname" id="ref-for-dom-passwordcredential-passwordname-6">passwordName</a></code> and whose <a data-link-type="dfn" href="https://xhr.spec.whatwg.org/#concept-formdata-entry-value">value</a> is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-password-slot" id="ref-for-dom-passwordcredential-password-slot-2">[[password]]</a></code>.</p>
         <li data-md="">
          <p>Append <var>entry</var> to <var>list</var>.</p>
         <li data-md="">
          <p>Push the result of running the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/forms.html#multipart/form-data-encoding-algorithm"><code>multipart/form-data</code> encoding
  algorithm</a>, with <var>list</var> as the form data set and with "<code>utf-8</code>" as
  the explicit character encoding, to <var>body</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body-stream">stream</a>.</p>
         <li data-md="">
          <p>Set <var>Content-Type</var> to <code>multipart/form-data;boundary=</code>, followed by the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/forms.html#multipart/form-data-boundary-string"><code>multipart/form-data</code> boundary string</a> generated by the
  multipart/form-data encoding algorithm.</p>
        </ol>
        <p>Otherwise <var>data</var> is a <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#dom-urlsearchparams">URLSearchParams</a></code> object, so:</p>
        <ol>
         <li data-md="">
          <p>Set <var>list</var> to a copy of <var>data</var>’s <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-urlsearchparams-list">list</a>.</p>
         <li data-md="">
          <p>Remove all name-value pairs from <var>list</var> whose name is either <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-idname" id="ref-for-dom-passwordcredential-idname-7">idName</a></code> or <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-passwordname" id="ref-for-dom-passwordcredential-passwordname-7">passwordName</a></code>.</p>
         <li data-md="">
          <p>Append a new name-value pair to <var>list</var> whose name is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-idname" id="ref-for-dom-passwordcredential-idname-8">idName</a></code> and whose value is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-credential-id" id="ref-for-dom-credential-id-4">id</a></code>.</p>
         <li data-md="">
          <p>Append a new name-value pair to <var>list</var> whose name is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-passwordname" id="ref-for-dom-passwordcredential-passwordname-8">passwordName</a></code> and whose value
  is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-password-slot" id="ref-for-dom-passwordcredential-password-slot-3">[[password]]</a></code>.</p>
         <li data-md="">
          <p>Push the result of running the <a data-link-type="dfn" href="https://url.spec.whatwg.org/#concept-urlencoded-serializer"><code>application/x-www-form-urlencoded</code> serializer</a>, with <var>list</var>, to <var>body</var>’s <a data-link-type="dfn" href="https://fetch.spec.whatwg.org/#concept-body-stream">stream</a>.</p>
         <li data-md="">
          <p>Set <var>Content-Type</var> to <code>application/x-www-form-urlencoded;charset=UTF-8</code>.</p>
        </ol>
      </ol>
     <li data-md="">
      <p>Return <var>body</var> and <var>Content-Type</var>.</p>
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="4" id="algorithms"><span class="secno">4. </span><span class="content">Algorithms</span><a class="self-link" href="#algorithms"></a></h2>
    <h3 class="heading settled" data-level="4.1" id="processing"><span class="secno">4.1. </span><span class="content"> Processing <code>Credential</code>s </span><a class="self-link" href="#processing"></a></h3>
    <h4 class="heading settled" data-level="4.1.1" id="request-credential"><span class="secno">4.1.1. </span><span class="content"> Request a <code>Credential</code> </span><a class="self-link" href="#request-credential"></a></h4>
    <p>Given a <code class="idl"><a data-link-type="idl" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-6">CredentialRequestOptions</a></code> object (<var>options</var>), this
  algorithm returns a <code>Promise</code> which resolves with either a single <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-20">Credential</a></code> object if one can be obtained, or <code>undefined</code> if
  not.</p>
    <p>If called from an environment which is not a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure context</a>, or
  from somewhere other than a <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top-level-browsing-context">top-level browsing context</a>, the <code>Promise</code> will be rejected with a <code>NotSupportedError</code>.</p>
    <ol>
     <li> Let <var>settings</var> be the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#incumbent-settings-object">incumbent settings object</a>. 
     <li> Let <var>origin</var> be <var>settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a>. 
     <li>
       Return a <code>Promise</code> rejected with <code>NotSupportedError</code> if any of the following statements are true: 
      <ol>
       <li> <var>settings</var> does not have a <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#responsible-document">responsible document</a> 
       <li> <var>settings</var>’ <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#responsible-document">responsible document</a> is not the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#active-document">active document</a> in the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top-level-browsing-context">top-level browsing context</a> 
       <li> <var>settings</var> is not a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure context</a> 
      </ol>
     <li> Let <var>types</var> be an empty set. 
     <li>
       For each <var>key</var> in <var>options</var>: 
      <ol>
       <li> Let <var>interface</var> be the interface such that <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-11">[[type]]</a></code> across all objects implementing that interface is <var>key</var>, or <code>null</code> if no interface’s name matches. 
       <li> If <var>interface</var> is not <code>null</code>, insert <var>interface</var> into <var>types</var>. 
      </ol>
     <li>
       Let <var>type</var> be the lowest common ancestor interface of the
      interfaces contained in <var>types</var>. 
      <p class="note" role="note">Note: That is, given a set containing <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-26">PasswordCredential</a></code> and <code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-9">FederatedCredential</a></code>, <var>type</var> will be <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-7">SiteBoundCredential</a></code>.</p>
     <li> Return a <code>Promise</code> rejected with <code>TypeMismatchError</code> if <var>type</var> is <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-21">Credential</a></code>. 
     <li> Let <var>promise</var> be a newly created <code>Promise</code> object. 
     <li> Return <var>promise</var>, and execute the remaining steps asynchronously. 
     <li>
       Switch on <var>type</var>, and execute the associated steps: 
      <dl>
       <dt><code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-10">FederatedCredential</a></code>
       <dt><code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-8">SiteBoundCredential</a></code>
       <dt><code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-27">PasswordCredential</a></code>
       <dd>
        <ol>
         <li> Let <var>result</var> be the result of executing <a href="#request-siteboundcredential-without-mediation">§4.2.2 Request an SiteBoundCredential without user mediation</a>,
              passing in <var>origin</var>, <var>types</var> and <var>options</var>. 
         <li> If <var>result</var> is not <code>null</code>, resolve <var>promise</var> with <var>result</var>, and terminate this
              algorithm. 
         <li> If <var>options</var>’s <code class="idl"><a data-link-type="idl" href="#dom-credentialrequestoptions-unmediated" id="ref-for-dom-credentialrequestoptions-unmediated-3">unmediated</a></code> is <code>true</code>, resolve <var>promise</var> with <code>undefined</code>, and terminate this algorithm. 
         <li> Resolve <var>promise</var> with the result of executing <a href="#request-siteboundcredential-with-mediation">§4.2.3 Request a SiteBoundCredential with user mediation</a>,
              passing in <var>origin</var>, <var>types</var>, and <var>options</var>. 
        </ol>
       <dt><em>This is an extension point.</em>
       <dd> When new credential types are defined in the future, they’ll go here. 
      </dl>
    </ol>
    <p class="note" role="note">Note: Currently, we reject a call to <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-10">get()</a></code> if the <var>options</var> provided specify a set of <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-22">Credential</a></code> types that don’t
  play well together (e.g. some future "NeedsLotsOfUserInteractionCredential"
  type in the same request as an <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-28">PasswordCredential</a></code>). We may wish to define
  a more graceful fallback mechanism if/when new credential types are defined.</p>
    <h4 class="heading settled" data-level="4.1.2" id="store-credential"><span class="secno">4.1.2. </span><span class="content"> Store a <code>Credential</code> </span><a class="self-link" href="#store-credential"></a></h4>
    <p>Given a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-23">Credential</a></code> object (<var>credential</var>), this algorithm executes
  a type-specific storage algorithm. <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-9">SiteBoundCredential</a></code> objects will
  be persisted to the user agent’s <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-2">credential store</a>. Future object types
  could, for instance, be persisted to some other (potentially remote) storage
  mechanism.</p>
    <p>If called from an environment which is not a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure context</a>, or
  from somewhere other than a <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top-level-browsing-context">top-level browsing context</a>, the <code>Promise</code> will be rejected with a <code>NotSupportedError</code>.</p>
    <ol>
     <li> Let <var>settings</var> be the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#incumbent-settings-object">incumbent settings object</a>. 
     <li> Let <var>origin</var> be <var>settings</var>’ <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a>. 
     <li>
       Return a <code>Promise</code> rejected with <code>NotSupportedError</code> if any of the following statements are true: 
      <ol>
       <li> <var>settings</var> does not have a <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#responsible-document">responsible document</a> 
       <li> <var>settings</var>’ <a data-link-type="dfn" href="http://www.w3.org/TR/html5/webappapis.html#responsible-document">responsible document</a> is not the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#active-document">active document</a> in the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top-level-browsing-context">top-level browsing context</a> 
       <li> <var>settings</var> is not a <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure context</a> 
      </ol>
     <li> Let <var>promise</var> be a newly created <code>Promise</code> object. 
     <li> Return <var>promise</var>, and execute the remaining steps asynchronously. 
     <li>
       Switch on <var>type</var>, and execute the associated steps: 
      <dl>
       <dt><code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-11">FederatedCredential</a></code>
       <dt><code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-10">SiteBoundCredential</a></code>
       <dt><code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-29">PasswordCredential</a></code>
       <dd>
        <ol>
         <li> Resolve <var>promise</var> with the result of executing <a href="#store-siteboundcredential">§4.2.4 Store SiteBoundCredential</a>,
              passing in <var>credential</var> and <var>origin</var>. 
        </ol>
       <dt><em>This is an extension point.</em>
       <dd> When new credential types are defined in the future, they’ll go here. 
      </dl>
    </ol>
    <h4 class="heading settled" data-level="4.1.3" id="clone-credential"><span class="secno">4.1.3. </span><span class="content"> Clone <var>credential</var> </span><a class="self-link" href="#clone-credential"></a></h4>
    <p>Given a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-24">Credential</a></code> (<var>input</var>), the following algorithm
  defines the way in which a <a data-link-type="dfn" href="http://www.w3.org/TR/html5/infrastructure.html#structured-clone">structured clone</a> will be produced. This
  algorithm plugs into the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm">internal structured cloning algorithm</a> defined in <a data-link-type="biblio" href="#biblio-html">[HTML]</a>:</p>
    <ol>
     <li> Let <var>output</var> be a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-25">Credential</a></code> object of the same type as <var>input</var>’s <code>constructor</code>. 
     <li>
       For each internal slot on <var>input</var>: 
      <ol>
       <li> Let <var>name</var> be the name of the slot. 
       <li> Let <var>source value</var> be the slot’s value. 
       <li> Let <var>cloned value</var> be the result of invoking the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm">internal
          structured cloning algorithm</a> with <var>source value</var> as the
          "<code>input</code>" argument, and <var>memory</var> as the
          "<code>memory</code>" argument. 
       <li> If an exception results from the previous step, abort the overall <a data-link-type="dfn" href="http://www.w3.org/TR/html5/infrastructure.html#structured-clone">structured clone</a> algorithm, and pass that exception through
          to the caller. 
       <li> Add a new slot to <var>output</var> having name <var>name</var> and
          value <var>cloned value</var>. 
      </ol>
     <li> Set <var>deep clone</var> to <code>own</code>. 
    </ol>
    <h3 class="heading settled" data-level="4.2" id="processing-sitebound"><span class="secno">4.2. </span><span class="content"> Processing <code>SiteBoundCredential</code>s </span><a class="self-link" href="#processing-sitebound"></a></h3>
    <h4 class="heading settled" data-level="4.2.1" id="gather-siteboundcredentials"><span class="secno">4.2.1. </span><span class="content"> Gather <code>SiteBoundCredential</code>s </span><a class="self-link" href="#gather-siteboundcredentials"></a></h4>
    <p>Given an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a> (<var>origin</var>), and a set of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-interface">interfaces</a> (<var>types</var>), and an <code class="idl"><a data-link-type="idl" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-7">CredentialRequestOptions</a></code> dictionary
  (<var>options</var>), this algorithm returns a sequence of <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-11">SiteBoundCredential</a></code> from the user agent’s <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-3">credential store</a> which are potential candidates:</p>
    <ol>
     <li>
       Let <var>credentials</var> be the set of <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-26">Credential</a></code> objects in the <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-4">credential store</a> whose <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-origin-slot" id="ref-for-dom-siteboundcredential-origin-slot-2">[[origin]]</a></code> slot is equal to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#ascii-serialisation-of-an-origin">ASCII
      serialization</a> of <var>origin</var>. 
      <p class="note" role="note">Note: This is an exact match, not a <a data-link-type="dfn" href="https://publicsuffix.org/list/#">registerable domain</a> match.
      See <a href="#security-cross-origin-leakage">§6.1 Cross-origin Credential Leakage</a> for details as to why.</p>
     <li> Remove any items from <var>credentials</var> whose <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-interface">interface</a> is
      not present in <var>types</var>. 
     <li> Remove any items from <var>credentials</var> whose <a data-link-type="dfn" href="#options-matching-algorithm" id="ref-for-options-matching-algorithm-4">options matching
      algorithm</a> returns <a data-link-type="dfn" href="#does-not-match" id="ref-for-does-not-match-2"><code>Does Not Match</code></a> when executed on <var>options</var>. 
     <li> Return <var>credentials</var>. 
    </ol>
    <h4 class="heading settled" data-level="4.2.2" id="request-siteboundcredential-without-mediation"><span class="secno">4.2.2. </span><span class="content"> Request an <code>SiteBoundCredential</code> <em>without</em> user mediation </span><a class="self-link" href="#request-siteboundcredential-without-mediation"></a></h4>
    <p>This algorithm accepts an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a> (<var>origin</var>), a set of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-interface">interfaces</a> (<var>types</var>) and an <code class="idl"><a data-link-type="idl" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-8">CredentialRequestOptions</a></code> dictionary (<var>options</var>), and returns either a single <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-12">SiteBoundCredential</a></code> object <strong>if and only if</strong> one can be
  provided without user mediation, or <code>null</code> if not.</p>
    <ol>
     <li>
       If the user agent has disabled sharing credentials without user
      mediation, or <var>origin</var>’s <a data-link-type="dfn" href="#requires-user-mediation" id="ref-for-requires-user-mediation-1">requires user mediation</a> flag
      in the user agent’s <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-5">credential store</a> is <code>true</code>, return <code>null</code>. 
      <p class="note" role="note">Note: See <a href="#user-mediation-requirements">§5.2 Requiring User Mediation</a> for details.</p>
     <li> Let <var>credentials</var> be the result of executing <a href="#gather-siteboundcredentials">§4.2.1 Gather SiteBoundCredentials</a> on <var>origin</var>, <var>types</var>, and <var>options</var>. 
     <li>
       If <var>credentials</var> is empty, or contains more than one <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-27">Credential</a></code> object, return <code>null</code>. 
      <p class="note" role="note">Note: In the future, we may wish to allow multiple <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-28">Credential</a></code> objects
      to be returned; for the moment, we’re erring on the cautious side to avoid
      accidentally revealing explicit relationships between user accounts.</p>
     <li> Otherwise, let <var>credential</var> be the single <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-29">Credential</a></code> object
      in <var>credentials</var>. 
     <li> Return <var>credential</var>. 
    </ol>
    <p class="note" role="note">Note: If a user agent implements some sort of "private browsing" mode, we
  recommend that this algorithm always return <code>null</code> when the user
  has enabled private browsing.</p>
    <h4 class="heading settled" data-level="4.2.3" id="request-siteboundcredential-with-mediation"><span class="secno">4.2.3. </span><span class="content"> Request a <code>SiteBoundCredential</code> with user mediation </span><a class="self-link" href="#request-siteboundcredential-with-mediation"></a></h4>
    <p>This algorithm accepts an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a> (<var>origin</var>), a set of <a data-link-type="dfn" href="https://heycam.github.io/webidl/#dfn-interface">interfaces</a> (<var>types</var>) and an <code class="idl"><a data-link-type="idl" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-9">CredentialRequestOptions</a></code> dictionary (<var>options</var>), and returns either a single <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-13">SiteBoundCredential</a></code> object, or <code>null</code> if none can be
  provided.</p>
    <ol>
     <li> Let <var>credentials</var> be the result of executing <a href="#gather-siteboundcredentials">§4.2.1 Gather SiteBoundCredentials</a> on <var>origin</var>, <var>types</var>, and <var>options</var>. 
     <li>
       Ask the user which <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-30">Credential</a></code> to share. 
      <p class="note" role="note">Note: This behavior is vendor-specific. Guidelines for user agent
      behavior are presented in <a href="#user-mediation">§5 User Mediation</a>.</p>
     <li> Let <var>credential</var> be the <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-31">Credential</a></code> the user chose, or <code>null</code> if the user chose not to share a credential with <var>origin</var>. 
     <li> Return <var>credential</var>. 
    </ol>
    <h4 class="heading settled" data-level="4.2.4" id="store-siteboundcredential"><span class="secno">4.2.4. </span><span class="content"> Store <code>SiteBoundCredential</code> </span><a class="self-link" href="#store-siteboundcredential"></a></h4>
    <p>This algorithm accepts a <code class="idl"><a data-link-type="idl" href="#siteboundcredential" id="ref-for-siteboundcredential-14">SiteBoundCredential</a></code> (<var>credential</var>),
  and an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a> (<var>origin</var>), and hands it to the internal
  credential manager for processing. It returns <var>credential</var> regardless
  of whether the user allows or disallows the credential to be persisted to the <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-6">credential store</a>:</p>
    <ol>
     <li> Set <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-origin-slot" id="ref-for-dom-siteboundcredential-origin-slot-3">[[origin]]</a></code> slot to the <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#ascii-serialisation-of-an-origin">ASCII
      serialization</a> of <var>origin</var>. 
     <li> If <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-iconurl" id="ref-for-dom-siteboundcredential-iconurl-3">iconURL</a></code> is not an <a data-link-type="dfn" href="https://w3c.github.io/webappsec-mixed-content/#a-priori-authenticated-url"><i lang="la">a priori</i> authenticated URL</a>, set <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-iconurl" id="ref-for-dom-siteboundcredential-iconurl-4">iconURL</a></code> to the empty string. 
     <li>
       Switch on <var>credential</var>’s primary interface, and execute the
      associated steps: 
      <dl>
       <dt><code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-30">PasswordCredential</a></code>
       <dd>
        <ol>
         <li>
           If the user agent’s credential manager contains a <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-31">PasswordCredential</a></code> <var>storedCredential</var> whose <code class="idl"><a data-link-type="idl" href="#dom-credential-id" id="ref-for-dom-credential-id-5">id</a></code> attribute is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-credential-id" id="ref-for-dom-credential-id-6">id</a></code> and whose <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-origin-slot" id="ref-for-dom-siteboundcredential-origin-slot-4">[[origin]]</a></code> slot is <var>origin</var>, then: 
          <ol>
           <li>
             If the user grants <var>origin</var> permission to update
                  credentials (as discussed in <a href="#user-mediated-storage">§5.1 Storing and Updating Credentials</a>),
                  then: 
            <ol>
             <li> Set <var>storedCredential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-password-slot" id="ref-for-dom-passwordcredential-password-slot-4">[[password]]</a></code> to the
                      value of <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-password-slot" id="ref-for-dom-passwordcredential-password-slot-5">[[password]]</a></code> slot. 
             <li> Set <var>storedCredential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-name" id="ref-for-dom-siteboundcredential-name-3">name</a></code> to the
                      value of <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-name" id="ref-for-dom-siteboundcredential-name-4">name</a></code>. 
             <li> Set <var>storedCredential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-iconurl" id="ref-for-dom-siteboundcredential-iconurl-5">iconURL</a></code> to
                      the value of <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-iconurl" id="ref-for-dom-siteboundcredential-iconurl-6">iconURL</a></code>. 
            </ol>
          </ol>
         <li>
           Otherwise: 
          <ol>
           <li> If the user grants <var>origin</var> permission to store
                  credentials (as discussed in <a href="#user-mediated-storage">§5.1 Storing and Updating Credentials</a>), then
                  store <code class="idl"><a data-link-type="idl" href="#dom-credential-id" id="ref-for-dom-credential-id-7">id</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-12">[[type]]</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-name" id="ref-for-dom-siteboundcredential-name-5">name</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-iconurl" id="ref-for-dom-siteboundcredential-iconurl-7">iconURL</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-origin-slot" id="ref-for-dom-siteboundcredential-origin-slot-5">[[origin]]</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-password-slot" id="ref-for-dom-passwordcredential-password-slot-6">[[password]]</a></code> of <var>credential</var> in the <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-7">credential store</a>. 
          </ol>
        </ol>
       <dt><code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-12">FederatedCredential</a></code>
       <dd>
        <ol>
         <li>
           If the user agent’s credential manager does not contain a <code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-13">FederatedCredential</a></code> <var>storedCredential</var> whose <code class="idl"><a data-link-type="idl" href="#dom-credential-id" id="ref-for-dom-credential-id-8">id</a></code> attribute is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-credential-id" id="ref-for-dom-credential-id-9">id</a></code> and whose <code class="idl"><a data-link-type="idl" href="#dom-federatedcredential-provider" id="ref-for-dom-federatedcredential-provider-6">provider</a></code> attribute is <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-federatedcredential-provider" id="ref-for-dom-federatedcredential-provider-7">provider</a></code> and whose <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-origin-slot" id="ref-for-dom-siteboundcredential-origin-slot-6">[[origin]]</a></code> slot is <var>origin</var>, then: 
          <ol>
           <li> If the user grants <var>origin</var> permission to store
                  credentials (as discussed in <a href="#user-mediated-storage">§5.1 Storing and Updating Credentials</a>),
                  store <code class="idl"><a data-link-type="idl" href="#dom-credential-id" id="ref-for-dom-credential-id-10">id</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-13">[[type]]</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-name" id="ref-for-dom-siteboundcredential-name-6">name</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-iconurl" id="ref-for-dom-siteboundcredential-iconurl-8">iconURL</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-origin-slot" id="ref-for-dom-siteboundcredential-origin-slot-7">[[origin]]</a></code>, <code class="idl"><a data-link-type="idl" href="#dom-federatedcredential-provider" id="ref-for-dom-federatedcredential-provider-8">provider</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-federatedcredential-protocol" id="ref-for-dom-federatedcredential-protocol-3">protocol</a></code> of <var>credential</var> in the <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-8">credential store</a>. 
          </ol>
        </ol>
       <dt><em>This is an extension point.</em>
       <dd> When new credential types are defined in the future, they’ll go here. 
      </dl>
     <li> Return <var>credential</var>. 
    </ol>
    <h3 class="heading settled" data-level="4.3" id="helpers"><span class="secno">4.3. </span><span class="content"> Helpful Algorithms </span><a class="self-link" href="#helpers"></a></h3>
    <h4 class="heading settled" data-level="4.3.1" id="require-user-mediation-for-origin"><span class="secno">4.3.1. </span><span class="content"> Require user mediation for <var>origin</var> </span><a class="self-link" href="#require-user-mediation-for-origin"></a></h4>
    <ol>
     <li> Let <var>promise</var> be a newly created <code>Promise</code> object. 
     <li> Return <var>promise</var>, and execute the remaining steps asynchronously. 
     <li> Set <var>origin</var>’s <a data-link-type="dfn" href="#requires-user-mediation" id="ref-for-requires-user-mediation-2">requires user mediation</a> flag to <code>true</code> in the user agent’s <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-9">credential store</a>. 
     <li> Resolve <var>promise</var> with <code>undefined</code>. 
    </ol>
    <h4 class="heading settled" data-level="4.3.2" id="is-match"><span class="secno">4.3.2. </span><span class="content"> Does <var>credential</var> match <var>origin B</var>? </span><a class="self-link" href="#is-match"></a></h4>
    <ol>
     <li> Let <var>origin A</var> be the value of <var>credential</var>’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-origin-slot" id="ref-for-dom-siteboundcredential-origin-slot-8">[[origin]]</a></code> slot. 
     <li> If <var>origin A</var> is <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin-effective-domain">same-origin</a> as <var>origin B</var>, return <code>Exact Match</code>. 
     <li> If <var>origin A</var>’s <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url-scheme">scheme</a></code> is <var>origin B</var>’s <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url-scheme">scheme</a></code>, and <var>origin A</var>’s <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url-host">host</a></code>'s <a data-link-type="dfn" href="https://publicsuffix.org/list/#">registerable
      domain</a> is <var>origin B</var>’s <code class="idl"><a data-link-type="idl" href="https://url.spec.whatwg.org/#concept-url-host">host</a></code>'s <a data-link-type="dfn" href="https://publicsuffix.org/list/#">registerable
      domain</a>, then return <code>Fuzzy Match</code>. 
     <li> Return <code>No Match</code> 
    </ol>
   </section>
   <section>
    <h2 class="heading settled" data-level="5" id="user-mediation"><span class="secno">5. </span><span class="content">User Mediation</span><a class="self-link" href="#user-mediation"></a></h2>
    <p>Exposing credential information to the web via an API has a number of
  potential impacts on user privacy. The user agent, therefore, MUST
  involve the user in a number of cases in order to ensure that she clearly
  understands what’s going on, and with whom her credentials are being shared.</p>
    <h3 class="heading settled" data-level="5.1" id="user-mediated-storage"><span class="secno">5.1. </span><span class="content">Storing and Updating Credentials</span><a class="self-link" href="#user-mediated-storage"></a></h3>
    <p>Credential information is sensitive data, and users MUST remain in control
  of that information’s storage. Inadvertent credential storage could, for
  instance, unexpectedly link a user’s local profile on a particular device to
  a specific online persona. To mitigate the risk of surprise:</p>
    <ol>
     <li> Credential information MUST NOT be stored or updated without explicit
      user consent. For example, the user agent could display a "Save this
      password?" dialog box to the user in response to each call to <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-11">store()</a></code>. 
     <li>
       User consent MAY be requested every time a credential is stored or
      updated, <strong>or</strong> the user agent MAY request a more persistent
      grant of consent which would apply to some or all subsequent API
      operations. 
      <p>For example, a user agent may offer an option to "Always save passwords",
      or "Always save password on this site".</p>
     <li> User agents SHOULD notify users when credentials are stored. This might
      take the form of an icon in the address bar, or some similar location. 
     <li> User agents MUST allow users to manually remove stored credentials. This
      functionality might be implemented as a settings page, or via interaction
      with a notification as described above. 
    </ol>
    <h3 class="heading settled" data-level="5.2" id="user-mediation-requirements"><span class="secno">5.2. </span><span class="content">Requiring User Mediation</span><a class="self-link" href="#user-mediation-requirements"></a></h3>
    <p>If a an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a>’s <a data-link-type="dfn" href="#requires-user-mediation" id="ref-for-requires-user-mediation-3">requires user mediation</a> flag is set to <code>false</code> in the user agent’s <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-10">credential store</a>, then <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-32">Credential</a></code> objects from that origin MAY be provided to pages from that
  origin without user interaction. The user will be signed-in to that origin
  persistently, which, on the one hand, is desirable from the perspective of
  usability and convenience, but which might nevertheless surprise the user.</p>
    <p>If the user agent syncs the state of a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-33">Credential</a></code> between devices, an
  origin could explicitly tie the devices together in a way which might surprise
  their owner.</p>
    <p>To mitigate the risk of surprise:</p>
    <ol>
     <li> User agents MUST allow users to require user mediation for <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-34">Credential</a></code> objects. This functionality might be implemented as a global toggle that
      requires user mediation for all origins, or via more granular settings
      for specific origins (or specific credentials on specific origins). 
     <li> User agents MUST NOT set an origin’s <a data-link-type="dfn" href="#requires-user-mediation" id="ref-for-requires-user-mediation-4">requires user mediation</a> slot’s
      value to <code>false</code> without user consent. For example, the <a data-link-type="dfn" href="#credential-chooser" id="ref-for-credential-chooser-2">credential chooser</a> described in <a href="#user-mediated-selection">§5.3 Credential Selection</a> could
      have a checkbox which the user could toggle to mark the selected
      credential as available without mediation for the origin, or the user
      agent could have an onboarding process for its credential manager which
      asked a user for a default setting. 
     <li> User agents MUST notify users when credentials are provided to an
      origin. This could take the form of an icon in the address bar, or some
      similar location. 
     <li> If a user clears her browsing data for an origin (cookies, localStorage,
      and so on), the user agent MUST require user mediation for that origin
      by executing the algorithm defined in <a href="#require-user-mediation-for-origin">§4.3.1 Require user mediation for origin</a>. 
    </ol>
    <h3 class="heading settled" data-level="5.3" id="user-mediated-selection"><span class="secno">5.3. </span><span class="content">Credential Selection</span><a class="self-link" href="#user-mediated-selection"></a></h3>
    <p>When responding to a call to <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-11">get()</a></code> on an origin
  without credentials that are available without user mediation, user agents
  MUST ask the user for permission to share credential information. This SHOULD
  take the form of a <dfn class="dfn-paneled" data-dfn-type="dfn" data-local-lt="chooser" data-noexport="" id="credential-chooser">credential chooser</dfn> which
  presents the user with a list of credentials that are available for use on a
  site, allowing her to select one which should be provided to the website, or
  to reject the request entirely.</p>
    <p>The chooser interface SHOULD be implemented in such a way as to be
  distinguishable from UI which a website could produce. For example, the
  chooser might overlap the user agent’s UI in some unspoofable way.</p>
    <p>The chooser interface SHOULD include an indication of the origin which is
  requesting credentials.</p>
    <p>The chooser interface SHOULD include all <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-35">Credential</a></code> objects associated
  with the origin that requested credentials.</p>
    <p><em>The following image is an exceptionally non-normative mock:</em></p>
    <p><img alt="A mockup of what a chooser might look like." src="./mock-chooser.png"></p>
    <p>User agents MAY internally associate information with each <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-36">Credential</a></code> object beyond the attributes specified in this document in order to enhance
  the utility of such a chooser. For example, favicons could help disambiguate
  identity providers, etc. Any additional information stored MUST not be
  exposed directly to the web.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="6" id="security-considerations"><span class="secno">6. </span><span class="content">Security Considerations</span><a class="self-link" href="#security-considerations"></a></h2>
    <h3 class="heading settled" data-level="6.1" id="security-cross-origin-leakage"><span class="secno">6.1. </span><span class="content">Cross-origin Credential Leakage</span><a class="self-link" href="#security-cross-origin-leakage"></a></h3>
    <p>Credentials are sensitive information, and user agents need to exercise
  caution in determining when they can be safely shared with a website. The
  safest option is to restrict credential sharing to the exact origin on
  which they were saved. That is likely too restrictive for the web, however:
  consider sites which divide functionality into subdomains: <code>example.com</code> vs <code>admin.example.com</code>.</p>
    <p>As a compromise between annoying users, and securing their credentials, user
  agents:</p>
    <ol>
     <li> MUST NOT share credentials between origins whose scheme components are
      not the same. That is: credentials saved on <code>https://example.com/</code> will never be available to <code>http://example.com/</code> via a user agent’s autofill mechanism. 
     <li> MAY use the Public Suffix List <a data-link-type="biblio" href="#biblio-psl">[PSL]</a> to determine the effective scope
      of a credential by comparing the <a data-link-type="dfn" href="https://publicsuffix.org/list/#">registerable domains</a> of the
      credential’s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-origin-slot" id="ref-for-dom-siteboundcredential-origin-slot-9">[[origin]]</a></code> with the origin in which <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-12">get()</a></code> is called. That is: credentials saved on <code>https://admin.example.com/</code> and <code>https://example.com/</code> MAY be offered to users when <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-13">get()</a></code> is called from <code>https://www.example.com/</code>. 
     <li> MUST NOT offer credentials to an origin in response to <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-14">get()</a></code> without user mediation if the credential’s
      origin is not an exact match for the calling origin. That is, <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-37">Credential</a></code> objects for <code>https://example.com</code> would not be
      returned directly to <code>https://www.example.com</code>, but could be
      offered to the user via the chooser. 
    </ol>
    <p><code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-32">PasswordCredential</a></code>s further mitigate the risk of data leakage by never
  exposing the <code class="idl"><a data-link-type="idl" href="#dom-passwordcredential-password-slot" id="ref-for-dom-passwordcredential-password-slot-7">[[password]]</a></code> slot directly to a page’s JavaScript, but only
  allowing its submission to a same-origin server-side endpoint via <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-global-fetch">fetch()</a></code>.</p>
    <p>Additionally, authors SHOULD mitigate the risk of leakage by setting a
  reasonable Content Security Policy <a data-link-type="biblio" href="#biblio-csp">[CSP]</a> which restricts the origins to
  which data can be sent. In particular, authors should ensure that the
  following directives are set, explicitly or implicitly, in
  their pages' policies:</p>
    <ol>
     <li> <code><a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#connect-src">connect-src</a></code> further restricts the origins to which <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-global-fetch">fetch()</a></code> may submit data (which mitigates the risk of redirect-based
      attacks). 
     <li> <code><a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#child-src">child-src</a></code> restricts the nested browsing
      contexts which may be embedded in a page, making it more difficult to
      inject a malicious <code class="idl"><a data-link-type="idl" href="http://www.w3.org/TR/webmessaging/#dom-window-postmessage">postMessage()</a></code> target. <a data-link-type="biblio" href="#biblio-webmessaging">[WEBMESSAGING]</a> 
    </ol>
    <h3 class="heading settled" data-level="6.2" id="security-same-origin-leakage"><span class="secno">6.2. </span><span class="content">Same-origin Leakage</span><a class="self-link" href="#security-same-origin-leakage"></a></h3>
    <p>Cross-site scripting attacks could make it possible to exploit <code class="idl"><a data-link-type="idl" href="#passwordcredential" id="ref-for-passwordcredential-33">PasswordCredential</a></code>'s integration with <code class="idl"><a data-link-type="idl" href="https://fetch.spec.whatwg.org/#dom-global-fetch">fetch()</a></code> in order to leak
  credential information via a vulnerable same-origin endpoint. To mitigate
  this kind of risk, authors SHOULD set a reasonable Content Security Policy
  which restricts the kinds of content which can execute in their sites'
  context. <a data-link-type="biblio" href="#biblio-csp">[CSP]</a> Moreover, authors should ensure that both <code><a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#script-src">script-src</a></code> and <code><a data-link-type="dfn" href="https://w3c.github.io/webappsec-csp/#object-src">object-src</a></code> directives
  are set in any policy they specify in order to ensure that only trusted
  script is executed on a page with access to a user’s credentials.</p>
    <h3 class="heading settled" data-level="6.3" id="security-origin-confusion"><span class="secno">6.3. </span><span class="content">Origin Confusion</span><a class="self-link" href="#security-origin-confusion"></a></h3>
    <p>If framed pages have access to the APIs defined here, it might be possible
  to confuse a user into granting access to credentials for an origin other
  than the <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top-level-browsing-context">top-level browsing context</a>, which is the only security origin
  which users can reasonably be expected to understand.</p>
    <p>Therefore, <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#nested-browsing-context">Nested browsing contexts</a> and other environments like
  Workers <a data-link-type="biblio" href="#biblio-workers">[WORKERS]</a> cannot receive or store <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-38">Credential</a></code> objects; the user
  agent MUST reject promises generated by calls to <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-15">get()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-12">store()</a></code> with a <code>SecurityError</code> when
  called from a context which is not a <a data-link-type="dfn" href="http://www.w3.org/TR/html5/browsers.html#top-level-browsing-context">top-level browsing context</a>.</p>
    <p>See the algorithms defined in <a href="#request-credential">§4.1.1 Request a Credential</a> and <a href="#store-credential">§4.1.2 Store a Credential</a> for details.</p>
    <h3 class="heading settled" data-level="6.4" id="security-insecure-origins"><span class="secno">6.4. </span><span class="content">Insecure Sites</span><a class="self-link" href="#security-insecure-origins"></a></h3>
    <p>User agents MUST NOT expose the APIs defined here to environments which are
  not <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure contexts</a>. User agents MAY implement autofill mechanisms
  which store user credentials and fill sign-in forms on
  non-<a data-link-type="dfn" href="https://w3c.github.io/webappsec-mixed-content/#a-priori-authenticated-url"><i lang="la">a priori</i> authenticated URLs</a>, but those sites cannot
  be trusted to interact directly with the credential manager in any meaningful
  way, and those sites MUST NOT have access to credentials saved in <a data-link-type="dfn" href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure
  contexts</a> (as discussed in <a href="#security-cross-origin-leakage">§6.1 Cross-origin Credential Leakage</a>.</p>
    <h3 class="heading settled" data-level="6.5" id="security-xss"><span class="secno">6.5. </span><span class="content">Script Injection</span><a class="self-link" href="#security-xss"></a></h3>
    <p>If a malicious party is able to inject script into an origin, they could
  (among many other things you wouldn’t like) overwrite the behavior of <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-13">store()</a></code> to steal a user’s credentials as they’re written into the <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-11">credential store</a>.</p>
    <p>Authors SHOULD mitigate the risk of such attacks by properly escaping input
  and output, and add layers of defense in depth by setting a reasonably
  strong Content Security Policy <a data-link-type="biblio" href="#biblio-csp">[CSP]</a> which restricts the origins from
  which script can be injected, and by using Subresource Integrity checks <a data-link-type="biblio" href="#biblio-sri">[SRI]</a> to ensure that only trusted JavaScript is executed.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="7" id="privacy-considerations"><span class="secno">7. </span><span class="content">Privacy Considerations</span><a class="self-link" href="#privacy-considerations"></a></h2>
    <h3 class="heading settled" data-level="7.1" id="privacy-timing-attacks"><span class="secno">7.1. </span><span class="content">Timing Attacks</span><a class="self-link" href="#privacy-timing-attacks"></a></h3>
    <p>If the user has no credentials for an origin, a call to <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-16">get()</a></code> will resolve very quickly indeed. A malicious
  website could distinguish between a user with no credentials and a user with
  credentials who chooses not to share them.</p>
    <p>This could allow a malicious website to determine if a user has credentials
  saved for particular federated identity providers by repeatedly calling <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-17">get()</a></code> with a single item in the <code class="idl"><a data-link-type="idl" href="#dom-federatedcredentialrequestoptions-providers" id="ref-for-dom-federatedcredentialrequestoptions-providers-7">providers</a></code> array. The risk is mitigated
  by the fact that the user would, sooner or later, be prompted to provide
  credentials to the site which would certainly raise her suspicions as to its
  behavior.</p>
    <p>User agents SHOULD also rate-limit credential requests. It’s almost certainly
  abusive for a page to request credentials more than a few times in a short
  period.</p>
    <h3 class="heading settled" data-level="7.2" id="privacy-signout"><span class="secno">7.2. </span><span class="content">Signing-Out</span><a class="self-link" href="#privacy-signout"></a></h3>
    <p>If a user has chosen to automatically sign-in to websites, as discussed
  in <a href="#user-mediation-requirements">§5.2 Requiring User Mediation</a>, then the user agent will provide
  credentials to an origin whenever it asks for them. The website can instruct
  the user agent to suppress this behavior by calling <code class="idl"><a data-link-type="idl" href="#credentialscontainer" id="ref-for-credentialscontainer-2">CredentialsContainer</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-requireusermediation" id="ref-for-dom-credentialscontainer-requireusermediation-4">requireUserMediation()</a></code> method, which will turn off
  automatic sign-in for a given origin.</p>
    <p>The user agent relies on the website to do the right thing; an inattentive (or
  malicious) website could simply neglect to call this method, causing the user
  agent to continue providing credentials against the user’s apparent intention.</p>
    <p>The user MUST have some control over this behavior. As noted in <a href="#user-mediation-requirements">§5.2 Requiring User Mediation</a>, clearing cookies for an origin will also
  reset that origin’s <a data-link-type="dfn" href="#requires-user-mediation" id="ref-for-requires-user-mediation-5">requires user mediation</a> flag in the <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-12">credential
  store</a> to <code>true</code>. Additionally, we recommend that the user agent provide
  some UI affordance for disabling automatic sign-in for a particular origin.
  This could be tied to the notification that credentials have been provided to
  an origin, for example.</p>
    <h3 class="heading settled" data-level="7.3" id="privacy-chooser-leakage"><span class="secno">7.3. </span><span class="content">Chooser Leakage</span><a class="self-link" href="#privacy-chooser-leakage"></a></h3>
    <p>If a user agent displays images supplied by a website or federation (for
  example, if a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-39">Credential</a></code>'s <code class="idl"><a data-link-type="idl" href="#dom-siteboundcredential-iconurl" id="ref-for-dom-siteboundcredential-iconurl-9">iconURL</a></code> is displayed),
  requests for these images MUST NOT be directly tied to instantiating the
  chooser in order to avoid leaking chooser usage. One option would be to fetch
  the images in the background when saving or updating a <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-40">Credential</a></code>, and to
  cache them for the lifetime of the <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-41">Credential</a></code>.</p>
    <p>These images MUST be fetched with the <code>credentials</code> mode set to
  "<code>omit</code>", the <code>skip-service-worker flag</code> set, the <code>client</code> set to <code>null</code>, the <code>initiator</code> set
  to the empty string, and the <code>destination</code> set to <code>subresource</code>.</p>
    <p>Moreover, if the user agent allows the user to change either the name or icon
  associated with the credential, the alterations to the data SHOULD NOT be
  exposed to the website (consider a user who names two credentials for an
  origin "My fake account" and "My real account", for instance).</p>
    <h3 class="heading settled" data-level="7.4" id="locally-stored-data"><span class="secno">7.4. </span><span class="content">Locally Stored Data</span><a class="self-link" href="#locally-stored-data"></a></h3>
    <p>This API offers an <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a> the ability to store data persistently along
  with a user’s profile. Since most user agents treat credential data
  differently than "browsing data" (cookies, etc.) this might have the side
  effect of surprising a user who might believe that all traces of an origin
  have been wiped out when they clear their cookies.</p>
    <p>User agents SHOULD provide UI that makes it clear to a user that credential
  data is stored for an origin, and SHOULD make it easy for users to remove
  such data when they’re no longer interested in keeping it around.</p>
    <p>Moreover, the <a data-link-type="dfn" href="#credential-store" id="ref-for-credential-store-13">credential store</a>’s association between <a data-link-type="dfn" href="https://html.spec.whatwg.org/multipage/#concept-origin">origins</a> and <a data-link-type="dfn" href="#protocol-set" id="ref-for-protocol-set-1">protocol sets</a> SHOULD be cleared along with "browsing data" if
  no <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-42">Credential</a></code> has been stored for the origin.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="8" id="implementation-considerations"><span class="secno">8. </span><span class="content">Implementation Considerations</span><a class="self-link" href="#implementation-considerations"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <h3 class="heading settled" data-level="8.1" id="implementation-for-authors"><span class="secno">8.1. </span><span class="content">Website Authors</span><a class="self-link" href="#implementation-for-authors"></a></h3>
    <p class="issue" id="issue-98e04f89"><a class="self-link" href="#issue-98e04f89"></a> Add some thoughts here about when and how the API
  should be used, especially with regard to <code class="idl"><a data-link-type="idl" href="#dom-credentialrequestoptions-unmediated" id="ref-for-dom-credentialrequestoptions-unmediated-4">unmediated</a></code>. <a href="https://github.com/w3c/webappsec/issues/290">&lt;https://github.com/w3c/webappsec/issues/290></a></p>
    <h3 class="heading settled" data-level="8.2" id="implementation-extension"><span class="secno">8.2. </span><span class="content">Extension Points</span><a class="self-link" href="#implementation-extension"></a></h3>
    <p>As noted in <a href="#future-work">§9 Future Work</a>, there is known interest in extending the API
  defined here to serve use cases beyond those this document addresses. To
  that end, the API is fairly generic, with several explicit extension points.</p>
    <div class="example" id="example-488fdc05">
     <a class="self-link" href="#example-488fdc05"></a> If we wished to add a new credential type, how would we spell it out? 
     <ol>
      <li>
        Define a new <code>ExampleCredential</code> that inherits from <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-43">Credential</a></code>, and define the value of its <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-14">[[type]]</a></code> slot: 
<pre>interface ExampleCredential : Credential {
  // Definition goes here.
};

...

All <code>ExampleCredential</code> objects have their <a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-15">[[type]]</a> slot’s
value set to the string "example".
</pre>
      <li>
        Define the options that the new credential type requires, and add them
        to the <code class="idl"><a data-link-type="idl" href="#dictdef-credentialrequestoptions" id="ref-for-dictdef-credentialrequestoptions-10">CredentialRequestOptions</a></code> dictionary with a property name that
        matches the <code class="idl"><a data-link-type="idl" href="#dom-credential-type-slot" id="ref-for-dom-credential-type-slot-16">[[type]]</a></code> slot’s value. 
<pre>dictionary ExampleCredentialRequestOptions {
  // Definition goes here.
};

partial dictionary CredentialRequestOptions {
  ExampleCredentialRequestOptions? example;
};
</pre>
      <li> Add <code>ExampleCredential</code> to the switch in step 8 of <a href="#request-credential">§4.1.1 Request a Credential</a>, and define the request behavior necessary to
        grab and return the new type. 
      <li> Add <code>ExampleCredential</code> to the switch in step 6 of <a href="#store-credential">§4.1.2 Store a Credential</a>, and define the persistance behavior necessary to
        store the new type. 
     </ol>
    </div>
    <p>You might also need new primitives. For instance, you might want to return
  many <code class="idl"><a data-link-type="idl" href="#credential" id="ref-for-credential-44">Credential</a></code> objects rather than just one. That might be accomplished
  in a generic fashion by adding a <code>getAll()</code> method to <code class="idl"><a data-link-type="idl" href="#credentialscontainer" id="ref-for-credentialscontainer-3">CredentialsContainer</a></code>, and defining a <code>CredentialSet</code> object that
  contained a <code>sequence&lt;Credential></code>, and could be easily
  extended to meet some use case.</p>
    <p>For any such extension, we recommend getting in touch with <a href="mailto:public-webappsec@w3.org">public-webappsec@</a> for
  consultation and review.</p>
    <h3 class="heading settled" data-level="8.3" id="implementation-browser-extensions"><span class="secno">8.3. </span><span class="content">Browser Extensions</span><a class="self-link" href="#implementation-browser-extensions"></a></h3>
    <p>Ideally, user agents that implement an extension system of some sort will
  allow third-parties to hook into these API endpoints in order to improve
  the behavior of third party credential management software in the same way
  that user agents can improve their own via this imperative approach.</p>
    <p>This could range from a complex new API that the user agent mediates, or
  simply by allowing extensions to overwrite the <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-get" id="ref-for-dom-credentialscontainer-get-18">get()</a></code> and <code class="idl"><a data-link-type="idl" href="#dom-credentialscontainer-store" id="ref-for-dom-credentialscontainer-store-14">store()</a></code> endpoints for their own purposes.</p>
   </section>
   <section>
    <h2 class="heading settled" data-level="9" id="future-work"><span class="secno">9. </span><span class="content">Future Work</span><a class="self-link" href="#future-work"></a></h2>
    <p><em>This section is non-normative.</em></p>
    <p>The API defined here does the bare minimum to expose user agent’s credential
  managers to the web, and allows the web to help those credential managers
  understand when <a data-link-type="dfn" href="#federated-identity-provider" id="ref-for-federated-identity-provider-8">federated identity providers</a> are in use. The next
  logical step will be along the lines sketched in documents like <a data-link-type="biblio" href="#biblio-web-login">[WEB-LOGIN]</a> (and, to some extent, Mozilla’s BrowserID <a data-link-type="biblio" href="#biblio-browserid">[BROWSERID]</a>).</p>
    <p>The user agent is in the unique position of being able to effectively mediate
  the relationship between users, identity providers, and websites. If the user
  agent can remove some of the risk and confusion associated with the typical
  authentication flows, users will be in a significantly better position than
  today.</p>
    <p>A natural way to expose this information might be to extend the <code class="idl"><a data-link-type="idl" href="#federatedcredential" id="ref-for-federatedcredential-14">FederatedCredential</a></code> interface with properties like authentication tokens,
  and possibly to add some form of manifest format with properties that declare
  the authentication type which the provider supports.</p>
    <p>The API described here is designed to be extensible enough to support use
  cases that require user interaction, perhaps with websites other than the one
  which requested credentials. We hope that the Promise-based system we’ve
  settled on is extensible enough to support these kinds of asynchronous flows
  which could require some level of interaction between multiple browsing
  contexts (e.g. mediated activity on <code>idp.com</code> might resolve a
  Promise handed back to <code>rp.com</code>) in the future without redesigning
  the API from the ground up.</p>
    <p>Baby steps.</p>
    <div class="note" role="note"> Groups like the <a href="http://www.w3.org/Payments/IG/">Web Payments IG</a> and the <a href="https://www.w3.org/community/credentials/">Credentials CG</a> have expressed interest in extending the API defined in this document in
    order to address use cases beyond those outlined in <a href="#use-cases">§1.1 Use Cases</a>. They’ve
    documented these use cases in detail in <a href="http://www.w3.org/TR/web-payments-use-cases/">Web Payments Use Cases 1.0</a> and <a href="http://opencreds.org/specs/source/use-cases/">Credentials CG Use Cases</a>,
    and anticipate extending the API in a separate document to solve a different
    set of problems than WebAppSec is currently chartered to deal with. </div>
   </section>
  </main>
  <h2 class="no-ref no-num heading settled" id="conformance"><span class="content">Conformance</span><a class="self-link" href="#conformance"></a></h2>
  <h3 class="no-ref no-num heading settled" id="conventions"><span class="content">Document conventions</span><a class="self-link" href="#conventions"></a></h3>
  <p>Conformance requirements are expressed with a combination of
    descriptive assertions and RFC 2119 terminology. The key words “MUST”,
    “MUST NOT”, “REQUIRED”, “SHALL”, “SHALL NOT”, “SHOULD”, “SHOULD NOT”,
    “RECOMMENDED”, “MAY”, and “OPTIONAL” in the normative parts of this
    document are to be interpreted as described in RFC 2119.
    However, for readability, these words do not appear in all uppercase
    letters in this specification. </p>
  <p>All of the text of this specification is normative except sections
    explicitly marked as non-normative, examples, and notes. <a data-link-type="biblio" href="#biblio-rfc2119">[RFC2119]</a></p>
  <p>Examples in this specification are introduced with the words “for example”
    or are set apart from the normative text with <code>class="example"</code>,
    like this: </p>
  <div class="example" id="example-f839f6c8">
   <a class="self-link" href="#example-f839f6c8"></a> 
   <p>This is an example of an informative example.</p>
  </div>
  <p>Informative notes begin with the word “Note” and are set apart from the
    normative text with <code>class="note"</code>, like this: </p>
  <p class="note" role="note">Note, this is an informative note.</p>
  <h3 class="no-ref no-num heading settled" id="conformant-algorithms"><span class="content">Conformant Algorithms</span><a class="self-link" href="#conformant-algorithms"></a></h3>
  <p>Requirements phrased in the imperative as part of algorithms (such as
    "strip any leading space characters" or "return false and abort these
    steps") are to be interpreted with the meaning of the key word ("must",
    "should", "may", etc) used in introducing the algorithm.</p>
  <p>Conformance requirements phrased as algorithms or specific steps can be
    implemented in any manner, so long as the end result is equivalent. In
    particular, the algorithms defined in this specification are intended to
    be easy to understand and are not intended to be performant. Implementers
    are encouraged to optimize.</p>
<script src="https://www.w3.org/scripts/TR/2016/fixup.js"></script>
  <h2 class="no-num no-ref heading settled" id="index"><span class="content">Index</span><a class="self-link" href="#index"></a></h2>
  <h3 class="no-num no-ref heading settled" id="index-defined-here"><span class="content">Terms defined by this specification</span><a class="self-link" href="#index-defined-here"></a></h3>
  <ul class="index">
   <li><a href="#dom-passwordcredential-additionaldata">additionalData</a><span>, in §3.1.3</span>
   <li><a href="#request-attached-credential">attached credential</a><span>, in §3.3.1</span>
   <li><a href="#credential-chooser">chooser</a><span>, in §5.3</span>
   <li><a href="#credential">Credential</a><span>, in §3.1.1</span>
   <li><a href="#typedefdef-credentialbodytype">CredentialBodyType</a><span>, in §3.1.3</span>
   <li><a href="#credential-chooser">credential chooser</a><span>, in §5.3</span>
   <li><a href="#dictdef-credentialdata">CredentialData</a><span>, in §3.1.1</span>
   <li><a href="#typedefdef-credentialinfo">CredentialInfo</a><span>, in §3.3.1</span>
   <li><a href="#dictdef-credentialrequestoptions">CredentialRequestOptions</a><span>, in §3.2.1.1</span>
   <li><a href="#credentials">Credentials</a><span>, in §2</span>
   <li>
    credentials
    <ul>
     <li><a href="#dom-navigator-credentials">attribute for Navigator</a><span>, in §3.2</span>
     <li><a href="#dom-requestinit-credentials">dict-member for RequestInit</a><span>, in §3.3.1</span>
    </ul>
   <li><a href="#credentialscontainer">CredentialsContainer</a><span>, in §3.2</span>
   <li><a href="#credential-store">Credential Store</a><span>, in §2</span>
   <li><a href="#does-not-match">Does Not Match</a><span>, in §3.1.2</span>
   <li>
    federated
    <ul>
     <li><a href="#dom-federatedcredential-federated">const for FederatedCredential</a><span>, in §3.1.4</span>
     <li><a href="#dom-credentialrequestoptions-federated">dict-member for CredentialRequestOptions</a><span>, in §3.2.1.1</span>
    </ul>
   <li><a href="#federatedcredential">FederatedCredential</a><span>, in §3.1.4</span>
   <li><a href="#dom-federatedcredential-federatedcredential">FederatedCredential(data)</a><span>, in §3.1.4</span>
   <li><a href="#dictdef-federatedcredentialdata">FederatedCredentialData</a><span>, in §3.1.4</span>
   <li><a href="#dictdef-federatedcredentialrequestoptions">FederatedCredentialRequestOptions</a><span>, in §3.2.1.2</span>
   <li><a href="#federated-credentials">Federated Credentials</a><span>, in §2</span>
   <li><a href="#federated-identity-provider">Federated Identity Provider</a><span>, in §2</span>
   <li><a href="#dom-credentialscontainer-get">get()</a><span>, in §3.2</span>
   <li><a href="#dom-credentialscontainer-get">get(options)</a><span>, in §3.2</span>
   <li>
    iconURL
    <ul>
     <li><a href="#dom-siteboundcredentialdata-iconurl">dict-member for SiteBoundCredentialData</a><span>, in §3.1.1</span>
     <li><a href="#dom-siteboundcredential-iconurl">attribute for SiteBoundCredential</a><span>, in §3.1.2</span>
    </ul>
   <li>
    id
    <ul>
     <li><a href="#dom-credentialdata-id">dict-member for CredentialData</a><span>, in §3.1.1</span>
     <li><a href="#dom-credential-id">attribute for Credential</a><span>, in §3.1.1</span>
    </ul>
   <li><a href="#federated-identity-provider">identity provider</a><span>, in §2</span>
   <li><a href="#dom-passwordcredential-idname">idName</a><span>, in §3.1.3</span>
   <li><a href="#federated-identity-provider">IDP</a><span>, in §2</span>
   <li><a href="#dom-requestcredentialsmode-include">"include"</a><span>, in §3.3.1</span>
   <li><a href="#dom-requestcredentialsmode-include">include</a><span>, in §3.3.1</span>
   <li><a href="#match">Match</a><span>, in §3.1.2</span>
   <li>
    name
    <ul>
     <li><a href="#dom-siteboundcredentialdata-name">dict-member for SiteBoundCredentialData</a><span>, in §3.1.1</span>
     <li><a href="#dom-siteboundcredential-name">attribute for SiteBoundCredential</a><span>, in §3.1.2</span>
    </ul>
   <li><a href="#dom-requestcredentialsmode-omit">"omit"</a><span>, in §3.3.1</span>
   <li><a href="#dom-requestcredentialsmode-omit">omit</a><span>, in §3.3.1</span>
   <li><a href="#options-matching-algorithm">options matching algorithm</a><span>, in §3.1.2</span>
   <li><a href="#dom-siteboundcredential-origin-slot">[[origin]]</a><span>, in §3.1.2</span>
   <li><a href="#dom-requestcredentialsmode-password">"password"</a><span>, in §3.3.1</span>
   <li>
    password
    <ul>
     <li><a href="#dom-passwordcredentialdata-password">dict-member for PasswordCredentialData</a><span>, in §3.1.3</span>
     <li><a href="#dom-passwordcredential-password">const for PasswordCredential</a><span>, in §3.1.3</span>
     <li><a href="#dom-credentialrequestoptions-password">dict-member for CredentialRequestOptions</a><span>, in §3.2.1.1</span>
     <li><a href="#dom-requestcredentialsmode-password">enum-value for RequestCredentialsMode</a><span>, in §3.3.1</span>
    </ul>
   <li><a href="#dom-passwordcredential-password-slot">[[password]]</a><span>, in §3.1.3</span>
   <li><a href="#passwordcredential">PasswordCredential</a><span>, in §3.1.3</span>
   <li><a href="#dom-passwordcredential-passwordcredential-data">PasswordCredential(data)</a><span>, in §3.1.3.2</span>
   <li><a href="#dictdef-passwordcredentialdata">PasswordCredentialData</a><span>, in §3.1.3</span>
   <li><a href="#dom-passwordcredential-passwordcredential">PasswordCredential(form)</a><span>, in §3.1.3.1</span>
   <li><a href="#password-credentials">Password Credentials</a><span>, in §2</span>
   <li><a href="#dom-passwordcredential-passwordname">passwordName</a><span>, in §3.1.3</span>
   <li>
    protocol
    <ul>
     <li><a href="#dom-federatedcredentialdata-protocol">dict-member for FederatedCredentialData</a><span>, in §3.1.4</span>
     <li><a href="#dom-federatedcredential-protocol">attribute for FederatedCredential</a><span>, in §3.1.4</span>
    </ul>
   <li><a href="#dom-federatedcredentialrequestoptions-protocols">protocols</a><span>, in §3.2.1.2</span>
   <li><a href="#protocol-set">protocol set</a><span>, in §2</span>
   <li>
    provider
    <ul>
     <li><a href="#dom-federatedcredentialdata-provider">dict-member for FederatedCredentialData</a><span>, in §3.1.4</span>
     <li><a href="#dom-federatedcredential-provider">attribute for FederatedCredential</a><span>, in §3.1.4</span>
    </ul>
   <li><a href="#dom-federatedcredentialrequestoptions-providers">providers</a><span>, in §3.2.1.2</span>
   <li><a href="#enumdef-requestcredentialsmode">RequestCredentialsMode</a><span>, in §3.3.1</span>
   <li><a href="#requires-user-mediation">requires user mediation</a><span>, in §2</span>
   <li><a href="#dom-credentialscontainer-requireusermediation">requireUserMediation()</a><span>, in §3.2</span>
   <li><a href="#dom-requestcredentialsmode-same-origin">"same-origin"</a><span>, in §3.3.1</span>
   <li><a href="#dom-requestcredentialsmode-same-origin">same-origin</a><span>, in §3.3.1</span>
   <li><a href="#siteboundcredential">SiteBoundCredential</a><span>, in §3.1.1</span>
   <li><a href="#dictdef-siteboundcredentialdata">SiteBoundCredentialData</a><span>, in §3.1.1</span>
   <li><a href="#dom-credentialscontainer-store">store(credential)</a><span>, in §3.2</span>
   <li><a href="#dom-credential-type">type</a><span>, in §3.1.1</span>
   <li><a href="#dom-credential-type-slot">[[type]]</a><span>, in §3.1.1</span>
   <li><a href="#dom-credentialrequestoptions-unmediated">unmediated</a><span>, in §3.2.1.1</span>
  </ul>
  <h3 class="no-num no-ref heading settled" id="index-defined-elsewhere"><span class="content">Terms defined by reference</span><a class="self-link" href="#index-defined-elsewhere"></a></h3>
  <ul class="index">
   <li>
    <a data-link-type="biblio">[CSP]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/webappsec-csp/#child-src">child-src</a>
     <li><a href="https://w3c.github.io/webappsec-csp/#connect-src">connect-src</a>
     <li><a href="https://w3c.github.io/webappsec-csp/#object-src">object-src</a>
     <li><a href="https://w3c.github.io/webappsec-csp/#script-src">script-src</a>
    </ul>
   <li>
    <a data-link-type="biblio">[FETCH]</a> defines the following terms:
    <ul>
     <li><a href="https://fetch.spec.whatwg.org/#body">Body</a>
     <li><a href="https://fetch.spec.whatwg.org/#request">Request</a>
     <li><a href="https://fetch.spec.whatwg.org/#requestcredentials">RequestCredentials</a>
     <li><a href="https://fetch.spec.whatwg.org/#requestinit">RequestInit</a>
     <li><a href="https://fetch.spec.whatwg.org/#response">Response</a>
     <li><a href="https://fetch.spec.whatwg.org/#concept-request-body">body</a>
     <li><a href="https://fetch.spec.whatwg.org/#concept-request-client">client</a>
     <li><a href="https://fetch.spec.whatwg.org/#concept-request-credentials-mode">credentials mode</a>
     <li><a href="https://fetch.spec.whatwg.org/#dom-global-fetch">fetch()</a>
     <li><a href="https://fetch.spec.whatwg.org/#http-network-or-cache-fetch">http-network-or-cache fetch</a>
     <li><a href="https://fetch.spec.whatwg.org/#concept-request-method">method</a>
     <li><a href="https://fetch.spec.whatwg.org/#concept-network-error">network error</a>
     <li><a href="https://fetch.spec.whatwg.org/#concept-request-redirect-mode">redirect mode</a>
     <li><a href="https://fetch.spec.whatwg.org/#concept-request">request</a>
     <li><a href="https://fetch.spec.whatwg.org/#concept-body-stream">stream</a>
     <li><a href="https://fetch.spec.whatwg.org/#concept-request-url">url</a>
    </ul>
   <li>
    <a data-link-type="biblio">[HTML]</a> defines the following terms:
    <ul>
     <li><a href="https://html.spec.whatwg.org/multipage/forms.html#htmlformelement">HTMLFormElement</a>
     <li><a href="https://html.spec.whatwg.org/multipage/#ascii-serialisation-of-an-origin">ascii serialization</a>
     <li><a href="https://html.spec.whatwg.org/multipage/forms.html#autofill-detail-tokens">autofill detail tokens</a>
     <li><a href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-current-password">current-password</a>
     <li><a href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-name">name</a>
     <li><a href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-new-password">new-password</a>
     <li><a href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-nickname">nickname</a>
     <li><a href="https://html.spec.whatwg.org/multipage/#concept-origin">origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-photo">photo</a>
     <li><a href="https://html.spec.whatwg.org/multipage/#concept-origin-effective-domain">same-origin</a>
     <li><a href="https://html.spec.whatwg.org/multipage/forms.html#attr-fe-autocomplete-username">username</a>
    </ul>
   <li>
    <a data-link-type="biblio">[html5]</a> defines the following terms:
    <ul>
     <li><a href="http://www.w3.org/TR/html5/webappapis.html#navigator">Navigator</a>
     <li><a href="http://www.w3.org/TR/html5/infrastructure.html#transferable">Transferable</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#active-document">active document</a>
     <li><a href="http://www.w3.org/TR/html5/infrastructure.html#ascii-case-insensitive">ascii case-insensitive</a>
     <li><a href="http://www.w3.org/TR/html5/forms.html#attr-fe-autocomplete">autocomplete</a>
     <li><a href="http://www.w3.org/TR/html5/forms.html#concept-fs-enctype">enctype</a>
     <li><a href="http://www.w3.org/TR/html5/forms.html#form-owner">form owner</a>
     <li><a href="http://www.w3.org/TR/html5/webappapis.html#incumbent-settings-object">incumbent settings object</a>
     <li><a href="http://www.w3.org/TR/html5/infrastructure.html#internal-structured-cloning-algorithm">internal structured cloning algorithm</a>
     <li><a href="http://www.w3.org/TR/html5/forms.html#multipart/form-data-boundary-string">multipart/form-data boundary string</a>
     <li><a href="http://www.w3.org/TR/html5/forms.html#multipart/form-data-encoding-algorithm">multipart/form-data encoding algorithm</a>
     <li><a href="http://www.w3.org/TR/html5/forms.html#attr-fe-name">name</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#nested-browsing-context">nested browsing context</a>
     <li><a href="http://www.w3.org/TR/html5/webappapis.html#responsible-document">responsible document</a>
     <li><a href="http://www.w3.org/TR/html5/infrastructure.html#structured-clone">structured clone</a>
     <li><a href="http://www.w3.org/TR/html5/forms.html#category-submit">submittable elements</a>
     <li><a href="http://www.w3.org/TR/html5/browsers.html#top-level-browsing-context">top-level browsing context</a>
     <li><a href="http://www.w3.org/TR/html5/infrastructure.html#tree-order">tree order</a>
    </ul>
   <li>
    <a data-link-type="biblio">[mixed-content]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/webappsec-mixed-content/#a-priori-authenticated-url">a priori authenticated url</a>
    </ul>
   <li>
    <a data-link-type="biblio">[PSL]</a> defines the following terms:
    <ul>
     <li><a href="https://publicsuffix.org/list/#">registerable domain</a>
    </ul>
   <li>
    <a data-link-type="biblio">[secure-contexts]</a> defines the following terms:
    <ul>
     <li><a href="https://w3c.github.io/webappsec-secure-contexts/#secure-context">secure context</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WHATWG-URL]</a> defines the following terms:
    <ul>
     <li><a href="https://url.spec.whatwg.org/#dom-urlsearchparams">URLSearchParams</a>
     <li><a href="https://url.spec.whatwg.org/#dom-urlsearchparams-append">append()</a>
     <li><a href="https://url.spec.whatwg.org/#concept-urlencoded-serializer">application/x-www-form-urlencoded serializer</a>
     <li><a href="https://url.spec.whatwg.org/#concept-url-host">host</a>
     <li><a href="https://url.spec.whatwg.org/#concept-urlsearchparams-list">list</a>
     <li><a href="https://url.spec.whatwg.org/#concept-url-origin">origin</a>
     <li><a href="https://url.spec.whatwg.org/#concept-url-scheme">scheme</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WebIDL]</a> defines the following terms:
    <ul>
     <li><a href="https://heycam.github.io/webidl/#idl-DOMString">DOMString</a>
     <li><a href="https://heycam.github.io/webidl/#Exposed">Exposed</a>
     <li><a href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>
     <li><a href="https://heycam.github.io/webidl/#idl-USVString">USVString</a>
     <li><a href="https://heycam.github.io/webidl/#idl-boolean">boolean</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-interface">interface</a>
     <li><a href="https://heycam.github.io/webidl/#dfn-throw">throw</a>
    </ul>
   <li>
    <a data-link-type="biblio">[WEBMESSAGING]</a> defines the following terms:
    <ul>
     <li><a href="http://www.w3.org/TR/webmessaging/#dom-window-postmessage">postMessage()</a>
    </ul>
   <li>
    <a data-link-type="biblio">[XHR]</a> defines the following terms:
    <ul>
     <li><a href="https://xhr.spec.whatwg.org/#interface-formdata">FormData</a>
     <li><a href="https://xhr.spec.whatwg.org/#interface-xmlhttprequest">XMLHttpRequest</a>
     <li><a href="https://xhr.spec.whatwg.org/#concept-formdata-entry">entries</a>
     <li><a href="https://xhr.spec.whatwg.org/#concept-formdata-entry">entry</a>
     <li><a href="https://xhr.spec.whatwg.org/#dom-formdata-get">get()</a>
     <li><a href="https://xhr.spec.whatwg.org/#dom-formdata-has">has()</a>
     <li><a href="https://xhr.spec.whatwg.org/#concept-formdata-entry-name">name</a>
     <li><a href="https://xhr.spec.whatwg.org/#concept-formdata-entry-type">type</a>
     <li><a href="https://xhr.spec.whatwg.org/#concept-formdata-entry-value">value</a>
    </ul>
  </ul>
  <h2 class="no-num no-ref heading settled" id="references"><span class="content">References</span><a class="self-link" href="#references"></a></h2>
  <h3 class="no-num no-ref heading settled" id="normative"><span class="content">Normative References</span><a class="self-link" href="#normative"></a></h3>
  <dl>
   <dt id="biblio-csp">[CSP]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-csp/">Content Security Policy Level 3</a>. URL: <a href="https://w3c.github.io/webappsec-csp/">https://w3c.github.io/webappsec-csp/</a>
   <dt id="biblio-fetch">[FETCH]
   <dd>Anne van Kesteren. <a href="https://fetch.spec.whatwg.org/">Fetch Standard</a>. Living Standard. URL: <a href="https://fetch.spec.whatwg.org/">https://fetch.spec.whatwg.org/</a>
   <dt id="biblio-html">[HTML]
   <dd>Anne van Kesteren; et al. <a href="https://html.spec.whatwg.org/multipage/">HTML Standard</a>. Living Standard. URL: <a href="https://html.spec.whatwg.org/multipage/">https://html.spec.whatwg.org/multipage/</a>
   <dt id="biblio-html5">[HTML5]
   <dd>Ian Hickson; et al. <a href="https://www.w3.org/html/wg/drafts/html/master/">HTML5</a>. URL: <a href="https://www.w3.org/html/wg/drafts/html/master/">https://www.w3.org/html/wg/drafts/html/master/</a>
   <dt id="biblio-mixed-content">[MIXED-CONTENT]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-mixed-content/">Mixed Content</a>. URL: <a href="https://w3c.github.io/webappsec-mixed-content/">https://w3c.github.io/webappsec-mixed-content/</a>
   <dt id="biblio-psl">[PSL]
   <dd>Mozilla Foundation. <a href="https://publicsuffix.org/">Public Suffix List</a>. URL: <a href="https://publicsuffix.org/">https://publicsuffix.org/</a>
   <dt id="biblio-rfc2119">[RFC2119]
   <dd>S. Bradner. <a href="https://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>. March 1997. Best Current Practice. URL: <a href="https://tools.ietf.org/html/rfc2119">https://tools.ietf.org/html/rfc2119</a>
   <dt id="biblio-secure-contexts">[SECURE-CONTEXTS]
   <dd>Mike West. <a href="https://w3c.github.io/webappsec-secure-contexts/">Secure Contexts</a>. URL: <a href="https://w3c.github.io/webappsec-secure-contexts/">https://w3c.github.io/webappsec-secure-contexts/</a>
   <dt id="biblio-webidl">[WebIDL]
   <dd>Cameron McCormack; Boris Zbarsky; Tobie Langel. <a href="https://heycam.github.io/webidl/">Web IDL</a>. URL: <a href="https://heycam.github.io/webidl/">https://heycam.github.io/webidl/</a>
   <dt id="biblio-webmessaging">[WEBMESSAGING]
   <dd>Ian Hickson. <a href="http://dev.w3.org/html5/postmsg/">HTML5 Web Messaging</a>. URL: <a href="http://dev.w3.org/html5/postmsg/">http://dev.w3.org/html5/postmsg/</a>
   <dt id="biblio-whatwg-url">[WHATWG-URL]
   <dd>Anne van Kesteren. <a href="https://url.spec.whatwg.org/">URL Standard</a>. Living Standard. URL: <a href="https://url.spec.whatwg.org/">https://url.spec.whatwg.org/</a>
   <dt id="biblio-xhr">[XHR]
   <dd>Anne van Kesteren. <a href="https://xhr.spec.whatwg.org/">XMLHttpRequest Standard</a>. Living Standard. URL: <a href="https://xhr.spec.whatwg.org/">https://xhr.spec.whatwg.org/</a>
  </dl>
  <h3 class="no-num no-ref heading settled" id="informative"><span class="content">Informative References</span><a class="self-link" href="#informative"></a></h3>
  <dl>
   <dt id="biblio-browserid">[BROWSERID]
   <dd>Ben Adida; et al. <a href="https://github.com/mozilla/id-specs/blob/prod/browserid/index.md">BrowserID</a>. 26 February 2013. URL: <a href="https://github.com/mozilla/id-specs/blob/prod/browserid/index.md">https://github.com/mozilla/id-specs/blob/prod/browserid/index.md</a>
   <dt id="biblio-manifest">[MANIFEST]
   <dd>Marcos Caceres; Anssi Kostiainen; Kenneth Rohde Christiansen; et al. <a href="http://w3c.github.io/manifest/">Manifest for web application</a>. WD. URL: <a href="http://w3c.github.io/manifest/">http://w3c.github.io/manifest/</a>
   <dt id="biblio-sri">[SRI]
   <dd>Devdatta Akhawe; et al. <a href="https://w3c.github.io/webappsec-subresource-integrity/">Subresource Integrity</a>. URL: <a href="https://w3c.github.io/webappsec-subresource-integrity/">https://w3c.github.io/webappsec-subresource-integrity/</a>
   <dt id="biblio-web-login">[WEB-LOGIN]
   <dd>Jason Denizac; Robin Berjon; Anne van Kesteren. <a href="https://github.com/jden/web-login">web-login</a>. URL: <a href="https://github.com/jden/web-login">https://github.com/jden/web-login</a>
   <dt id="biblio-workers">[WORKERS]
   <dd>Ian Hickson. <a href="https://html.spec.whatwg.org/multipage/workers.html">Web Workers</a>. URL: <a href="https://html.spec.whatwg.org/multipage/workers.html">https://html.spec.whatwg.org/multipage/workers.html</a>
   <dt id="biblio-xmlhttprequest">[XMLHTTPREQUEST]
   <dd>Anne van Kesteren; et al. <a href="https://xhr.spec.whatwg.org/">XMLHttpRequest Level 1</a>. URL: <a href="https://xhr.spec.whatwg.org/">https://xhr.spec.whatwg.org/</a>
  </dl>
  <h2 class="no-num no-ref heading settled" id="idl-index"><span class="content">IDL Index</span><a class="self-link" href="#idl-index"></a></h2>
<pre class="idl def"><span class="kt">dictionary</span> <a class="nv" href="#dictdef-credentialdata">CredentialData</a> {
  <span class="kt">required</span> <span class="kt">USVString</span> <a class="nv" data-type="USVString " href="#dom-credentialdata-id">id</a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>] <span class="kt">interface</span> <a class="nv" href="#credential">Credential</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-credential-id">id</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString" href="#dom-credential-type">type</a>;
};
<a class="n" data-link-type="idl-name" href="#credential">Credential</a> <span class="kt">implements</span> <a class="n" data-link-type="idl-name" href="http://www.w3.org/TR/html5/infrastructure.html#transferable">Transferable</a>;

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-siteboundcredentialdata">SiteBoundCredentialData</a> : <a class="n" data-link-type="idl-name" href="#dictdef-credentialdata">CredentialData</a> {
  <span class="kt">USVString</span> <a class="nv" data-type="USVString " href="#dom-siteboundcredentialdata-name">name</a>;
  <span class="kt">USVString</span> <a class="nv" data-type="USVString " href="#dom-siteboundcredentialdata-iconurl">iconURL</a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>] <span class="kt">interface</span> <a class="nv" href="#siteboundcredential">SiteBoundCredential</a> : <a class="n" data-link-type="idl-name" href="#credential">Credential</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-siteboundcredential-name">name</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-siteboundcredential-iconurl">iconURL</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-passwordcredentialdata">PasswordCredentialData</a> : <a class="n" data-link-type="idl-name" href="#dictdef-siteboundcredentialdata">SiteBoundCredentialData</a> {
  <span class="kt">required</span> <span class="kt">USVString</span> <a class="nv" data-type="USVString " href="#dom-passwordcredentialdata-password">password</a>;
};

<span class="kt">typedef</span> (<a class="n" data-link-type="idl-name" href="https://xhr.spec.whatwg.org/#interface-formdata">FormData</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="https://url.spec.whatwg.org/#dom-urlsearchparams">URLSearchParams</a>) <a class="nv" href="#typedefdef-credentialbodytype">CredentialBodyType</a>;

[<a class="nv idl-code" data-link-type="constructor" href="#dom-passwordcredential-passwordcredential-data">Constructor</a>(<a class="n" data-link-type="idl-name" href="#dictdef-passwordcredentialdata">PasswordCredentialData</a> <a class="nv" href="#dom-passwordcredential-passwordcredential-data-data">data</a>),
 <a class="nv idl-code" data-link-type="constructor" href="#dom-passwordcredential-passwordcredential">Constructor</a>(<a class="n" data-link-type="idl-name" href="https://html.spec.whatwg.org/multipage/forms.html#htmlformelement">HTMLFormElement</a> <a class="nv" href="#dom-passwordcredential-passwordcredential-form-form">form</a>),
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<span class="n">Window</span>,
 <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>]
<span class="kt">interface</span> <a class="nv" href="#passwordcredential">PasswordCredential</a> : <a class="n" data-link-type="idl-name" href="#siteboundcredential">SiteBoundCredential</a> {
  <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-passwordcredential-idname">idName</a>;
  <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-type="USVString" href="#dom-passwordcredential-passwordname">passwordName</a>;

  <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#typedefdef-credentialbodytype">CredentialBodyType</a>? <a class="nv idl-code" data-link-type="attribute" data-type="CredentialBodyType?" href="#dom-passwordcredential-additionaldata">additionalData</a>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-federatedcredentialdata">FederatedCredentialData</a> : <a class="n" data-link-type="idl-name" href="#dictdef-siteboundcredentialdata">SiteBoundCredentialData</a> {
  <span class="kt">required</span> <span class="kt">USVString</span> <a class="nv" data-type="USVString " href="#dom-federatedcredentialdata-provider">provider</a>;
  <span class="kt">DOMString</span> <a class="nv" data-type="DOMString " href="#dom-federatedcredentialdata-protocol">protocol</a>;
};

[<a class="nv" href="#dom-federatedcredential-federatedcredential">Constructor</a>(<a class="n" data-link-type="idl-name" href="#dictdef-federatedcredentialdata">FederatedCredentialData</a> <a class="nv" href="#dom-federatedcredential-federatedcredential-data-data">data</a>), <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#Exposed">Exposed</a>=<span class="n">Window</span>, <a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>]
<span class="kt">interface</span> <a class="nv" href="#federatedcredential">FederatedCredential</a> : <a class="n" data-link-type="idl-name" href="#siteboundcredential">SiteBoundCredential</a> {
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">USVString</span> <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="USVString" href="#dom-federatedcredential-provider">provider</a>;
  <span class="kt">readonly</span> <span class="kt">attribute</span> <span class="kt">DOMString</span>? <a class="nv idl-code" data-link-type="attribute" data-readonly="" data-type="DOMString?" href="#dom-federatedcredential-protocol">protocol</a>;
};

<span class="kt">partial</span> <span class="kt">interface</span> <a class="nv idl-code" data-link-type="interface" href="http://www.w3.org/TR/html5/webappapis.html#navigator">Navigator</a> {
  [<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>] <span class="kt">readonly</span> <span class="kt">attribute</span> <a class="n" data-link-type="idl-name" href="#credentialscontainer">CredentialsContainer</a> <a class="nv" data-readonly="" data-type="CredentialsContainer" href="#dom-navigator-credentials">credentials</a>;
};

[<a class="nv idl-code" data-link-type="extended-attribute" href="https://heycam.github.io/webidl/#SecureContext">SecureContext</a>] <span class="kt">interface</span> <a class="nv" href="#credentialscontainer">CredentialsContainer</a> {
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#credential">Credential</a>?> <a class="nv idl-code" data-link-type="method" href="#dom-credentialscontainer-get">get</a>(<span class="kt">optional</span> <a class="n" data-link-type="idl-name" href="#dictdef-credentialrequestoptions">CredentialRequestOptions</a> <a class="nv idl-code" data-link-type="argument" href="#dom-credentialscontainer-get-options-options">options</a>);
  <span class="kt">Promise</span>&lt;<a class="n" data-link-type="idl-name" href="#credential">Credential</a>> <a class="nv idl-code" data-link-type="method" href="#dom-credentialscontainer-store">store</a>(<a class="n" data-link-type="idl-name" href="#credential">Credential</a> <a class="nv idl-code" data-link-type="argument" href="#dom-credentialscontainer-store-credential-credential">credential</a>);
  <span class="kt">Promise</span>&lt;<span class="kt">void</span>> <a class="nv idl-code" data-link-type="method" href="#dom-credentialscontainer-requireusermediation">requireUserMediation</a>();
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-credentialrequestoptions">CredentialRequestOptions</a> {
  <span class="kt">boolean</span> <a class="nv idl-code" data-default="false" data-link-type="dict-member" data-type="boolean " href="#dom-credentialrequestoptions-password">password</a> = <span class="kt">false</span>;
  <a class="n" data-link-type="idl-name" href="#dictdef-federatedcredentialrequestoptions">FederatedCredentialRequestOptions</a> <a class="nv idl-code" data-link-type="dict-member" data-type="FederatedCredentialRequestOptions " href="#dom-credentialrequestoptions-federated">federated</a>;

  <span class="kt">boolean</span> <a class="nv idl-code" data-default="false" data-link-type="dict-member" data-type="boolean " href="#dom-credentialrequestoptions-unmediated">unmediated</a> = <span class="kt">false</span>;
};

<span class="kt">dictionary</span> <a class="nv" href="#dictdef-federatedcredentialrequestoptions">FederatedCredentialRequestOptions</a> {
  <span class="kt">sequence</span>&lt;<span class="kt">USVString</span>> <a class="nv idl-code" data-link-type="dict-member" data-type="sequence<USVString> " href="#dom-federatedcredentialrequestoptions-providers">providers</a>;
  <span class="kt">sequence</span>&lt;<span class="kt">DOMString</span>> <a class="nv idl-code" data-link-type="dict-member" data-type="sequence<DOMString> " href="#dom-federatedcredentialrequestoptions-protocols">protocols</a>;
};

<span class="kt">enum</span> <a class="nv" href="#enumdef-requestcredentialsmode">RequestCredentialsMode</a> { <a class="s" href="#dom-requestcredentialsmode-omit">"omit"</a>, <a class="s" href="#dom-requestcredentialsmode-same-origin">"same-origin"</a>, <a class="s" href="#dom-requestcredentialsmode-include">"include"</a>, <a class="s" href="#dom-requestcredentialsmode-password">"password"</a> };

<span class="kt">typedef</span> (<a class="n" data-link-type="idl-name" href="#passwordcredential">PasswordCredential</a> <span class="kt">or</span> <a class="n" data-link-type="idl-name" href="https://fetch.spec.whatwg.org/#requestcredentials">RequestCredentials</a>) <a class="nv" href="#typedefdef-credentialinfo">CredentialInfo</a>;

<span class="kt">partial</span> <span class="kt">dictionary</span> <a class="nv idl-code" data-link-type="dictionary" href="https://fetch.spec.whatwg.org/#requestinit">RequestInit</a> {
  <a class="n" data-link-type="idl-name" href="#typedefdef-credentialinfo">CredentialInfo</a> <a class="nv" data-type="CredentialInfo " href="#dom-requestinit-credentials">credentials</a>;
};

</pre>
  <h2 class="no-num no-ref heading settled" id="issues-index"><span class="content">Issues Index</span><a class="self-link" href="#issues-index"></a></h2>
  <div style="counter-reset:issue">
   <div class="issue"> Anne suggests that this might be better modeled
      as an <code>ImageBitmap</code> or <code>blob:</code>. We also need to
      figure out responsiveness. Perhaps <a data-link-type="biblio" href="#biblio-manifest">[MANIFEST]</a>'s format? <a href="https://github.com/w3c/webappsec/issues/247">&lt;https://github.com/w3c/webappsec/issues/247></a><a href="#issue-c874d302"> ↵ </a></div>
   <div class="issue"> These patches are combined into an outstanding
  pull request against Fetch. <a href="https://github.com/whatwg/fetch/issues/237">&lt;https://github.com/whatwg/fetch/issues/237></a><a href="#issue-25d38e5c"> ↵ </a></div>
   <div class="issue"> Add some thoughts here about when and how the API
  should be used, especially with regard to <code class="idl"><a data-link-type="idl" href="#dom-credentialrequestoptions-unmediated">unmediated</a></code>. <a href="https://github.com/w3c/webappsec/issues/290">&lt;https://github.com/w3c/webappsec/issues/290></a><a href="#issue-98e04f89"> ↵ </a></div>
  </div>
  <aside class="dfn-panel" data-for="credentials">
   <b><a href="#credentials">#credentials</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-credentials-1">1. Introduction</a> <a href="#ref-for-credentials-2">(2)</a>
    <li><a href="#ref-for-credentials-3">3.1. Credential Types</a> <a href="#ref-for-credentials-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="password-credentials">
   <b><a href="#password-credentials">#password-credentials</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-password-credentials-1">3.1. Credential Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="federated-credentials">
   <b><a href="#federated-credentials">#federated-credentials</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-federated-credentials-1">3.1. Credential Types</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="credential-store">
   <b><a href="#credential-store">#credential-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-credential-store-1">3.1. Credential Types</a>
    <li><a href="#ref-for-credential-store-2">4.1.2. 
    Store a Credential </a>
    <li><a href="#ref-for-credential-store-3">4.2.1. 
    Gather SiteBoundCredentials </a> <a href="#ref-for-credential-store-4">(2)</a>
    <li><a href="#ref-for-credential-store-5">4.2.2. 
    Request an SiteBoundCredential without user mediation </a>
    <li><a href="#ref-for-credential-store-6">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-credential-store-7">(2)</a> <a href="#ref-for-credential-store-8">(3)</a>
    <li><a href="#ref-for-credential-store-9">4.3.1. 
    Require user mediation for origin </a>
    <li><a href="#ref-for-credential-store-10">5.2. Requiring User Mediation</a>
    <li><a href="#ref-for-credential-store-11">6.5. Script Injection</a>
    <li><a href="#ref-for-credential-store-12">7.2. Signing-Out</a>
    <li><a href="#ref-for-credential-store-13">7.4. Locally Stored Data</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="requires-user-mediation">
   <b><a href="#requires-user-mediation">#requires-user-mediation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-requires-user-mediation-1">4.2.2. 
    Request an SiteBoundCredential without user mediation </a>
    <li><a href="#ref-for-requires-user-mediation-2">4.3.1. 
    Require user mediation for origin </a>
    <li><a href="#ref-for-requires-user-mediation-3">5.2. Requiring User Mediation</a> <a href="#ref-for-requires-user-mediation-4">(2)</a>
    <li><a href="#ref-for-requires-user-mediation-5">7.2. Signing-Out</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="protocol-set">
   <b><a href="#protocol-set">#protocol-set</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-protocol-set-1">7.4. Locally Stored Data</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="federated-identity-provider">
   <b><a href="#federated-identity-provider">#federated-identity-provider</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-federated-identity-provider-1">1. Introduction</a>
    <li><a href="#ref-for-federated-identity-provider-2">1.2.2. Federated Sign-in</a>
    <li><a href="#ref-for-federated-identity-provider-3">1.2.3. Post-sign-in Confirmation</a>
    <li><a href="#ref-for-federated-identity-provider-4">2. Key Concepts and Terminology</a>
    <li><a href="#ref-for-federated-identity-provider-5">3.1.4. FederatedCredential</a> <a href="#ref-for-federated-identity-provider-6">(2)</a>
    <li><a href="#ref-for-federated-identity-provider-7">3.2.2. Identifying providers</a>
    <li><a href="#ref-for-federated-identity-provider-8">9. Future Work</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-credentialdata">
   <b><a href="#dictdef-credentialdata">#dictdef-credentialdata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-credentialdata-1">3.1.1. Credential</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credentialdata-id">
   <b><a href="#dom-credentialdata-id">#dom-credentialdata-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialdata-id-1">1.2.3. Post-sign-in Confirmation</a>
    <li><a href="#ref-for-dom-credentialdata-id-2">3.1.3.1. 
    PasswordCredential(HTMLFormElement form) Constructor </a>
    <li><a href="#ref-for-dom-credentialdata-id-3">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a> <a href="#ref-for-dom-credentialdata-id-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="credential">
   <b><a href="#credential">#credential</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-credential-1">2. Key Concepts and Terminology</a>
    <li><a href="#ref-for-credential-2">3.1. Credential Types</a>
    <li><a href="#ref-for-credential-3">3.1.1. Credential</a> <a href="#ref-for-credential-4">(2)</a> <a href="#ref-for-credential-5">(3)</a> <a href="#ref-for-credential-6">(4)</a> <a href="#ref-for-credential-7">(5)</a>
    <li><a href="#ref-for-credential-8">3.2. Credential Manager</a> <a href="#ref-for-credential-9">(2)</a> <a href="#ref-for-credential-10">(3)</a> <a href="#ref-for-credential-11">(4)</a> <a href="#ref-for-credential-12">(5)</a> <a href="#ref-for-credential-13">(6)</a>
    <li><a href="#ref-for-credential-14">3.2.1. 
    get() Parameters </a>
    <li><a href="#ref-for-credential-15">3.2.1.1. 
    CredentialRequestOptions dictionary </a> <a href="#ref-for-credential-16">(2)</a> <a href="#ref-for-credential-17">(3)</a> <a href="#ref-for-credential-18">(4)</a>
    <li><a href="#ref-for-credential-19">3.2.1.2. 
    FederatedCredentialRequestOptions dictionary </a>
    <li><a href="#ref-for-credential-20">4.1.1. 
    Request a Credential </a> <a href="#ref-for-credential-21">(2)</a> <a href="#ref-for-credential-22">(3)</a>
    <li><a href="#ref-for-credential-23">4.1.2. 
    Store a Credential </a>
    <li><a href="#ref-for-credential-24">4.1.3. 
    Clone credential </a> <a href="#ref-for-credential-25">(2)</a>
    <li><a href="#ref-for-credential-26">4.2.1. 
    Gather SiteBoundCredentials </a>
    <li><a href="#ref-for-credential-27">4.2.2. 
    Request an SiteBoundCredential without user mediation </a> <a href="#ref-for-credential-28">(2)</a> <a href="#ref-for-credential-29">(3)</a>
    <li><a href="#ref-for-credential-30">4.2.3. 
    Request a SiteBoundCredential with user mediation </a> <a href="#ref-for-credential-31">(2)</a>
    <li><a href="#ref-for-credential-32">5.2. Requiring User Mediation</a> <a href="#ref-for-credential-33">(2)</a> <a href="#ref-for-credential-34">(3)</a>
    <li><a href="#ref-for-credential-35">5.3. Credential Selection</a> <a href="#ref-for-credential-36">(2)</a>
    <li><a href="#ref-for-credential-37">6.1. Cross-origin Credential Leakage</a>
    <li><a href="#ref-for-credential-38">6.3. Origin Confusion</a>
    <li><a href="#ref-for-credential-39">7.3. Chooser Leakage</a> <a href="#ref-for-credential-40">(2)</a> <a href="#ref-for-credential-41">(3)</a>
    <li><a href="#ref-for-credential-42">7.4. Locally Stored Data</a>
    <li><a href="#ref-for-credential-43">8.2. Extension Points</a> <a href="#ref-for-credential-44">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credential-id">
   <b><a href="#dom-credential-id">#dom-credential-id</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credential-id-1">3.1.1. Credential</a>
    <li><a href="#ref-for-dom-credential-id-2">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
    <li><a href="#ref-for-dom-credential-id-3">3.3.2. 
    Extract a body and Content-Type for request’s attached credential </a> <a href="#ref-for-dom-credential-id-4">(2)</a>
    <li><a href="#ref-for-dom-credential-id-5">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-dom-credential-id-6">(2)</a> <a href="#ref-for-dom-credential-id-7">(3)</a> <a href="#ref-for-dom-credential-id-8">(4)</a> <a href="#ref-for-dom-credential-id-9">(5)</a> <a href="#ref-for-dom-credential-id-10">(6)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credential-type">
   <b><a href="#dom-credential-type">#dom-credential-type</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credential-type-1">3.1.1. Credential</a> <a href="#ref-for-dom-credential-type-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credential-type-slot">
   <b><a href="#dom-credential-type-slot">#dom-credential-type-slot</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credential-type-slot-1">3.1.1. Credential</a> <a href="#ref-for-dom-credential-type-slot-2">(2)</a> <a href="#ref-for-dom-credential-type-slot-3">(3)</a> <a href="#ref-for-dom-credential-type-slot-4">(4)</a> <a href="#ref-for-dom-credential-type-slot-5">(5)</a>
    <li><a href="#ref-for-dom-credential-type-slot-6">3.1.3. PasswordCredential</a> <a href="#ref-for-dom-credential-type-slot-7">(2)</a>
    <li><a href="#ref-for-dom-credential-type-slot-8">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
    <li><a href="#ref-for-dom-credential-type-slot-9">3.1.4. FederatedCredential</a> <a href="#ref-for-dom-credential-type-slot-10">(2)</a>
    <li><a href="#ref-for-dom-credential-type-slot-11">4.1.1. 
    Request a Credential </a>
    <li><a href="#ref-for-dom-credential-type-slot-12">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-dom-credential-type-slot-13">(2)</a>
    <li><a href="#ref-for-dom-credential-type-slot-14">8.2. Extension Points</a> <a href="#ref-for-dom-credential-type-slot-15">(2)</a> <a href="#ref-for-dom-credential-type-slot-16">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-siteboundcredentialdata">
   <b><a href="#dictdef-siteboundcredentialdata">#dictdef-siteboundcredentialdata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-siteboundcredentialdata-1">3.1.3. PasswordCredential</a>
    <li><a href="#ref-for-dictdef-siteboundcredentialdata-2">3.1.4. FederatedCredential</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-siteboundcredentialdata-name">
   <b><a href="#dom-siteboundcredentialdata-name">#dom-siteboundcredentialdata-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-siteboundcredentialdata-name-1">3.1.3.1. 
    PasswordCredential(HTMLFormElement form) Constructor </a>
    <li><a href="#ref-for-dom-siteboundcredentialdata-name-2">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-siteboundcredentialdata-iconurl">
   <b><a href="#dom-siteboundcredentialdata-iconurl">#dom-siteboundcredentialdata-iconurl</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-siteboundcredentialdata-iconurl-1">3.1.3.1. 
    PasswordCredential(HTMLFormElement form) Constructor </a>
    <li><a href="#ref-for-dom-siteboundcredentialdata-iconurl-2">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="siteboundcredential">
   <b><a href="#siteboundcredential">#siteboundcredential</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-siteboundcredential-1">3.1. Credential Types</a> <a href="#ref-for-siteboundcredential-2">(2)</a>
    <li><a href="#ref-for-siteboundcredential-3">3.1.2. 
    SiteBoundCredential </a> <a href="#ref-for-siteboundcredential-4">(2)</a>
    <li><a href="#ref-for-siteboundcredential-5">3.1.3. PasswordCredential</a>
    <li><a href="#ref-for-siteboundcredential-6">3.1.4. FederatedCredential</a>
    <li><a href="#ref-for-siteboundcredential-7">4.1.1. 
    Request a Credential </a> <a href="#ref-for-siteboundcredential-8">(2)</a>
    <li><a href="#ref-for-siteboundcredential-9">4.1.2. 
    Store a Credential </a> <a href="#ref-for-siteboundcredential-10">(2)</a>
    <li><a href="#ref-for-siteboundcredential-11">4.2.1. 
    Gather SiteBoundCredentials </a>
    <li><a href="#ref-for-siteboundcredential-12">4.2.2. 
    Request an SiteBoundCredential without user mediation </a>
    <li><a href="#ref-for-siteboundcredential-13">4.2.3. 
    Request a SiteBoundCredential with user mediation </a>
    <li><a href="#ref-for-siteboundcredential-14">4.2.4. 
    Store SiteBoundCredential </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-siteboundcredential-name">
   <b><a href="#dom-siteboundcredential-name">#dom-siteboundcredential-name</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-siteboundcredential-name-1">3.1.1. Credential</a>
    <li><a href="#ref-for-dom-siteboundcredential-name-2">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
    <li><a href="#ref-for-dom-siteboundcredential-name-3">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-dom-siteboundcredential-name-4">(2)</a> <a href="#ref-for-dom-siteboundcredential-name-5">(3)</a> <a href="#ref-for-dom-siteboundcredential-name-6">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-siteboundcredential-iconurl">
   <b><a href="#dom-siteboundcredential-iconurl">#dom-siteboundcredential-iconurl</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-siteboundcredential-iconurl-1">3.1.1. Credential</a>
    <li><a href="#ref-for-dom-siteboundcredential-iconurl-2">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
    <li><a href="#ref-for-dom-siteboundcredential-iconurl-3">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-dom-siteboundcredential-iconurl-4">(2)</a> <a href="#ref-for-dom-siteboundcredential-iconurl-5">(3)</a> <a href="#ref-for-dom-siteboundcredential-iconurl-6">(4)</a> <a href="#ref-for-dom-siteboundcredential-iconurl-7">(5)</a> <a href="#ref-for-dom-siteboundcredential-iconurl-8">(6)</a>
    <li><a href="#ref-for-dom-siteboundcredential-iconurl-9">7.3. Chooser Leakage</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-siteboundcredential-origin-slot">
   <b><a href="#dom-siteboundcredential-origin-slot">#dom-siteboundcredential-origin-slot</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-siteboundcredential-origin-slot-1">3.1.2. 
    SiteBoundCredential </a>
    <li><a href="#ref-for-dom-siteboundcredential-origin-slot-2">4.2.1. 
    Gather SiteBoundCredentials </a>
    <li><a href="#ref-for-dom-siteboundcredential-origin-slot-3">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-dom-siteboundcredential-origin-slot-4">(2)</a> <a href="#ref-for-dom-siteboundcredential-origin-slot-5">(3)</a> <a href="#ref-for-dom-siteboundcredential-origin-slot-6">(4)</a> <a href="#ref-for-dom-siteboundcredential-origin-slot-7">(5)</a>
    <li><a href="#ref-for-dom-siteboundcredential-origin-slot-8">4.3.2. 
    Does credential match origin B? </a>
    <li><a href="#ref-for-dom-siteboundcredential-origin-slot-9">6.1. Cross-origin Credential Leakage</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="options-matching-algorithm">
   <b><a href="#options-matching-algorithm">#options-matching-algorithm</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-options-matching-algorithm-1">3.1.3.3. 
    Matching Algorithm </a>
    <li><a href="#ref-for-options-matching-algorithm-2">3.1.4.1. 
    Matching Algorithm </a>
    <li><a href="#ref-for-options-matching-algorithm-3">3.2. Credential Manager</a>
    <li><a href="#ref-for-options-matching-algorithm-4">4.2.1. 
    Gather SiteBoundCredentials </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="match">
   <b><a href="#match">#match</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-match-1">3.1.3.3. 
    Matching Algorithm </a>
    <li><a href="#ref-for-match-2">3.1.4.1. 
    Matching Algorithm </a> <a href="#ref-for-match-3">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="does-not-match">
   <b><a href="#does-not-match">#does-not-match</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-does-not-match-1">3.1.4.1. 
    Matching Algorithm </a>
    <li><a href="#ref-for-does-not-match-2">4.2.1. 
    Gather SiteBoundCredentials </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-passwordcredentialdata">
   <b><a href="#dictdef-passwordcredentialdata">#dictdef-passwordcredentialdata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-passwordcredentialdata-1">3.1.3. PasswordCredential</a>
    <li><a href="#ref-for-dictdef-passwordcredentialdata-2">3.1.3.1. 
    PasswordCredential(HTMLFormElement form) Constructor </a>
    <li><a href="#ref-for-dictdef-passwordcredentialdata-3">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-passwordcredentialdata-password">
   <b><a href="#dom-passwordcredentialdata-password">#dom-passwordcredentialdata-password</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-passwordcredentialdata-password-1">3.1.3.1. 
    PasswordCredential(HTMLFormElement form) Constructor </a> <a href="#ref-for-dom-passwordcredentialdata-password-2">(2)</a>
    <li><a href="#ref-for-dom-passwordcredentialdata-password-3">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a> <a href="#ref-for-dom-passwordcredentialdata-password-4">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedefdef-credentialbodytype">
   <b><a href="#typedefdef-credentialbodytype">#typedefdef-credentialbodytype</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-typedefdef-credentialbodytype-1">3.1.3. PasswordCredential</a> <a href="#ref-for-typedefdef-credentialbodytype-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="passwordcredential">
   <b><a href="#passwordcredential">#passwordcredential</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-passwordcredential-1">1.2.3. Post-sign-in Confirmation</a> <a href="#ref-for-passwordcredential-2">(2)</a>
    <li><a href="#ref-for-passwordcredential-3">1.2.4. Change Password</a>
    <li><a href="#ref-for-passwordcredential-4">1.2.5. Layering on top of a legacy system</a> <a href="#ref-for-passwordcredential-5">(2)</a> <a href="#ref-for-passwordcredential-6">(3)</a> <a href="#ref-for-passwordcredential-7">(4)</a>
    <li><a href="#ref-for-passwordcredential-8">3.1. Credential Types</a>
    <li><a href="#ref-for-passwordcredential-9">3.1.1. Credential</a>
    <li><a href="#ref-for-passwordcredential-10">3.1.3. PasswordCredential</a> <a href="#ref-for-passwordcredential-11">(2)</a> <a href="#ref-for-passwordcredential-12">(3)</a> <a href="#ref-for-passwordcredential-13">(4)</a>
    <li><a href="#ref-for-passwordcredential-14">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
    <li><a href="#ref-for-passwordcredential-15">3.1.3.3. 
    Matching Algorithm </a>
    <li><a href="#ref-for-passwordcredential-16">3.2.1.1. 
    CredentialRequestOptions dictionary </a>
    <li><a href="#ref-for-passwordcredential-17">3.3. Integration with Fetch</a> <a href="#ref-for-passwordcredential-18">(2)</a> <a href="#ref-for-passwordcredential-19">(3)</a> <a href="#ref-for-passwordcredential-20">(4)</a>
    <li><a href="#ref-for-passwordcredential-21">3.3.1. Monkey Patches to Fetch</a> <a href="#ref-for-passwordcredential-22">(2)</a> <a href="#ref-for-passwordcredential-23">(3)</a> <a href="#ref-for-passwordcredential-24">(4)</a>
    <li><a href="#ref-for-passwordcredential-25">3.3.2. 
    Extract a body and Content-Type for request’s attached credential </a>
    <li><a href="#ref-for-passwordcredential-26">4.1.1. 
    Request a Credential </a> <a href="#ref-for-passwordcredential-27">(2)</a> <a href="#ref-for-passwordcredential-28">(3)</a>
    <li><a href="#ref-for-passwordcredential-29">4.1.2. 
    Store a Credential </a>
    <li><a href="#ref-for-passwordcredential-30">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-passwordcredential-31">(2)</a>
    <li><a href="#ref-for-passwordcredential-32">6.1. Cross-origin Credential Leakage</a>
    <li><a href="#ref-for-passwordcredential-33">6.2. Same-origin Leakage</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-passwordcredential-idname">
   <b><a href="#dom-passwordcredential-idname">#dom-passwordcredential-idname</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-passwordcredential-idname-1">1.2.5. Layering on top of a legacy system</a>
    <li><a href="#ref-for-dom-passwordcredential-idname-2">3.1.3. PasswordCredential</a>
    <li><a href="#ref-for-dom-passwordcredential-idname-3">3.1.3.1. 
    PasswordCredential(HTMLFormElement form) Constructor </a>
    <li><a href="#ref-for-dom-passwordcredential-idname-4">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
    <li><a href="#ref-for-dom-passwordcredential-idname-5">3.3.2. 
    Extract a body and Content-Type for request’s attached credential </a> <a href="#ref-for-dom-passwordcredential-idname-6">(2)</a> <a href="#ref-for-dom-passwordcredential-idname-7">(3)</a> <a href="#ref-for-dom-passwordcredential-idname-8">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-passwordcredential-passwordname">
   <b><a href="#dom-passwordcredential-passwordname">#dom-passwordcredential-passwordname</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-passwordcredential-passwordname-1">1.2.5. Layering on top of a legacy system</a>
    <li><a href="#ref-for-dom-passwordcredential-passwordname-2">3.1.3. PasswordCredential</a>
    <li><a href="#ref-for-dom-passwordcredential-passwordname-3">3.1.3.1. 
    PasswordCredential(HTMLFormElement form) Constructor </a>
    <li><a href="#ref-for-dom-passwordcredential-passwordname-4">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
    <li><a href="#ref-for-dom-passwordcredential-passwordname-5">3.3.2. 
    Extract a body and Content-Type for request’s attached credential </a> <a href="#ref-for-dom-passwordcredential-passwordname-6">(2)</a> <a href="#ref-for-dom-passwordcredential-passwordname-7">(3)</a> <a href="#ref-for-dom-passwordcredential-passwordname-8">(4)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-passwordcredential-additionaldata">
   <b><a href="#dom-passwordcredential-additionaldata">#dom-passwordcredential-additionaldata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-passwordcredential-additionaldata-1">1.2.5. Layering on top of a legacy system</a> <a href="#ref-for-dom-passwordcredential-additionaldata-2">(2)</a> <a href="#ref-for-dom-passwordcredential-additionaldata-3">(3)</a> <a href="#ref-for-dom-passwordcredential-additionaldata-4">(4)</a> <a href="#ref-for-dom-passwordcredential-additionaldata-5">(5)</a>
    <li><a href="#ref-for-dom-passwordcredential-additionaldata-6">3.1.3. PasswordCredential</a>
    <li><a href="#ref-for-dom-passwordcredential-additionaldata-7">3.1.3.1. 
    PasswordCredential(HTMLFormElement form) Constructor </a> <a href="#ref-for-dom-passwordcredential-additionaldata-8">(2)</a>
    <li><a href="#ref-for-dom-passwordcredential-additionaldata-9">3.3.2. 
    Extract a body and Content-Type for request’s attached credential </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-passwordcredential-password">
   <b><a href="#dom-passwordcredential-password">#dom-passwordcredential-password</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-passwordcredential-password-1">1.2.1. Password-based Sign-in</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-passwordcredential-password-slot">
   <b><a href="#dom-passwordcredential-password-slot">#dom-passwordcredential-password-slot</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-passwordcredential-password-slot-1">3.1.3.2. 
    PasswordCredential(PasswordCredentialData data) Constructor </a>
    <li><a href="#ref-for-dom-passwordcredential-password-slot-2">3.3.2. 
    Extract a body and Content-Type for request’s attached credential </a> <a href="#ref-for-dom-passwordcredential-password-slot-3">(2)</a>
    <li><a href="#ref-for-dom-passwordcredential-password-slot-4">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-dom-passwordcredential-password-slot-5">(2)</a> <a href="#ref-for-dom-passwordcredential-password-slot-6">(3)</a>
    <li><a href="#ref-for-dom-passwordcredential-password-slot-7">6.1. Cross-origin Credential Leakage</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-passwordcredential-passwordcredential">
   <b><a href="#dom-passwordcredential-passwordcredential">#dom-passwordcredential-passwordcredential</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-passwordcredential-passwordcredential-1">1.2.3. Post-sign-in Confirmation</a>
    <li><a href="#ref-for-dom-passwordcredential-passwordcredential-2">1.2.4. Change Password</a>
    <li><a href="#ref-for-dom-passwordcredential-passwordcredential-3">3.1.3. PasswordCredential</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-passwordcredential-passwordcredential-data">
   <b><a href="#dom-passwordcredential-passwordcredential-data">#dom-passwordcredential-passwordcredential-data</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-passwordcredential-passwordcredential-data-1">3.1.3. PasswordCredential</a>
    <li><a href="#ref-for-dom-passwordcredential-passwordcredential-data-2">3.1.3.1. 
    PasswordCredential(HTMLFormElement form) Constructor </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-federatedcredentialdata">
   <b><a href="#dictdef-federatedcredentialdata">#dictdef-federatedcredentialdata</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-federatedcredentialdata-1">3.1.4. FederatedCredential</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-federatedcredentialdata-provider">
   <b><a href="#dom-federatedcredentialdata-provider">#dom-federatedcredentialdata-provider</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-federatedcredentialdata-provider-1">1.2.3. Post-sign-in Confirmation</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="federatedcredential">
   <b><a href="#federatedcredential">#federatedcredential</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-federatedcredential-1">1.2.3. Post-sign-in Confirmation</a>
    <li><a href="#ref-for-federatedcredential-2">3.1. Credential Types</a>
    <li><a href="#ref-for-federatedcredential-3">3.1.1. Credential</a>
    <li><a href="#ref-for-federatedcredential-4">3.1.4. FederatedCredential</a>
    <li><a href="#ref-for-federatedcredential-5">3.1.4.1. 
    Matching Algorithm </a> <a href="#ref-for-federatedcredential-6">(2)</a>
    <li><a href="#ref-for-federatedcredential-7">3.2.1.1. 
    CredentialRequestOptions dictionary </a>
    <li><a href="#ref-for-federatedcredential-8">3.2.2. Identifying providers</a>
    <li><a href="#ref-for-federatedcredential-9">4.1.1. 
    Request a Credential </a> <a href="#ref-for-federatedcredential-10">(2)</a>
    <li><a href="#ref-for-federatedcredential-11">4.1.2. 
    Store a Credential </a>
    <li><a href="#ref-for-federatedcredential-12">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-federatedcredential-13">(2)</a>
    <li><a href="#ref-for-federatedcredential-14">9. Future Work</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-federatedcredential-provider">
   <b><a href="#dom-federatedcredential-provider">#dom-federatedcredential-provider</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-federatedcredential-provider-1">1.2.2. Federated Sign-in</a>
    <li><a href="#ref-for-dom-federatedcredential-provider-2">3.1.4. FederatedCredential</a> <a href="#ref-for-dom-federatedcredential-provider-3">(2)</a>
    <li><a href="#ref-for-dom-federatedcredential-provider-4">3.1.4.1. 
    Matching Algorithm </a>
    <li><a href="#ref-for-dom-federatedcredential-provider-5">3.2.2. Identifying providers</a>
    <li><a href="#ref-for-dom-federatedcredential-provider-6">4.2.4. 
    Store SiteBoundCredential </a> <a href="#ref-for-dom-federatedcredential-provider-7">(2)</a> <a href="#ref-for-dom-federatedcredential-provider-8">(3)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-federatedcredential-protocol">
   <b><a href="#dom-federatedcredential-protocol">#dom-federatedcredential-protocol</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-federatedcredential-protocol-1">3.1.4. FederatedCredential</a>
    <li><a href="#ref-for-dom-federatedcredential-protocol-2">3.1.4.1. 
    Matching Algorithm </a>
    <li><a href="#ref-for-dom-federatedcredential-protocol-3">4.2.4. 
    Store SiteBoundCredential </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-federatedcredential-federated">
   <b><a href="#dom-federatedcredential-federated">#dom-federatedcredential-federated</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-federatedcredential-federated-1">1.2.2. Federated Sign-in</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-navigator-credentials">
   <b><a href="#dom-navigator-credentials">#dom-navigator-credentials</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-navigator-credentials-1">1.2.1. Password-based Sign-in</a> <a href="#ref-for-dom-navigator-credentials-2">(2)</a>
    <li><a href="#ref-for-dom-navigator-credentials-3">1.2.2. Federated Sign-in</a>
    <li><a href="#ref-for-dom-navigator-credentials-4">1.2.3. Post-sign-in Confirmation</a> <a href="#ref-for-dom-navigator-credentials-5">(2)</a> <a href="#ref-for-dom-navigator-credentials-6">(3)</a>
    <li><a href="#ref-for-dom-navigator-credentials-7">1.2.4. Change Password</a>
    <li><a href="#ref-for-dom-navigator-credentials-8">3.2.1.2. 
    FederatedCredentialRequestOptions dictionary </a> <a href="#ref-for-dom-navigator-credentials-9">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="credentialscontainer">
   <b><a href="#credentialscontainer">#credentialscontainer</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-credentialscontainer-1">3.2. Credential Manager</a>
    <li><a href="#ref-for-credentialscontainer-2">7.2. Signing-Out</a>
    <li><a href="#ref-for-credentialscontainer-3">8.2. Extension Points</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credentialscontainer-get">
   <b><a href="#dom-credentialscontainer-get">#dom-credentialscontainer-get</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialscontainer-get-1">1.2.1. Password-based Sign-in</a> <a href="#ref-for-dom-credentialscontainer-get-2">(2)</a>
    <li><a href="#ref-for-dom-credentialscontainer-get-3">1.2.2. Federated Sign-in</a>
    <li><a href="#ref-for-dom-credentialscontainer-get-4">3.2. Credential Manager</a> <a href="#ref-for-dom-credentialscontainer-get-5">(2)</a> <a href="#ref-for-dom-credentialscontainer-get-6">(3)</a>
    <li><a href="#ref-for-dom-credentialscontainer-get-7">3.2.1. 
    get() Parameters </a>
    <li><a href="#ref-for-dom-credentialscontainer-get-8">3.2.1.2. 
    FederatedCredentialRequestOptions dictionary </a> <a href="#ref-for-dom-credentialscontainer-get-9">(2)</a>
    <li><a href="#ref-for-dom-credentialscontainer-get-10">4.1.1. 
    Request a Credential </a>
    <li><a href="#ref-for-dom-credentialscontainer-get-11">5.3. Credential Selection</a>
    <li><a href="#ref-for-dom-credentialscontainer-get-12">6.1. Cross-origin Credential Leakage</a> <a href="#ref-for-dom-credentialscontainer-get-13">(2)</a> <a href="#ref-for-dom-credentialscontainer-get-14">(3)</a>
    <li><a href="#ref-for-dom-credentialscontainer-get-15">6.3. Origin Confusion</a>
    <li><a href="#ref-for-dom-credentialscontainer-get-16">7.1. Timing Attacks</a> <a href="#ref-for-dom-credentialscontainer-get-17">(2)</a>
    <li><a href="#ref-for-dom-credentialscontainer-get-18">8.3. Browser Extensions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credentialscontainer-get-options-options">
   <b><a href="#dom-credentialscontainer-get-options-options">#dom-credentialscontainer-get-options-options</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialscontainer-get-options-options-1">3.2. Credential Manager</a> <a href="#ref-for-dom-credentialscontainer-get-options-options-2">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credentialscontainer-store">
   <b><a href="#dom-credentialscontainer-store">#dom-credentialscontainer-store</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialscontainer-store-1">1.2.1. Password-based Sign-in</a> <a href="#ref-for-dom-credentialscontainer-store-2">(2)</a>
    <li><a href="#ref-for-dom-credentialscontainer-store-3">1.2.3. Post-sign-in Confirmation</a> <a href="#ref-for-dom-credentialscontainer-store-4">(2)</a> <a href="#ref-for-dom-credentialscontainer-store-5">(3)</a>
    <li><a href="#ref-for-dom-credentialscontainer-store-6">1.2.4. Change Password</a> <a href="#ref-for-dom-credentialscontainer-store-7">(2)</a>
    <li><a href="#ref-for-dom-credentialscontainer-store-8">3.2. Credential Manager</a> <a href="#ref-for-dom-credentialscontainer-store-9">(2)</a> <a href="#ref-for-dom-credentialscontainer-store-10">(3)</a>
    <li><a href="#ref-for-dom-credentialscontainer-store-11">5.1. Storing and Updating Credentials</a>
    <li><a href="#ref-for-dom-credentialscontainer-store-12">6.3. Origin Confusion</a>
    <li><a href="#ref-for-dom-credentialscontainer-store-13">6.5. Script Injection</a>
    <li><a href="#ref-for-dom-credentialscontainer-store-14">8.3. Browser Extensions</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credentialscontainer-store-credential-credential">
   <b><a href="#dom-credentialscontainer-store-credential-credential">#dom-credentialscontainer-store-credential-credential</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialscontainer-store-credential-credential-1">3.2. Credential Manager</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credentialscontainer-requireusermediation">
   <b><a href="#dom-credentialscontainer-requireusermediation">#dom-credentialscontainer-requireusermediation</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialscontainer-requireusermediation-1">3.2. Credential Manager</a> <a href="#ref-for-dom-credentialscontainer-requireusermediation-2">(2)</a>
    <li><a href="#ref-for-dom-credentialscontainer-requireusermediation-3">3.2.1.1. 
    CredentialRequestOptions dictionary </a>
    <li><a href="#ref-for-dom-credentialscontainer-requireusermediation-4">7.2. Signing-Out</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-credentialrequestoptions">
   <b><a href="#dictdef-credentialrequestoptions">#dictdef-credentialrequestoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-credentialrequestoptions-1">3.1.2. 
    SiteBoundCredential </a>
    <li><a href="#ref-for-dictdef-credentialrequestoptions-2">3.1.4.1. 
    Matching Algorithm </a>
    <li><a href="#ref-for-dictdef-credentialrequestoptions-3">3.2. Credential Manager</a>
    <li><a href="#ref-for-dictdef-credentialrequestoptions-4">3.2.1. 
    get() Parameters </a> <a href="#ref-for-dictdef-credentialrequestoptions-5">(2)</a>
    <li><a href="#ref-for-dictdef-credentialrequestoptions-6">4.1.1. 
    Request a Credential </a>
    <li><a href="#ref-for-dictdef-credentialrequestoptions-7">4.2.1. 
    Gather SiteBoundCredentials </a>
    <li><a href="#ref-for-dictdef-credentialrequestoptions-8">4.2.2. 
    Request an SiteBoundCredential without user mediation </a>
    <li><a href="#ref-for-dictdef-credentialrequestoptions-9">4.2.3. 
    Request a SiteBoundCredential with user mediation </a>
    <li><a href="#ref-for-dictdef-credentialrequestoptions-10">8.2. Extension Points</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credentialrequestoptions-password">
   <b><a href="#dom-credentialrequestoptions-password">#dom-credentialrequestoptions-password</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialrequestoptions-password-1">1.2.1. Password-based Sign-in</a>
    <li><a href="#ref-for-dom-credentialrequestoptions-password-2">1.2.2. Federated Sign-in</a>
    <li><a href="#ref-for-dom-credentialrequestoptions-password-3">3.2.1.1. 
    CredentialRequestOptions dictionary </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credentialrequestoptions-federated">
   <b><a href="#dom-credentialrequestoptions-federated">#dom-credentialrequestoptions-federated</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialrequestoptions-federated-1">1.2.2. Federated Sign-in</a>
    <li><a href="#ref-for-dom-credentialrequestoptions-federated-2">3.1.4.1. 
    Matching Algorithm </a>
    <li><a href="#ref-for-dom-credentialrequestoptions-federated-3">3.2.1.1. 
    CredentialRequestOptions dictionary </a>
    <li><a href="#ref-for-dom-credentialrequestoptions-federated-4">3.2.1.2. 
    FederatedCredentialRequestOptions dictionary </a> <a href="#ref-for-dom-credentialrequestoptions-federated-5">(2)</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-credentialrequestoptions-unmediated">
   <b><a href="#dom-credentialrequestoptions-unmediated">#dom-credentialrequestoptions-unmediated</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-credentialrequestoptions-unmediated-1">3.2.1.1. 
    CredentialRequestOptions dictionary </a>
    <li><a href="#ref-for-dom-credentialrequestoptions-unmediated-2">3.2.1.2. 
    FederatedCredentialRequestOptions dictionary </a>
    <li><a href="#ref-for-dom-credentialrequestoptions-unmediated-3">4.1.1. 
    Request a Credential </a>
    <li><a href="#ref-for-dom-credentialrequestoptions-unmediated-4">8.1. Website Authors</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dictdef-federatedcredentialrequestoptions">
   <b><a href="#dictdef-federatedcredentialrequestoptions">#dictdef-federatedcredentialrequestoptions</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dictdef-federatedcredentialrequestoptions-1">3.2.1.1. 
    CredentialRequestOptions dictionary </a> <a href="#ref-for-dictdef-federatedcredentialrequestoptions-2">(2)</a>
    <li><a href="#ref-for-dictdef-federatedcredentialrequestoptions-3">3.2.2. Identifying providers</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-federatedcredentialrequestoptions-providers">
   <b><a href="#dom-federatedcredentialrequestoptions-providers">#dom-federatedcredentialrequestoptions-providers</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-federatedcredentialrequestoptions-providers-1">1.2.2. Federated Sign-in</a>
    <li><a href="#ref-for-dom-federatedcredentialrequestoptions-providers-2">3.1.4.1. 
    Matching Algorithm </a>
    <li><a href="#ref-for-dom-federatedcredentialrequestoptions-providers-3">3.2.1.2. 
    FederatedCredentialRequestOptions dictionary </a> <a href="#ref-for-dom-federatedcredentialrequestoptions-providers-4">(2)</a> <a href="#ref-for-dom-federatedcredentialrequestoptions-providers-5">(3)</a>
    <li><a href="#ref-for-dom-federatedcredentialrequestoptions-providers-6">3.2.2. Identifying providers</a>
    <li><a href="#ref-for-dom-federatedcredentialrequestoptions-providers-7">7.1. Timing Attacks</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="dom-federatedcredentialrequestoptions-protocols">
   <b><a href="#dom-federatedcredentialrequestoptions-protocols">#dom-federatedcredentialrequestoptions-protocols</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-dom-federatedcredentialrequestoptions-protocols-1">3.1.4.1. 
    Matching Algorithm </a> <a href="#ref-for-dom-federatedcredentialrequestoptions-protocols-2">(2)</a>
    <li><a href="#ref-for-dom-federatedcredentialrequestoptions-protocols-3">3.2.1.2. 
    FederatedCredentialRequestOptions dictionary </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="request-attached-credential">
   <b><a href="#request-attached-credential">#request-attached-credential</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-request-attached-credential-1">3.3.1. Monkey Patches to Fetch</a> <a href="#ref-for-request-attached-credential-2">(2)</a> <a href="#ref-for-request-attached-credential-3">(3)</a> <a href="#ref-for-request-attached-credential-4">(4)</a>
    <li><a href="#ref-for-request-attached-credential-5">3.3.2. 
    Extract a body and Content-Type for request’s attached credential </a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="typedefdef-credentialinfo">
   <b><a href="#typedefdef-credentialinfo">#typedefdef-credentialinfo</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-typedefdef-credentialinfo-1">3.3.1. Monkey Patches to Fetch</a>
   </ul>
  </aside>
  <aside class="dfn-panel" data-for="credential-chooser">
   <b><a href="#credential-chooser">#credential-chooser</a></b><b>Referenced in:</b>
   <ul>
    <li><a href="#ref-for-credential-chooser-1">1.2.1. Password-based Sign-in</a>
    <li><a href="#ref-for-credential-chooser-2">5.2. Requiring User Mediation</a>
   </ul>
  </aside>
<script>/* script-dfn-panel */

        document.body.addEventListener("click", function(e) {
            var queryAll = function(sel) { return [].slice.call(document.querySelectorAll(sel)); }
            // Find the dfn element or panel, if any, that was clicked on.
            var el = e.target;
            var target;
            var hitALink = false;
            while(el.parentElement) {
                if(el.tagName == "A") {
                    // Clicking on a link in a <dfn> shouldn't summon the panel
                    hitALink = true;
                }
                if(el.classList.contains("dfn-paneled")) {
                    target = "dfn";
                    break;
                }
                if(el.classList.contains("dfn-panel")) {
                    target = "dfn-panel";
                    break;
                }
                el = el.parentElement;
            }
            if(target != "dfn-panel") {
                // Turn off any currently "on" or "activated" panels.
                queryAll(".dfn-panel.on, .dfn-panel.activated").forEach(function(el){
                    el.classList.remove("on");
                    el.classList.remove("activated");
                });
            }
            if(target == "dfn" && !hitALink) {
                // open the panel
                var dfnPanel = document.querySelector(".dfn-panel[data-for='" + el.id + "']");
                if(dfnPanel) {
                    console.log(dfnPanel);
                    dfnPanel.classList.add("on");
                    var rect = el.getBoundingClientRect();
                    dfnPanel.style.left = window.scrollX + rect.right + 5 + "px";
                    dfnPanel.style.top = window.scrollY + rect.top + "px";
                    var panelRect = dfnPanel.getBoundingClientRect();
                    var panelWidth = panelRect.right - panelRect.left;
                    if(panelRect.right > document.body.scrollWidth && (rect.left - (panelWidth + 5)) > 0) {
                        // Reposition, because the panel is overflowing
                        dfnPanel.style.left = window.scrollX + rect.left - (panelWidth + 5) + "px";
                    }
                } else {
                    console.log("Couldn't find .dfn-panel[data-for='" + el.id + "']");
                }
            } else if(target == "dfn-panel") {
                // Switch it to "activated" state, which pins it.
                el.classList.add("activated");
                el.style.left = null;
                el.style.top = null;
            }

        });
        </script>